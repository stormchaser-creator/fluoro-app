(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=r(u);fetch(u.href,h)}})();var Tc={exports:{}},fs={};var em;function Np(){if(em)return fs;em=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(o,u,h){var f=null;if(h!==void 0&&(f=""+h),u.key!==void 0&&(f=""+u.key),"key"in u){h={};for(var g in u)g!=="key"&&(h[g]=u[g])}else h=u;return u=h.ref,{$$typeof:n,type:o,key:f,ref:u!==void 0?u:null,props:h}}return fs.Fragment=a,fs.jsx=r,fs.jsxs=r,fs}var tm;function Up(){return tm||(tm=1,Tc.exports=Np()),Tc.exports}var d=Up(),kc={exports:{}},oe={};var im;function Lp(){if(im)return oe;im=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function k(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,q={};function I(S,L,V){this.props=S,this.context=L,this.refs=q,this.updater=V||z}I.prototype.isReactComponent={},I.prototype.setState=function(S,L){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,L,"setState")},I.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function O(){}O.prototype=I.prototype;function M(S,L,V){this.props=S,this.context=L,this.refs=q,this.updater=V||z}var $=M.prototype=new O;$.constructor=M,H($,I.prototype),$.isPureReactComponent=!0;var Z=Array.isArray;function X(){}var Q={H:null,A:null,T:null,S:null},Oe=Object.prototype.hasOwnProperty;function Ne(S,L,V){var P=V.ref;return{$$typeof:n,type:S,key:L,ref:P!==void 0?P:null,props:V}}function bi(S,L){return Ne(S.type,L,S.props)}function Ct(S){return typeof S=="object"&&S!==null&&S.$$typeof===n}function Y(S){var L={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(V){return L[V]})}var Ce=/\/+/g;function be(S,L){return typeof S=="object"&&S!==null&&S.key!=null?Y(""+S.key):L.toString(36)}function me(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(X,X):(S.status="pending",S.then(function(L){S.status==="pending"&&(S.status="fulfilled",S.value=L)},function(L){S.status==="pending"&&(S.status="rejected",S.reason=L)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function D(S,L,V,P,re){var de=typeof S;(de==="undefined"||de==="boolean")&&(S=null);var _e=!1;if(S===null)_e=!0;else switch(de){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(S.$$typeof){case n:case a:_e=!0;break;case b:return _e=S._init,D(_e(S._payload),L,V,P,re)}}if(_e)return re=re(S),_e=P===""?"."+be(S,0):P,Z(re)?(V="",_e!=null&&(V=_e.replace(Ce,"$&/")+"/"),D(re,L,V,"",function(wn){return wn})):re!=null&&(Ct(re)&&(re=bi(re,V+(re.key==null||S&&S.key===re.key?"":(""+re.key).replace(Ce,"$&/")+"/")+_e)),L.push(re)),1;_e=0;var ct=P===""?".":P+":";if(Z(S))for(var Ie=0;Ie<S.length;Ie++)P=S[Ie],de=ct+be(P,Ie),_e+=D(P,L,V,de,re);else if(Ie=k(S),typeof Ie=="function")for(S=Ie.call(S),Ie=0;!(P=S.next()).done;)P=P.value,de=ct+be(P,Ie++),_e+=D(P,L,V,de,re);else if(de==="object"){if(typeof S.then=="function")return D(me(S),L,V,P,re);throw L=String(S),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return _e}function W(S,L,V){if(S==null)return S;var P=[],re=0;return D(S,P,"","",function(de){return L.call(V,de,re++)}),P}function G(S){if(S._status===-1){var L=S._result;L=L(),L.then(function(V){(S._status===0||S._status===-1)&&(S._status=1,S._result=V)},function(V){(S._status===0||S._status===-1)&&(S._status=2,S._result=V)}),S._status===-1&&(S._status=0,S._result=L)}if(S._status===1)return S._result.default;throw S._result}var ee=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},se={map:W,forEach:function(S,L,V){W(S,function(){L.apply(this,arguments)},V)},count:function(S){var L=0;return W(S,function(){L++}),L},toArray:function(S){return W(S,function(L){return L})||[]},only:function(S){if(!Ct(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return oe.Activity=T,oe.Children=se,oe.Component=I,oe.Fragment=r,oe.Profiler=u,oe.PureComponent=M,oe.StrictMode=o,oe.Suspense=y,oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,oe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return Q.H.useMemoCache(S)}},oe.cache=function(S){return function(){return S.apply(null,arguments)}},oe.cacheSignal=function(){return null},oe.cloneElement=function(S,L,V){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var P=H({},S.props),re=S.key;if(L!=null)for(de in L.key!==void 0&&(re=""+L.key),L)!Oe.call(L,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&L.ref===void 0||(P[de]=L[de]);var de=arguments.length-2;if(de===1)P.children=V;else if(1<de){for(var _e=Array(de),ct=0;ct<de;ct++)_e[ct]=arguments[ct+2];P.children=_e}return Ne(S.type,re,P)},oe.createContext=function(S){return S={$$typeof:f,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:h,_context:S},S},oe.createElement=function(S,L,V){var P,re={},de=null;if(L!=null)for(P in L.key!==void 0&&(de=""+L.key),L)Oe.call(L,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(re[P]=L[P]);var _e=arguments.length-2;if(_e===1)re.children=V;else if(1<_e){for(var ct=Array(_e),Ie=0;Ie<_e;Ie++)ct[Ie]=arguments[Ie+2];re.children=ct}if(S&&S.defaultProps)for(P in _e=S.defaultProps,_e)re[P]===void 0&&(re[P]=_e[P]);return Ne(S,de,re)},oe.createRef=function(){return{current:null}},oe.forwardRef=function(S){return{$$typeof:g,render:S}},oe.isValidElement=Ct,oe.lazy=function(S){return{$$typeof:b,_payload:{_status:-1,_result:S},_init:G}},oe.memo=function(S,L){return{$$typeof:p,type:S,compare:L===void 0?null:L}},oe.startTransition=function(S){var L=Q.T,V={};Q.T=V;try{var P=S(),re=Q.S;re!==null&&re(V,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(X,ee)}catch(de){ee(de)}finally{L!==null&&V.types!==null&&(L.types=V.types),Q.T=L}},oe.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},oe.use=function(S){return Q.H.use(S)},oe.useActionState=function(S,L,V){return Q.H.useActionState(S,L,V)},oe.useCallback=function(S,L){return Q.H.useCallback(S,L)},oe.useContext=function(S){return Q.H.useContext(S)},oe.useDebugValue=function(){},oe.useDeferredValue=function(S,L){return Q.H.useDeferredValue(S,L)},oe.useEffect=function(S,L){return Q.H.useEffect(S,L)},oe.useEffectEvent=function(S){return Q.H.useEffectEvent(S)},oe.useId=function(){return Q.H.useId()},oe.useImperativeHandle=function(S,L,V){return Q.H.useImperativeHandle(S,L,V)},oe.useInsertionEffect=function(S,L){return Q.H.useInsertionEffect(S,L)},oe.useLayoutEffect=function(S,L){return Q.H.useLayoutEffect(S,L)},oe.useMemo=function(S,L){return Q.H.useMemo(S,L)},oe.useOptimistic=function(S,L){return Q.H.useOptimistic(S,L)},oe.useReducer=function(S,L,V){return Q.H.useReducer(S,L,V)},oe.useRef=function(S){return Q.H.useRef(S)},oe.useState=function(S){return Q.H.useState(S)},oe.useSyncExternalStore=function(S,L,V){return Q.H.useSyncExternalStore(S,L,V)},oe.useTransition=function(){return Q.H.useTransition()},oe.version="19.2.4",oe}var am;function Yc(){return am||(am=1,kc.exports=Lp()),kc.exports}var ue=Yc(),Ac={exports:{}},ms={},jc={exports:{}},Ec={};var nm;function Hp(){return nm||(nm=1,(function(n){function a(D,W){var G=D.length;D.push(W);e:for(;0<G;){var ee=G-1>>>1,se=D[ee];if(0<u(se,W))D[ee]=W,D[G]=se,G=ee;else break e}}function r(D){return D.length===0?null:D[0]}function o(D){if(D.length===0)return null;var W=D[0],G=D.pop();if(G!==W){D[0]=G;e:for(var ee=0,se=D.length,S=se>>>1;ee<S;){var L=2*(ee+1)-1,V=D[L],P=L+1,re=D[P];if(0>u(V,G))P<se&&0>u(re,V)?(D[ee]=re,D[P]=G,ee=P):(D[ee]=V,D[L]=G,ee=L);else if(P<se&&0>u(re,G))D[ee]=re,D[P]=G,ee=P;else break e}}return W}function u(D,W){var G=D.sortIndex-W.sortIndex;return G!==0?G:D.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();n.unstable_now=function(){return f.now()-g}}var y=[],p=[],b=1,T=null,x=3,k=!1,z=!1,H=!1,q=!1,I=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function $(D){for(var W=r(p);W!==null;){if(W.callback===null)o(p);else if(W.startTime<=D)o(p),W.sortIndex=W.expirationTime,a(y,W);else break;W=r(p)}}function Z(D){if(H=!1,$(D),!z)if(r(y)!==null)z=!0,X||(X=!0,Y());else{var W=r(p);W!==null&&me(Z,W.startTime-D)}}var X=!1,Q=-1,Oe=5,Ne=-1;function bi(){return q?!0:!(n.unstable_now()-Ne<Oe)}function Ct(){if(q=!1,X){var D=n.unstable_now();Ne=D;var W=!0;try{e:{z=!1,H&&(H=!1,O(Q),Q=-1),k=!0;var G=x;try{t:{for($(D),T=r(y);T!==null&&!(T.expirationTime>D&&bi());){var ee=T.callback;if(typeof ee=="function"){T.callback=null,x=T.priorityLevel;var se=ee(T.expirationTime<=D);if(D=n.unstable_now(),typeof se=="function"){T.callback=se,$(D),W=!0;break t}T===r(y)&&o(y),$(D)}else o(y);T=r(y)}if(T!==null)W=!0;else{var S=r(p);S!==null&&me(Z,S.startTime-D),W=!1}}break e}finally{T=null,x=G,k=!1}W=void 0}}finally{W?Y():X=!1}}}var Y;if(typeof M=="function")Y=function(){M(Ct)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,be=Ce.port2;Ce.port1.onmessage=Ct,Y=function(){be.postMessage(null)}}else Y=function(){I(Ct,0)};function me(D,W){Q=I(function(){D(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Oe=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(D){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var G=x;x=W;try{return D()}finally{x=G}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=x;x=D;try{return W()}finally{x=G}},n.unstable_scheduleCallback=function(D,W,G){var ee=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=G+se,D={id:b++,callback:W,priorityLevel:D,startTime:G,expirationTime:se,sortIndex:-1},G>ee?(D.sortIndex=G,a(p,D),r(y)===null&&D===r(p)&&(H?(O(Q),Q=-1):H=!0,me(Z,G-ee))):(D.sortIndex=se,a(y,D),z||k||(z=!0,X||(X=!0,Y()))),D},n.unstable_shouldYield=bi,n.unstable_wrapCallback=function(D){var W=x;return function(){var G=x;x=W;try{return D.apply(this,arguments)}finally{x=G}}}})(Ec)),Ec}var sm;function Ip(){return sm||(sm=1,jc.exports=Hp()),jc.exports}var Rc={exports:{}},lt={};var rm;function Wp(){if(rm)return lt;rm=1;var n=Yc();function a(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(y,p,b){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:T==null?null:""+T,children:y,containerInfo:p,implementation:b}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return lt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,lt.createPortal=function(y,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return h(y,p,null,b)},lt.flushSync=function(y){var p=f.T,b=o.p;try{if(f.T=null,o.p=2,y)return y()}finally{f.T=p,o.p=b,o.d.f()}},lt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(y,p))},lt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},lt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var b=p.as,T=g(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?o.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:k}):b==="script"&&o.d.X(y,{crossOrigin:T,integrity:x,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},lt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);o.d.M(y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(y)},lt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,T=g(b,p.crossOrigin);o.d.L(y,b,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},lt.preloadModule=function(y,p){if(typeof y=="string")if(p){var b=g(p.as,p.crossOrigin);o.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(y)},lt.requestFormReset=function(y){o.d.r(y)},lt.unstable_batchedUpdates=function(y,p){return y(p)},lt.useFormState=function(y,p,b){return f.H.useFormState(y,p,b)},lt.useFormStatus=function(){return f.H.useHostTransitionStatus()},lt.version="19.2.4",lt}var om;function Gp(){if(om)return Rc.exports;om=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Rc.exports=Wp(),Rc.exports}var lm;function Vp(){if(lm)return ms;lm=1;var n=Ip(),a=Yc(),r=Gp();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(h(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var l=i.return;if(l===null)break;var c=l.alternate;if(c===null){if(s=l.return,s!==null){i=s;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===i)return y(l),e;if(c===s)return y(l),t;c=c.sibling}throw Error(o(188))}if(i.return!==s.return)i=l,s=c;else{for(var m=!1,v=l.child;v;){if(v===i){m=!0,i=l,s=c;break}if(v===s){m=!0,s=l,i=c;break}v=v.sibling}if(!m){for(v=c.child;v;){if(v===i){m=!0,i=c,s=l;break}if(v===s){m=!0,s=c,i=l;break}v=v.sibling}if(!m)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(i.tag!==3)throw Error(o(188));return i.stateNode.current===i?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Oe=Symbol.for("react.lazy"),Ne=Symbol.for("react.activity"),bi=Symbol.for("react.memo_cache_sentinel"),Ct=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=Ct&&e[Ct]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ce?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case I:return"Profiler";case q:return"StrictMode";case Z:return"Suspense";case X:return"SuspenseList";case Ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case z:return"Portal";case M:return e.displayName||"Context";case O:return(e._context.displayName||"Context")+".Consumer";case $:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case Oe:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}var me=Array.isArray,D=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],se=-1;function S(e){return{current:e}}function L(e){0>se||(e.current=ee[se],ee[se]=null,se--)}function V(e,t){se++,ee[se]=e.current,e.current=t}var P=S(null),re=S(null),de=S(null),_e=S(null);function ct(e,t){switch(V(de,t),V(re,e),V(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?_f(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=_f(t),e=Tf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(P),V(P,e)}function Ie(){L(P),L(re),L(de)}function wn(e){e.memoizedState!==null&&V(_e,e);var t=P.current,i=Tf(t,e.type);t!==i&&(V(re,e),V(P,i))}function js(e){re.current===e&&(L(P),L(re)),_e.current===e&&(L(_e),cs._currentValue=G)}var so,Jc;function Pi(e){if(so===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);so=t&&t[1]||"",Jc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+so+e+Jc}var ro=!1;function oo(e,t){if(!e||ro)return"";ro=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(C){var R=C}Reflect.construct(e,[],U)}else{try{U.call()}catch(C){R=C}e.call(U.prototype)}}else{try{throw Error()}catch(C){R=C}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(C){if(C&&R&&typeof C.stack=="string")return[C.stack,R.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),m=c[0],v=c[1];if(m&&v){var w=m.split(`
`),E=v.split(`
`);for(l=s=0;s<w.length&&!w[s].includes("DetermineComponentFrameRoot");)s++;for(;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;if(s===w.length||l===E.length)for(s=w.length-1,l=E.length-1;1<=s&&0<=l&&w[s]!==E[l];)l--;for(;1<=s&&0<=l;s--,l--)if(w[s]!==E[l]){if(s!==1||l!==1)do if(s--,l--,0>l||w[s]!==E[l]){var B=`
`+w[s].replace(" at new "," at ");return e.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",e.displayName)),B}while(1<=s&&0<=l);break}}}finally{ro=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Pi(i):""}function mg(e,t){switch(e.tag){case 26:case 27:case 5:return Pi(e.type);case 16:return Pi("Lazy");case 13:return e.child!==t&&t!==null?Pi("Suspense Fallback"):Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 15:return oo(e.type,!1);case 11:return oo(e.type.render,!1);case 1:return oo(e.type,!0);case 31:return Pi("Activity");default:return""}}function Zc(e){try{var t="",i=null;do t+=mg(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var lo=Object.prototype.hasOwnProperty,co=n.unstable_scheduleCallback,uo=n.unstable_cancelCallback,gg=n.unstable_shouldYield,yg=n.unstable_requestPaint,vt=n.unstable_now,pg=n.unstable_getCurrentPriorityLevel,eu=n.unstable_ImmediatePriority,tu=n.unstable_UserBlockingPriority,Es=n.unstable_NormalPriority,vg=n.unstable_LowPriority,iu=n.unstable_IdlePriority,bg=n.log,wg=n.unstable_setDisableYieldValue,xn=null,bt=null;function wi(e){if(typeof bg=="function"&&wg(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(xn,e)}catch{}}var wt=Math.clz32?Math.clz32:_g,xg=Math.log,Sg=Math.LN2;function _g(e){return e>>>=0,e===0?32:31-(xg(e)/Sg|0)|0}var Rs=256,Cs=262144,Ds=4194304;function Qi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Os(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var l=0,c=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var v=s&134217727;return v!==0?(s=v&~c,s!==0?l=Qi(s):(m&=v,m!==0?l=Qi(m):i||(i=v&~e,i!==0&&(l=Qi(i))))):(v=s&~c,v!==0?l=Qi(v):m!==0?l=Qi(m):i||(i=s&~e,i!==0&&(l=Qi(i)))),l===0?0:t!==0&&t!==l&&(t&c)===0&&(c=l&-l,i=t&-t,c>=i||c===32&&(i&4194048)!==0)?t:l}function Sn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Tg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function au(){var e=Ds;return Ds<<=1,(Ds&62914560)===0&&(Ds=4194304),e}function ho(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function _n(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function kg(e,t,i,s,l,c){var m=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var v=e.entanglements,w=e.expirationTimes,E=e.hiddenUpdates;for(i=m&~i;0<i;){var B=31-wt(i),U=1<<B;v[B]=0,w[B]=-1;var R=E[B];if(R!==null)for(E[B]=null,B=0;B<R.length;B++){var C=R[B];C!==null&&(C.lane&=-536870913)}i&=~U}s!==0&&nu(e,s,0),c!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=c&~(m&~t))}function nu(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-wt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function su(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-wt(i),l=1<<s;l&t|e[s]&t&&(e[s]|=t),i&=~l}}function ru(e,t){var i=t&-t;return i=(i&42)!==0?1:fo(i),(i&(e.suspendedLanes|t))!==0?0:i}function fo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ou(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:Pf(e.type))}function lu(e,t){var i=W.p;try{return W.p=e,t()}finally{W.p=i}}var xi=Math.random().toString(36).slice(2),tt="__reactFiber$"+xi,dt="__reactProps$"+xi,wa="__reactContainer$"+xi,go="__reactEvents$"+xi,Ag="__reactListeners$"+xi,jg="__reactHandles$"+xi,cu="__reactResources$"+xi,Tn="__reactMarker$"+xi;function yo(e){delete e[tt],delete e[dt],delete e[go],delete e[Ag],delete e[jg]}function xa(e){var t=e[tt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[wa]||i[tt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Df(e);e!==null;){if(i=e[tt])return i;e=Df(e)}return t}e=i,i=e.parentNode}return null}function Sa(e){if(e=e[tt]||e[wa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function _a(e){var t=e[cu];return t||(t=e[cu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[Tn]=!0}var uu=new Set,du={};function Yi(e,t){Ta(e,t),Ta(e+"Capture",t)}function Ta(e,t){for(du[e]=t,e=0;e<t.length;e++)uu.add(t[e])}var Eg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},fu={};function Rg(e){return lo.call(fu,e)?!0:lo.call(hu,e)?!1:Eg.test(e)?fu[e]=!0:(hu[e]=!0,!1)}function zs(e,t,i){if(Rg(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function qs(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Xt(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cg(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,c=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){i=""+m,c.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function po(e){if(!e._valueTracker){var t=mu(e)?"checked":"value";e._valueTracker=Cg(e,t,""+e[t])}}function gu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=mu(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function Bs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Dg=/[\n"\\]/g;function Ot(e){return e.replace(Dg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function vo(e,t,i,s,l,c,m,v){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?bo(e,m,Dt(t)):i!=null?bo(e,m,Dt(i)):s!=null&&e.removeAttribute("value"),l==null&&c!=null&&(e.defaultChecked=!!c),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Dt(v):e.removeAttribute("name")}function yu(e,t,i,s,l,c,m,v){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||i!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){po(e);return}i=i!=null?""+Dt(i):"",t=t!=null?""+Dt(t):i,v||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=v?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),po(e)}function bo(e,t,i){t==="number"&&Bs(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ka(e,t,i,s){if(e=e.options,t){t={};for(var l=0;l<i.length;l++)t["$"+i[l]]=!0;for(i=0;i<e.length;i++)l=t.hasOwnProperty("$"+e[i].value),e[i].selected!==l&&(e[i].selected=l),l&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Dt(i),t=null,l=0;l<e.length;l++){if(e[l].value===i){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function pu(e,t,i){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+Dt(i):""}function vu(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(o(92));if(me(s)){if(1<s.length)throw Error(o(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=Dt(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),po(e)}function Aa(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Og=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bu(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||Og.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function wu(e,t,i){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&i[l]!==s&&bu(e,l,s)}else for(var c in t)t.hasOwnProperty(c)&&bu(e,c,t[c])}function wo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ms(e){return qg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Jt(){}var xo=null;function So(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ja=null,Ea=null;function xu(e){var t=Sa(e);if(t&&(e=t.stateNode)){var i=e[dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(vo(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ot(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var l=s[dt]||null;if(!l)throw Error(o(90));vo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&gu(s)}break e;case"textarea":pu(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&ka(e,!!i.multiple,t,!1)}}}var _o=!1;function Su(e,t,i){if(_o)return e(t,i);_o=!0;try{var s=e(t);return s}finally{if(_o=!1,(ja!==null||Ea!==null)&&(_r(),ja&&(t=ja,e=Ea,Ea=ja=null,xu(t),e)))for(t=0;t<e.length;t++)xu(e[t])}}function An(e,t){var i=e.stateNode;if(i===null)return null;var s=i[dt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(o(231,t,typeof i));return i}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),To=!1;if(Zt)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){To=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{To=!1}var Si=null,ko=null,Ns=null;function _u(){if(Ns)return Ns;var e,t=ko,i=t.length,s,l="value"in Si?Si.value:Si.textContent,c=l.length;for(e=0;e<i&&t[e]===l[e];e++);var m=i-e;for(s=1;s<=m&&t[i-s]===l[c-s];s++);return Ns=l.slice(e,1<s?1-s:void 0)}function Us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ls(){return!0}function Tu(){return!1}function ht(e){function t(i,s,l,c,m){this._reactName=i,this._targetInst=l,this.type=s,this.nativeEvent=c,this.target=m,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(i=e[v],this[v]=i?i(c):c[v]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Ls:Tu,this.isPropagationStopped=Tu,this}return T(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),t}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hs=ht(Ki),En=T({},Ki,{view:0,detail:0}),Bg=ht(En),Ao,jo,Rn,Is=T({},En,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ro,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rn&&(Rn&&e.type==="mousemove"?(Ao=e.screenX-Rn.screenX,jo=e.screenY-Rn.screenY):jo=Ao=0,Rn=e),Ao)},movementY:function(e){return"movementY"in e?e.movementY:jo}}),ku=ht(Is),Mg=T({},Is,{dataTransfer:0}),Ng=ht(Mg),Ug=T({},En,{relatedTarget:0}),Eo=ht(Ug),Lg=T({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Hg=ht(Lg),Ig=T({},Ki,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Wg=ht(Ig),Gg=T({},Ki,{data:0}),Au=ht(Gg),Vg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fg[e])?!!t[e]:!1}function Ro(){return Pg}var Qg=T({},En,{key:function(e){if(e.key){var t=Vg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ro,charCode:function(e){return e.type==="keypress"?Us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yg=ht(Qg),Kg=T({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=ht(Kg),Xg=T({},En,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ro}),Jg=ht(Xg),Zg=T({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),ey=ht(Zg),ty=T({},Is,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iy=ht(ty),ay=T({},Ki,{newState:0,oldState:0}),ny=ht(ay),sy=[9,13,27,32],Co=Zt&&"CompositionEvent"in window,Cn=null;Zt&&"documentMode"in document&&(Cn=document.documentMode);var ry=Zt&&"TextEvent"in window&&!Cn,Eu=Zt&&(!Co||Cn&&8<Cn&&11>=Cn),Ru=" ",Cu=!1;function Du(e,t){switch(e){case"keyup":return sy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ou(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ra=!1;function oy(e,t){switch(e){case"compositionend":return Ou(t);case"keypress":return t.which!==32?null:(Cu=!0,Ru);case"textInput":return e=t.data,e===Ru&&Cu?null:e;default:return null}}function ly(e,t){if(Ra)return e==="compositionend"||!Co&&Du(e,t)?(e=_u(),Ns=ko=Si=null,Ra=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Eu&&t.locale!=="ko"?null:t.data;default:return null}}var cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cy[e.type]:t==="textarea"}function qu(e,t,i,s){ja?Ea?Ea.push(s):Ea=[s]:ja=s,t=Cr(t,"onChange"),0<t.length&&(i=new Hs("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Dn=null,On=null;function uy(e){pf(e,0)}function Ws(e){var t=kn(e);if(gu(t))return e}function Bu(e,t){if(e==="change")return t}var Mu=!1;if(Zt){var Do;if(Zt){var Oo="oninput"in document;if(!Oo){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),Oo=typeof Nu.oninput=="function"}Do=Oo}else Do=!1;Mu=Do&&(!document.documentMode||9<document.documentMode)}function Uu(){Dn&&(Dn.detachEvent("onpropertychange",Lu),On=Dn=null)}function Lu(e){if(e.propertyName==="value"&&Ws(On)){var t=[];qu(t,On,e,So(e)),Su(uy,t)}}function dy(e,t,i){e==="focusin"?(Uu(),Dn=t,On=i,Dn.attachEvent("onpropertychange",Lu)):e==="focusout"&&Uu()}function hy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(On)}function fy(e,t){if(e==="click")return Ws(t)}function my(e,t){if(e==="input"||e==="change")return Ws(t)}function gy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:gy;function zn(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var l=i[s];if(!lo.call(t,l)||!xt(e[l],t[l]))return!1}return!0}function Hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Iu(e,t){var i=Hu(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Hu(i)}}function Wu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Bs(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Bs(e.document)}return t}function zo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var yy=Zt&&"documentMode"in document&&11>=document.documentMode,Ca=null,qo=null,qn=null,Bo=!1;function Vu(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Bo||Ca==null||Ca!==Bs(s)||(s=Ca,"selectionStart"in s&&zo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),qn&&zn(qn,s)||(qn=s,s=Cr(qo,"onSelect"),0<s.length&&(t=new Hs("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Ca)))}function Xi(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Da={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Mo={},$u={};Zt&&($u=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Ji(e){if(Mo[e])return Mo[e];if(!Da[e])return e;var t=Da[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in $u)return Mo[e]=t[i];return e}var Fu=Ji("animationend"),Pu=Ji("animationiteration"),Qu=Ji("animationstart"),py=Ji("transitionrun"),vy=Ji("transitionstart"),by=Ji("transitioncancel"),Yu=Ji("transitionend"),Ku=new Map,No="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");No.push("scrollEnd");function It(e,t){Ku.set(e,t),Yi(t,[e])}var Gs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zt=[],Oa=0,Uo=0;function Vs(){for(var e=Oa,t=Uo=Oa=0;t<e;){var i=zt[t];zt[t++]=null;var s=zt[t];zt[t++]=null;var l=zt[t];zt[t++]=null;var c=zt[t];if(zt[t++]=null,s!==null&&l!==null){var m=s.pending;m===null?l.next=l:(l.next=m.next,m.next=l),s.pending=l}c!==0&&Xu(i,l,c)}}function $s(e,t,i,s){zt[Oa++]=e,zt[Oa++]=t,zt[Oa++]=i,zt[Oa++]=s,Uo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Lo(e,t,i,s){return $s(e,t,i,s),Fs(e)}function Zi(e,t){return $s(e,null,null,t),Fs(e)}function Xu(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var l=!1,c=e.return;c!==null;)c.childLanes|=i,s=c.alternate,s!==null&&(s.childLanes|=i),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(l=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,l&&t!==null&&(l=31-wt(i),e=c.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=i|536870912),c):null}function Fs(e){if(50<is)throw is=0,Ql=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var za={};function wy(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,i,s){return new wy(e,t,i,s)}function Ho(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ei(e,t){var i=e.alternate;return i===null?(i=St(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Ju(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ps(e,t,i,s,l,c){var m=0;if(s=e,typeof e=="function")Ho(e)&&(m=1);else if(typeof e=="string")m=kp(e,i,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ne:return e=St(31,i,t,l),e.elementType=Ne,e.lanes=c,e;case H:return ea(i.children,l,c,t);case q:m=8,l|=24;break;case I:return e=St(12,i,t,l|2),e.elementType=I,e.lanes=c,e;case Z:return e=St(13,i,t,l),e.elementType=Z,e.lanes=c,e;case X:return e=St(19,i,t,l),e.elementType=X,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:m=10;break e;case O:m=9;break e;case $:m=11;break e;case Q:m=14;break e;case Oe:m=16,s=null;break e}m=29,i=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=St(m,i,t,l),t.elementType=e,t.type=s,t.lanes=c,t}function ea(e,t,i,s){return e=St(7,e,s,t),e.lanes=i,e}function Io(e,t,i){return e=St(6,e,null,t),e.lanes=i,e}function Zu(e){var t=St(18,null,null,0);return t.stateNode=e,t}function Wo(e,t,i){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ed=new WeakMap;function qt(e,t){if(typeof e=="object"&&e!==null){var i=ed.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Zc(t)},ed.set(e,t),t)}return{value:e,source:t,stack:Zc(t)}}var qa=[],Ba=0,Qs=null,Bn=0,Bt=[],Mt=0,_i=null,Pt=1,Qt="";function ti(e,t){qa[Ba++]=Bn,qa[Ba++]=Qs,Qs=e,Bn=t}function td(e,t,i){Bt[Mt++]=Pt,Bt[Mt++]=Qt,Bt[Mt++]=_i,_i=e;var s=Pt;e=Qt;var l=32-wt(s)-1;s&=~(1<<l),i+=1;var c=32-wt(t)+l;if(30<c){var m=l-l%5;c=(s&(1<<m)-1).toString(32),s>>=m,l-=m,Pt=1<<32-wt(t)+l|i<<l|s,Qt=c+e}else Pt=1<<c|i<<l|s,Qt=e}function Go(e){e.return!==null&&(ti(e,1),td(e,1,0))}function Vo(e){for(;e===Qs;)Qs=qa[--Ba],qa[Ba]=null,Bn=qa[--Ba],qa[Ba]=null;for(;e===_i;)_i=Bt[--Mt],Bt[Mt]=null,Qt=Bt[--Mt],Bt[Mt]=null,Pt=Bt[--Mt],Bt[Mt]=null}function id(e,t){Bt[Mt++]=Pt,Bt[Mt++]=Qt,Bt[Mt++]=_i,Pt=t.id,Qt=t.overflow,_i=e}var it=null,ze=null,pe=!1,Ti=null,Nt=!1,$o=Error(o(519));function ki(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mn(qt(t,e)),$o}function ad(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[tt]=e,t[dt]=s,i){case"dialog":fe("cancel",t),fe("close",t);break;case"iframe":case"object":case"embed":fe("load",t);break;case"video":case"audio":for(i=0;i<ns.length;i++)fe(ns[i],t);break;case"source":fe("error",t);break;case"img":case"image":case"link":fe("error",t),fe("load",t);break;case"details":fe("toggle",t);break;case"input":fe("invalid",t),yu(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":fe("invalid",t);break;case"textarea":fe("invalid",t),vu(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||xf(t.textContent,i)?(s.popover!=null&&(fe("beforetoggle",t),fe("toggle",t)),s.onScroll!=null&&fe("scroll",t),s.onScrollEnd!=null&&fe("scrollend",t),s.onClick!=null&&(t.onclick=Jt),t=!0):t=!1,t||ki(e,!0)}function nd(e){for(it=e.return;it;)switch(it.tag){case 5:case 31:case 13:Nt=!1;return;case 27:case 3:Nt=!0;return;default:it=it.return}}function Ma(e){if(e!==it)return!1;if(!pe)return nd(e),pe=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||cc(e.type,e.memoizedProps)),i=!i),i&&ze&&ki(e),nd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));ze=Cf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));ze=Cf(e)}else t===27?(t=ze,Li(e.type)?(e=mc,mc=null,ze=e):ze=t):ze=it?Lt(e.stateNode.nextSibling):null;return!0}function ta(){ze=it=null,pe=!1}function Fo(){var e=Ti;return e!==null&&(yt===null?yt=e:yt.push.apply(yt,e),Ti=null),e}function Mn(e){Ti===null?Ti=[e]:Ti.push(e)}var Po=S(null),ia=null,ii=null;function Ai(e,t,i){V(Po,t._currentValue),t._currentValue=i}function ai(e){e._currentValue=Po.current,L(Po)}function Qo(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Yo(e,t,i,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){var m=l.child;c=c.firstContext;e:for(;c!==null;){var v=c;c=l;for(var w=0;w<t.length;w++)if(v.context===t[w]){c.lanes|=i,v=c.alternate,v!==null&&(v.lanes|=i),Qo(c.return,i,e),s||(m=null);break e}c=v.next}}else if(l.tag===18){if(m=l.return,m===null)throw Error(o(341));m.lanes|=i,c=m.alternate,c!==null&&(c.lanes|=i),Qo(m,i,e),m=null}else m=l.child;if(m!==null)m.return=l;else for(m=l;m!==null;){if(m===e){m=null;break}if(l=m.sibling,l!==null){l.return=m.return,m=l;break}m=m.return}l=m}}function Na(e,t,i,s){e=null;for(var l=t,c=!1;l!==null;){if(!c){if((l.flags&524288)!==0)c=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var m=l.alternate;if(m===null)throw Error(o(387));if(m=m.memoizedProps,m!==null){var v=l.type;xt(l.pendingProps.value,m.value)||(e!==null?e.push(v):e=[v])}}else if(l===_e.current){if(m=l.alternate,m===null)throw Error(o(387));m.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(cs):e=[cs])}l=l.return}e!==null&&Yo(t,e,i,s),t.flags|=262144}function Ys(e){for(e=e.firstContext;e!==null;){if(!xt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function aa(e){ia=e,ii=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return sd(ia,e)}function Ks(e,t){return ia===null&&aa(e),sd(e,t)}function sd(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},ii===null){if(e===null)throw Error(o(308));ii=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ii=ii.next=t;return i}var xy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Sy=n.unstable_scheduleCallback,_y=n.unstable_NormalPriority,Ve={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ko(){return{controller:new xy,data:new Map,refCount:0}}function Nn(e){e.refCount--,e.refCount===0&&Sy(_y,function(){e.controller.abort()})}var Un=null,Xo=0,Ua=0,La=null;function Ty(e,t){if(Un===null){var i=Un=[];Xo=0,Ua=ec(),La={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Xo++,t.then(rd,rd),t}function rd(){if(--Xo===0&&Un!==null){La!==null&&(La.status="fulfilled");var e=Un;Un=null,Ua=0,La=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ky(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(l){i.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<i.length;l++)(0,i[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<i.length;l++)(0,i[l])(void 0)}),s}var od=D.S;D.S=function(e,t){Vh=vt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Ty(e,t),od!==null&&od(e,t)};var na=S(null);function Jo(){var e=na.current;return e!==null?e:Re.pooledCache}function Xs(e,t){t===null?V(na,na.current):V(na,t.pool)}function ld(){var e=Jo();return e===null?null:{parent:Ve._currentValue,pool:e}}var Ha=Error(o(460)),Zo=Error(o(474)),Js=Error(o(542)),Zs={then:function(){}};function cd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ud(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Jt,Jt),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,hd(e),e;default:if(typeof t.status=="string")t.then(Jt,Jt);else{if(e=Re,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,hd(e),e}throw ra=t,Ha}}function sa(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(ra=i,Ha):i}}var ra=null;function dd(){if(ra===null)throw Error(o(459));var e=ra;return ra=null,e}function hd(e){if(e===Ha||e===Js)throw Error(o(483))}var Ia=null,Ln=0;function er(e){var t=Ln;return Ln+=1,Ia===null&&(Ia=[]),ud(Ia,e,t)}function Hn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function tr(e,t){throw t.$$typeof===x?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fd(e){function t(A,_){if(e){var j=A.deletions;j===null?(A.deletions=[_],A.flags|=16):j.push(_)}}function i(A,_){if(!e)return null;for(;_!==null;)t(A,_),_=_.sibling;return null}function s(A){for(var _=new Map;A!==null;)A.key!==null?_.set(A.key,A):_.set(A.index,A),A=A.sibling;return _}function l(A,_){return A=ei(A,_),A.index=0,A.sibling=null,A}function c(A,_,j){return A.index=j,e?(j=A.alternate,j!==null?(j=j.index,j<_?(A.flags|=67108866,_):j):(A.flags|=67108866,_)):(A.flags|=1048576,_)}function m(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function v(A,_,j,N){return _===null||_.tag!==6?(_=Io(j,A.mode,N),_.return=A,_):(_=l(_,j),_.return=A,_)}function w(A,_,j,N){var te=j.type;return te===H?B(A,_,j.props.children,N,j.key):_!==null&&(_.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Oe&&sa(te)===_.type)?(_=l(_,j.props),Hn(_,j),_.return=A,_):(_=Ps(j.type,j.key,j.props,null,A.mode,N),Hn(_,j),_.return=A,_)}function E(A,_,j,N){return _===null||_.tag!==4||_.stateNode.containerInfo!==j.containerInfo||_.stateNode.implementation!==j.implementation?(_=Wo(j,A.mode,N),_.return=A,_):(_=l(_,j.children||[]),_.return=A,_)}function B(A,_,j,N,te){return _===null||_.tag!==7?(_=ea(j,A.mode,N,te),_.return=A,_):(_=l(_,j),_.return=A,_)}function U(A,_,j){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=Io(""+_,A.mode,j),_.return=A,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case k:return j=Ps(_.type,_.key,_.props,null,A.mode,j),Hn(j,_),j.return=A,j;case z:return _=Wo(_,A.mode,j),_.return=A,_;case Oe:return _=sa(_),U(A,_,j)}if(me(_)||Y(_))return _=ea(_,A.mode,j,null),_.return=A,_;if(typeof _.then=="function")return U(A,er(_),j);if(_.$$typeof===M)return U(A,Ks(A,_),j);tr(A,_)}return null}function R(A,_,j,N){var te=_!==null?_.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return te!==null?null:v(A,_,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return j.key===te?w(A,_,j,N):null;case z:return j.key===te?E(A,_,j,N):null;case Oe:return j=sa(j),R(A,_,j,N)}if(me(j)||Y(j))return te!==null?null:B(A,_,j,N,null);if(typeof j.then=="function")return R(A,_,er(j),N);if(j.$$typeof===M)return R(A,_,Ks(A,j),N);tr(A,j)}return null}function C(A,_,j,N,te){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return A=A.get(j)||null,v(_,A,""+N,te);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case k:return A=A.get(N.key===null?j:N.key)||null,w(_,A,N,te);case z:return A=A.get(N.key===null?j:N.key)||null,E(_,A,N,te);case Oe:return N=sa(N),C(A,_,j,N,te)}if(me(N)||Y(N))return A=A.get(j)||null,B(_,A,N,te,null);if(typeof N.then=="function")return C(A,_,j,er(N),te);if(N.$$typeof===M)return C(A,_,j,Ks(_,N),te);tr(_,N)}return null}function F(A,_,j,N){for(var te=null,we=null,K=_,ce=_=0,ye=null;K!==null&&ce<j.length;ce++){K.index>ce?(ye=K,K=null):ye=K.sibling;var xe=R(A,K,j[ce],N);if(xe===null){K===null&&(K=ye);break}e&&K&&xe.alternate===null&&t(A,K),_=c(xe,_,ce),we===null?te=xe:we.sibling=xe,we=xe,K=ye}if(ce===j.length)return i(A,K),pe&&ti(A,ce),te;if(K===null){for(;ce<j.length;ce++)K=U(A,j[ce],N),K!==null&&(_=c(K,_,ce),we===null?te=K:we.sibling=K,we=K);return pe&&ti(A,ce),te}for(K=s(K);ce<j.length;ce++)ye=C(K,A,ce,j[ce],N),ye!==null&&(e&&ye.alternate!==null&&K.delete(ye.key===null?ce:ye.key),_=c(ye,_,ce),we===null?te=ye:we.sibling=ye,we=ye);return e&&K.forEach(function(Vi){return t(A,Vi)}),pe&&ti(A,ce),te}function ie(A,_,j,N){if(j==null)throw Error(o(151));for(var te=null,we=null,K=_,ce=_=0,ye=null,xe=j.next();K!==null&&!xe.done;ce++,xe=j.next()){K.index>ce?(ye=K,K=null):ye=K.sibling;var Vi=R(A,K,xe.value,N);if(Vi===null){K===null&&(K=ye);break}e&&K&&Vi.alternate===null&&t(A,K),_=c(Vi,_,ce),we===null?te=Vi:we.sibling=Vi,we=Vi,K=ye}if(xe.done)return i(A,K),pe&&ti(A,ce),te;if(K===null){for(;!xe.done;ce++,xe=j.next())xe=U(A,xe.value,N),xe!==null&&(_=c(xe,_,ce),we===null?te=xe:we.sibling=xe,we=xe);return pe&&ti(A,ce),te}for(K=s(K);!xe.done;ce++,xe=j.next())xe=C(K,A,ce,xe.value,N),xe!==null&&(e&&xe.alternate!==null&&K.delete(xe.key===null?ce:xe.key),_=c(xe,_,ce),we===null?te=xe:we.sibling=xe,we=xe);return e&&K.forEach(function(Mp){return t(A,Mp)}),pe&&ti(A,ce),te}function Ee(A,_,j,N){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case k:e:{for(var te=j.key;_!==null;){if(_.key===te){if(te=j.type,te===H){if(_.tag===7){i(A,_.sibling),N=l(_,j.props.children),N.return=A,A=N;break e}}else if(_.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Oe&&sa(te)===_.type){i(A,_.sibling),N=l(_,j.props),Hn(N,j),N.return=A,A=N;break e}i(A,_);break}else t(A,_);_=_.sibling}j.type===H?(N=ea(j.props.children,A.mode,N,j.key),N.return=A,A=N):(N=Ps(j.type,j.key,j.props,null,A.mode,N),Hn(N,j),N.return=A,A=N)}return m(A);case z:e:{for(te=j.key;_!==null;){if(_.key===te)if(_.tag===4&&_.stateNode.containerInfo===j.containerInfo&&_.stateNode.implementation===j.implementation){i(A,_.sibling),N=l(_,j.children||[]),N.return=A,A=N;break e}else{i(A,_);break}else t(A,_);_=_.sibling}N=Wo(j,A.mode,N),N.return=A,A=N}return m(A);case Oe:return j=sa(j),Ee(A,_,j,N)}if(me(j))return F(A,_,j,N);if(Y(j)){if(te=Y(j),typeof te!="function")throw Error(o(150));return j=te.call(j),ie(A,_,j,N)}if(typeof j.then=="function")return Ee(A,_,er(j),N);if(j.$$typeof===M)return Ee(A,_,Ks(A,j),N);tr(A,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,_!==null&&_.tag===6?(i(A,_.sibling),N=l(_,j),N.return=A,A=N):(i(A,_),N=Io(j,A.mode,N),N.return=A,A=N),m(A)):i(A,_)}return function(A,_,j,N){try{Ln=0;var te=Ee(A,_,j,N);return Ia=null,te}catch(K){if(K===Ha||K===Js)throw K;var we=St(29,K,null,A.mode);return we.lanes=N,we.return=A,we}}}var oa=fd(!0),md=fd(!1),ji=!1;function el(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Se&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=Fs(e),Xu(e,null,i),t}return $s(e,s,t,i),Fs(e)}function In(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,su(e,i)}}function il(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var l=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var m={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};c===null?l=c=m:c=c.next=m,i=i.next}while(i!==null);c===null?l=c=t:c=c.next=t}else l=c=t;i={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var al=!1;function Wn(){if(al){var e=La;if(e!==null)throw e}}function Gn(e,t,i,s){al=!1;var l=e.updateQueue;ji=!1;var c=l.firstBaseUpdate,m=l.lastBaseUpdate,v=l.shared.pending;if(v!==null){l.shared.pending=null;var w=v,E=w.next;w.next=null,m===null?c=E:m.next=E,m=w;var B=e.alternate;B!==null&&(B=B.updateQueue,v=B.lastBaseUpdate,v!==m&&(v===null?B.firstBaseUpdate=E:v.next=E,B.lastBaseUpdate=w))}if(c!==null){var U=l.baseState;m=0,B=E=w=null,v=c;do{var R=v.lane&-536870913,C=R!==v.lane;if(C?(ge&R)===R:(s&R)===R){R!==0&&R===Ua&&(al=!0),B!==null&&(B=B.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var F=e,ie=v;R=t;var Ee=i;switch(ie.tag){case 1:if(F=ie.payload,typeof F=="function"){U=F.call(Ee,U,R);break e}U=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=ie.payload,R=typeof F=="function"?F.call(Ee,U,R):F,R==null)break e;U=T({},U,R);break e;case 2:ji=!0}}R=v.callback,R!==null&&(e.flags|=64,C&&(e.flags|=8192),C=l.callbacks,C===null?l.callbacks=[R]:C.push(R))}else C={lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},B===null?(E=B=C,w=U):B=B.next=C,m|=R;if(v=v.next,v===null){if(v=l.shared.pending,v===null)break;C=v,v=C.next,C.next=null,l.lastBaseUpdate=C,l.shared.pending=null}}while(!0);B===null&&(w=U),l.baseState=w,l.firstBaseUpdate=E,l.lastBaseUpdate=B,c===null&&(l.shared.lanes=0),qi|=m,e.lanes=m,e.memoizedState=U}}function gd(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function yd(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)gd(i[e],t)}var Wa=S(null),ir=S(0);function pd(e,t){e=hi,V(ir,e),V(Wa,t),hi=e|t.baseLanes}function nl(){V(ir,hi),V(Wa,Wa.current)}function sl(){hi=ir.current,L(Wa),L(ir)}var _t=S(null),Ut=null;function Ci(e){var t=e.alternate;V(We,We.current&1),V(_t,e),Ut===null&&(t===null||Wa.current!==null||t.memoizedState!==null)&&(Ut=e)}function rl(e){V(We,We.current),V(_t,e),Ut===null&&(Ut=e)}function vd(e){e.tag===22?(V(We,We.current),V(_t,e),Ut===null&&(Ut=e)):Di()}function Di(){V(We,We.current),V(_t,_t.current)}function Tt(e){L(_t),Ut===e&&(Ut=null),L(We)}var We=S(0);function ar(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||hc(i)||fc(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=0,le=null,Ae=null,$e=null,nr=!1,Ga=!1,la=!1,sr=0,Vn=0,Va=null,Ay=0;function Ue(){throw Error(o(321))}function ol(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!xt(e[i],t[i]))return!1;return!0}function ll(e,t,i,s,l,c){return ni=c,le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=e===null||e.memoizedState===null?th:_l,la=!1,c=i(s,l),la=!1,Ga&&(c=wd(t,i,s,l)),bd(e),c}function bd(e){D.H=Pn;var t=Ae!==null&&Ae.next!==null;if(ni=0,$e=Ae=le=null,nr=!1,Vn=0,Va=null,t)throw Error(o(300));e===null||Fe||(e=e.dependencies,e!==null&&Ys(e)&&(Fe=!0))}function wd(e,t,i,s){le=e;var l=0;do{if(Ga&&(Va=null),Vn=0,Ga=!1,25<=l)throw Error(o(301));if(l+=1,$e=Ae=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}D.H=ih,c=t(i,s)}while(Ga);return c}function jy(){var e=D.H,t=e.useState()[0];return t=typeof t.then=="function"?$n(t):t,e=e.useState()[0],(Ae!==null?Ae.memoizedState:null)!==e&&(le.flags|=1024),t}function cl(){var e=sr!==0;return sr=0,e}function ul(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function dl(e){if(nr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}nr=!1}ni=0,$e=Ae=le=null,Ga=!1,Vn=sr=0,Va=null}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?le.memoizedState=$e=e:$e=$e.next=e,$e}function Ge(){if(Ae===null){var e=le.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=$e===null?le.memoizedState:$e.next;if(t!==null)$e=t,Ae=e;else{if(e===null)throw le.alternate===null?Error(o(467)):Error(o(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},$e===null?le.memoizedState=$e=e:$e=$e.next=e}return $e}function rr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $n(e){var t=Vn;return Vn+=1,Va===null&&(Va=[]),e=ud(Va,e,t),t=le,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,D.H=t===null||t.memoizedState===null?th:_l),e}function or(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $n(e);if(e.$$typeof===M)return at(e)}throw Error(o(438,String(e)))}function hl(e){var t=null,i=le.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=le.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=rr(),le.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=bi;return t.index++,i}function si(e,t){return typeof t=="function"?t(e):t}function lr(e){var t=Ge();return fl(t,Ae,e)}function fl(e,t,i){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=i;var l=e.baseQueue,c=s.pending;if(c!==null){if(l!==null){var m=l.next;l.next=c.next,c.next=m}t.baseQueue=l=c,s.pending=null}if(c=e.baseState,l===null)e.memoizedState=c;else{t=l.next;var v=m=null,w=null,E=t,B=!1;do{var U=E.lane&-536870913;if(U!==E.lane?(ge&U)===U:(ni&U)===U){var R=E.revertLane;if(R===0)w!==null&&(w=w.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),U===Ua&&(B=!0);else if((ni&R)===R){E=E.next,R===Ua&&(B=!0);continue}else U={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},w===null?(v=w=U,m=c):w=w.next=U,le.lanes|=R,qi|=R;U=E.action,la&&i(c,U),c=E.hasEagerState?E.eagerState:i(c,U)}else R={lane:U,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},w===null?(v=w=R,m=c):w=w.next=R,le.lanes|=U,qi|=U;E=E.next}while(E!==null&&E!==t);if(w===null?m=c:w.next=v,!xt(c,e.memoizedState)&&(Fe=!0,B&&(i=La,i!==null)))throw i;e.memoizedState=c,e.baseState=m,e.baseQueue=w,s.lastRenderedState=c}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function ml(e){var t=Ge(),i=t.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,l=i.pending,c=t.memoizedState;if(l!==null){i.pending=null;var m=l=l.next;do c=e(c,m.action),m=m.next;while(m!==l);xt(c,t.memoizedState)||(Fe=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),i.lastRenderedState=c}return[c,s]}function xd(e,t,i){var s=le,l=Ge(),c=pe;if(c){if(i===void 0)throw Error(o(407));i=i()}else i=t();var m=!xt((Ae||l).memoizedState,i);if(m&&(l.memoizedState=i,Fe=!0),l=l.queue,pl(Td.bind(null,s,l,e),[e]),l.getSnapshot!==t||m||$e!==null&&$e.memoizedState.tag&1){if(s.flags|=2048,$a(9,{destroy:void 0},_d.bind(null,s,l,i,t),null),Re===null)throw Error(o(349));c||(ni&127)!==0||Sd(s,t,i)}return i}function Sd(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=le.updateQueue,t===null?(t=rr(),le.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function _d(e,t,i,s){t.value=i,t.getSnapshot=s,kd(t)&&Ad(e)}function Td(e,t,i){return i(function(){kd(t)&&Ad(e)})}function kd(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!xt(e,i)}catch{return!0}}function Ad(e){var t=Zi(e,2);t!==null&&pt(t,e,2)}function gl(e){var t=ut();if(typeof e=="function"){var i=e;if(e=i(),la){wi(!0);try{i()}finally{wi(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:e},t}function jd(e,t,i,s){return e.baseState=i,fl(e,Ae,typeof s=="function"?s:si)}function Ey(e,t,i,s,l){if(dr(e))throw Error(o(485));if(e=t.action,e!==null){var c={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){c.listeners.push(m)}};D.T!==null?i(!0):c.isTransition=!1,s(c),i=t.pending,i===null?(c.next=t.pending=c,Ed(t,c)):(c.next=i.next,t.pending=i.next=c)}}function Ed(e,t){var i=t.action,s=t.payload,l=e.state;if(t.isTransition){var c=D.T,m={};D.T=m;try{var v=i(l,s),w=D.S;w!==null&&w(m,v),Rd(e,t,v)}catch(E){yl(e,t,E)}finally{c!==null&&m.types!==null&&(c.types=m.types),D.T=c}}else try{c=i(l,s),Rd(e,t,c)}catch(E){yl(e,t,E)}}function Rd(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Cd(e,t,s)},function(s){return yl(e,t,s)}):Cd(e,t,i)}function Cd(e,t,i){t.status="fulfilled",t.value=i,Dd(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Ed(e,i)))}function yl(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,Dd(t),t=t.next;while(t!==s)}e.action=null}function Dd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Od(e,t){return t}function zd(e,t){if(pe){var i=Re.formState;if(i!==null){e:{var s=le;if(pe){if(ze){t:{for(var l=ze,c=Nt;l.nodeType!==8;){if(!c){l=null;break t}if(l=Lt(l.nextSibling),l===null){l=null;break t}}c=l.data,l=c==="F!"||c==="F"?l:null}if(l){ze=Lt(l.nextSibling),s=l.data==="F!";break e}}ki(s)}s=!1}s&&(t=i[0])}}return i=ut(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Od,lastRenderedState:t},i.queue=s,i=Jd.bind(null,le,s),s.dispatch=i,s=gl(!1),c=Sl.bind(null,le,!1,s.queue),s=ut(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,i=Ey.bind(null,le,l,c,i),l.dispatch=i,s.memoizedState=e,[t,i,!1]}function qd(e){var t=Ge();return Bd(t,Ae,e)}function Bd(e,t,i){if(t=fl(e,t,Od)[0],e=lr(si)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=$n(t)}catch(m){throw m===Ha?Js:m}else s=t;t=Ge();var l=t.queue,c=l.dispatch;return i!==t.memoizedState&&(le.flags|=2048,$a(9,{destroy:void 0},Ry.bind(null,l,i),null)),[s,c,e]}function Ry(e,t){e.action=t}function Md(e){var t=Ge(),i=Ae;if(i!==null)return Bd(t,i,e);Ge(),t=t.memoizedState,i=Ge();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function $a(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=le.updateQueue,t===null&&(t=rr(),le.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Nd(){return Ge().memoizedState}function cr(e,t,i,s){var l=ut();le.flags|=e,l.memoizedState=$a(1|t,{destroy:void 0},i,s===void 0?null:s)}function ur(e,t,i,s){var l=Ge();s=s===void 0?null:s;var c=l.memoizedState.inst;Ae!==null&&s!==null&&ol(s,Ae.memoizedState.deps)?l.memoizedState=$a(t,c,i,s):(le.flags|=e,l.memoizedState=$a(1|t,c,i,s))}function Ud(e,t){cr(8390656,8,e,t)}function pl(e,t){ur(2048,8,e,t)}function Cy(e){le.flags|=4;var t=le.updateQueue;if(t===null)t=rr(),le.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function Ld(e){var t=Ge().memoizedState;return Cy({ref:t,nextImpl:e}),function(){if((Se&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Hd(e,t){return ur(4,2,e,t)}function Id(e,t){return ur(4,4,e,t)}function Wd(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gd(e,t,i){i=i!=null?i.concat([e]):null,ur(4,4,Wd.bind(null,t,e),i)}function vl(){}function Vd(e,t){var i=Ge();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&ol(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function $d(e,t){var i=Ge();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&ol(t,s[1]))return s[0];if(s=e(),la){wi(!0);try{e()}finally{wi(!1)}}return i.memoizedState=[s,t],s}function bl(e,t,i){return i===void 0||(ni&1073741824)!==0&&(ge&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=Fh(),le.lanes|=e,qi|=e,i)}function Fd(e,t,i,s){return xt(i,t)?i:Wa.current!==null?(e=bl(e,i,s),xt(e,t)||(Fe=!0),e):(ni&42)===0||(ni&1073741824)!==0&&(ge&261930)===0?(Fe=!0,e.memoizedState=i):(e=Fh(),le.lanes|=e,qi|=e,t)}function Pd(e,t,i,s,l){var c=W.p;W.p=c!==0&&8>c?c:8;var m=D.T,v={};D.T=v,Sl(e,!1,t,i);try{var w=l(),E=D.S;if(E!==null&&E(v,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var B=ky(w,s);Fn(e,t,B,jt(e))}else Fn(e,t,s,jt(e))}catch(U){Fn(e,t,{then:function(){},status:"rejected",reason:U},jt())}finally{W.p=c,m!==null&&v.types!==null&&(m.types=v.types),D.T=m}}function Dy(){}function wl(e,t,i,s){if(e.tag!==5)throw Error(o(476));var l=Qd(e).queue;Pd(e,l,t,G,i===null?Dy:function(){return Yd(e),i(s)})}function Qd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:G},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Yd(e){var t=Qd(e);t.next===null&&(t=e.alternate.memoizedState),Fn(e,t.next.queue,{},jt())}function xl(){return at(cs)}function Kd(){return Ge().memoizedState}function Xd(){return Ge().memoizedState}function Oy(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=jt();e=Ei(i);var s=Ri(t,e,i);s!==null&&(pt(s,t,i),In(s,t,i)),t={cache:Ko()},e.payload=t;return}t=t.return}}function zy(e,t,i){var s=jt();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},dr(e)?Zd(t,i):(i=Lo(e,t,i,s),i!==null&&(pt(i,e,s),eh(i,t,s)))}function Jd(e,t,i){var s=jt();Fn(e,t,i,s)}function Fn(e,t,i,s){var l={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(dr(e))Zd(t,l);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var m=t.lastRenderedState,v=c(m,i);if(l.hasEagerState=!0,l.eagerState=v,xt(v,m))return $s(e,t,l,0),Re===null&&Vs(),!1}catch{}if(i=Lo(e,t,l,s),i!==null)return pt(i,e,s),eh(i,t,s),!0}return!1}function Sl(e,t,i,s){if(s={lane:2,revertLane:ec(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},dr(e)){if(t)throw Error(o(479))}else t=Lo(e,i,s,2),t!==null&&pt(t,e,2)}function dr(e){var t=e.alternate;return e===le||t!==null&&t===le}function Zd(e,t){Ga=nr=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function eh(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,su(e,i)}}var Pn={readContext:at,use:or,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};Pn.useEffectEvent=Ue;var th={readContext:at,use:or,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:Ud,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,cr(4194308,4,Wd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return cr(4194308,4,e,t)},useInsertionEffect:function(e,t){cr(4,2,e,t)},useMemo:function(e,t){var i=ut();t=t===void 0?null:t;var s=e();if(la){wi(!0);try{e()}finally{wi(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=ut();if(i!==void 0){var l=i(t);if(la){wi(!0);try{i(t)}finally{wi(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=zy.bind(null,le,e),[s.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:function(e){e=gl(e);var t=e.queue,i=Jd.bind(null,le,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:vl,useDeferredValue:function(e,t){var i=ut();return bl(i,e,t)},useTransition:function(){var e=gl(!1);return e=Pd.bind(null,le,e.queue,!0,!1),ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=le,l=ut();if(pe){if(i===void 0)throw Error(o(407));i=i()}else{if(i=t(),Re===null)throw Error(o(349));(ge&127)!==0||Sd(s,t,i)}l.memoizedState=i;var c={value:i,getSnapshot:t};return l.queue=c,Ud(Td.bind(null,s,c,e),[e]),s.flags|=2048,$a(9,{destroy:void 0},_d.bind(null,s,c,i,t),null),i},useId:function(){var e=ut(),t=Re.identifierPrefix;if(pe){var i=Qt,s=Pt;i=(s&~(1<<32-wt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=sr++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Ay++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:xl,useFormState:zd,useActionState:zd,useOptimistic:function(e){var t=ut();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Sl.bind(null,le,!0,i),i.dispatch=t,[e,t]},useMemoCache:hl,useCacheRefresh:function(){return ut().memoizedState=Oy.bind(null,le)},useEffectEvent:function(e){var t=ut(),i={impl:e};return t.memoizedState=i,function(){if((Se&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}},_l={readContext:at,use:or,useCallback:Vd,useContext:at,useEffect:pl,useImperativeHandle:Gd,useInsertionEffect:Hd,useLayoutEffect:Id,useMemo:$d,useReducer:lr,useRef:Nd,useState:function(){return lr(si)},useDebugValue:vl,useDeferredValue:function(e,t){var i=Ge();return Fd(i,Ae.memoizedState,e,t)},useTransition:function(){var e=lr(si)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:$n(e),t]},useSyncExternalStore:xd,useId:Kd,useHostTransitionStatus:xl,useFormState:qd,useActionState:qd,useOptimistic:function(e,t){var i=Ge();return jd(i,Ae,e,t)},useMemoCache:hl,useCacheRefresh:Xd};_l.useEffectEvent=Ld;var ih={readContext:at,use:or,useCallback:Vd,useContext:at,useEffect:pl,useImperativeHandle:Gd,useInsertionEffect:Hd,useLayoutEffect:Id,useMemo:$d,useReducer:ml,useRef:Nd,useState:function(){return ml(si)},useDebugValue:vl,useDeferredValue:function(e,t){var i=Ge();return Ae===null?bl(i,e,t):Fd(i,Ae.memoizedState,e,t)},useTransition:function(){var e=ml(si)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:$n(e),t]},useSyncExternalStore:xd,useId:Kd,useHostTransitionStatus:xl,useFormState:Md,useActionState:Md,useOptimistic:function(e,t){var i=Ge();return Ae!==null?jd(i,Ae,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:hl,useCacheRefresh:Xd};ih.useEffectEvent=Ld;function Tl(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:T({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var kl={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=jt(),l=Ei(s);l.payload=t,i!=null&&(l.callback=i),t=Ri(e,l,s),t!==null&&(pt(t,e,s),In(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=jt(),l=Ei(s);l.tag=1,l.payload=t,i!=null&&(l.callback=i),t=Ri(e,l,s),t!==null&&(pt(t,e,s),In(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=jt(),s=Ei(i);s.tag=2,t!=null&&(s.callback=t),t=Ri(e,s,i),t!==null&&(pt(t,e,i),In(t,e,i))}};function ah(e,t,i,s,l,c,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,m):t.prototype&&t.prototype.isPureReactComponent?!zn(i,s)||!zn(l,c):!0}function nh(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&kl.enqueueReplaceState(t,t.state,null)}function ca(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=T({},i));for(var l in e)i[l]===void 0&&(i[l]=e[l])}return i}function sh(e){Gs(e)}function rh(e){console.error(e)}function oh(e){Gs(e)}function hr(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function lh(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Al(e,t,i){return i=Ei(i),i.tag=3,i.payload={element:null},i.callback=function(){hr(e,t)},i}function ch(e){return e=Ei(e),e.tag=3,e}function uh(e,t,i,s){var l=i.type.getDerivedStateFromError;if(typeof l=="function"){var c=s.value;e.payload=function(){return l(c)},e.callback=function(){lh(t,i,s)}}var m=i.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){lh(t,i,s),typeof l!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})})}function qy(e,t,i,s,l){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&Na(t,i,l,!0),i=_t.current,i!==null){switch(i.tag){case 31:case 13:return Ut===null?Tr():i.alternate===null&&Le===0&&(Le=3),i.flags&=-257,i.flags|=65536,i.lanes=l,s===Zs?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),Xl(e,s,l)),!1;case 22:return i.flags|=65536,s===Zs?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),Xl(e,s,l)),!1}throw Error(o(435,i.tag))}return Xl(e,s,l),Tr(),!1}if(pe)return t=_t.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==$o&&(e=Error(o(422),{cause:s}),Mn(qt(e,i)))):(s!==$o&&(t=Error(o(423),{cause:s}),Mn(qt(t,i))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=qt(s,i),l=Al(e.stateNode,s,l),il(e,l),Le!==4&&(Le=2)),!1;var c=Error(o(520),{cause:s});if(c=qt(c,i),ts===null?ts=[c]:ts.push(c),Le!==4&&(Le=2),t===null)return!0;s=qt(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=l&-l,i.lanes|=e,e=Al(i.stateNode,s,e),il(i,e),!1;case 1:if(t=i.type,c=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Bi===null||!Bi.has(c))))return i.flags|=65536,l&=-l,i.lanes|=l,l=ch(l),uh(l,e,i,s),il(i,l),!1}i=i.return}while(i!==null);return!1}var jl=Error(o(461)),Fe=!1;function nt(e,t,i,s){t.child=e===null?md(t,null,i,s):oa(t,e.child,i,s)}function dh(e,t,i,s,l){i=i.render;var c=t.ref;if("ref"in s){var m={};for(var v in s)v!=="ref"&&(m[v]=s[v])}else m=s;return aa(t),s=ll(e,t,i,m,c,l),v=cl(),e!==null&&!Fe?(ul(e,t,l),ri(e,t,l)):(pe&&v&&Go(t),t.flags|=1,nt(e,t,s,l),t.child)}function hh(e,t,i,s,l){if(e===null){var c=i.type;return typeof c=="function"&&!Ho(c)&&c.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=c,fh(e,t,c,s,l)):(e=Ps(i.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!Bl(e,l)){var m=c.memoizedProps;if(i=i.compare,i=i!==null?i:zn,i(m,s)&&e.ref===t.ref)return ri(e,t,l)}return t.flags|=1,e=ei(c,s),e.ref=t.ref,e.return=t,t.child=e}function fh(e,t,i,s,l){if(e!==null){var c=e.memoizedProps;if(zn(c,s)&&e.ref===t.ref)if(Fe=!1,t.pendingProps=s=c,Bl(e,l))(e.flags&131072)!==0&&(Fe=!0);else return t.lanes=e.lanes,ri(e,t,l)}return El(e,t,i,s,l)}function mh(e,t,i,s){var l=s.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|i:i,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~c}else s=0,t.child=null;return gh(e,t,c,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Xs(t,c!==null?c.cachePool:null),c!==null?pd(t,c):nl(),vd(t);else return s=t.lanes=536870912,gh(e,t,c!==null?c.baseLanes|i:i,i,s)}else c!==null?(Xs(t,c.cachePool),pd(t,c),Di(),t.memoizedState=null):(e!==null&&Xs(t,null),nl(),Di());return nt(e,t,l,i),t.child}function Qn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gh(e,t,i,s,l){var c=Jo();return c=c===null?null:{parent:Ve._currentValue,pool:c},t.memoizedState={baseLanes:i,cachePool:c},e!==null&&Xs(t,null),nl(),vd(t),e!==null&&Na(e,t,s,!0),t.childLanes=l,null}function fr(e,t){return t=gr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function yh(e,t,i){return oa(t,e.child,null,i),e=fr(t,t.pendingProps),e.flags|=2,Tt(t),t.memoizedState=null,e}function By(e,t,i){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(pe){if(s.mode==="hidden")return e=fr(t,s),t.lanes=536870912,Qn(null,e);if(rl(t),(e=ze)?(e=Rf(e,Nt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_i!==null?{id:Pt,overflow:Qt}:null,retryLane:536870912,hydrationErrors:null},i=Zu(e),i.return=t,t.child=i,it=t,ze=null)):e=null,e===null)throw ki(t);return t.lanes=536870912,null}return fr(t,s)}var c=e.memoizedState;if(c!==null){var m=c.dehydrated;if(rl(t),l)if(t.flags&256)t.flags&=-257,t=yh(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Fe||Na(e,t,i,!1),l=(i&e.childLanes)!==0,Fe||l){if(s=Re,s!==null&&(m=ru(s,i),m!==0&&m!==c.retryLane))throw c.retryLane=m,Zi(e,m),pt(s,e,m),jl;Tr(),t=yh(e,t,i)}else e=c.treeContext,ze=Lt(m.nextSibling),it=t,pe=!0,Ti=null,Nt=!1,e!==null&&id(t,e),t=fr(t,s),t.flags|=4096;return t}return e=ei(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function mr(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(o(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function El(e,t,i,s,l){return aa(t),i=ll(e,t,i,s,void 0,l),s=cl(),e!==null&&!Fe?(ul(e,t,l),ri(e,t,l)):(pe&&s&&Go(t),t.flags|=1,nt(e,t,i,l),t.child)}function ph(e,t,i,s,l,c){return aa(t),t.updateQueue=null,i=wd(t,s,i,l),bd(e),s=cl(),e!==null&&!Fe?(ul(e,t,c),ri(e,t,c)):(pe&&s&&Go(t),t.flags|=1,nt(e,t,i,c),t.child)}function vh(e,t,i,s,l){if(aa(t),t.stateNode===null){var c=za,m=i.contextType;typeof m=="object"&&m!==null&&(c=at(m)),c=new i(s,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=kl,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=s,c.state=t.memoizedState,c.refs={},el(t),m=i.contextType,c.context=typeof m=="object"&&m!==null?at(m):za,c.state=t.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Tl(t,i,m,s),c.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(m=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),m!==c.state&&kl.enqueueReplaceState(c,c.state,null),Gn(t,s,c,l),Wn(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){c=t.stateNode;var v=t.memoizedProps,w=ca(i,v);c.props=w;var E=c.context,B=i.contextType;m=za,typeof B=="object"&&B!==null&&(m=at(B));var U=i.getDerivedStateFromProps;B=typeof U=="function"||typeof c.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,B||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(v||E!==m)&&nh(t,c,s,m),ji=!1;var R=t.memoizedState;c.state=R,Gn(t,s,c,l),Wn(),E=t.memoizedState,v||R!==E||ji?(typeof U=="function"&&(Tl(t,i,U,s),E=t.memoizedState),(w=ji||ah(t,i,w,s,R,E,m))?(B||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=E),c.props=s,c.state=E,c.context=m,s=w):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,tl(e,t),m=t.memoizedProps,B=ca(i,m),c.props=B,U=t.pendingProps,R=c.context,E=i.contextType,w=za,typeof E=="object"&&E!==null&&(w=at(E)),v=i.getDerivedStateFromProps,(E=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(m!==U||R!==w)&&nh(t,c,s,w),ji=!1,R=t.memoizedState,c.state=R,Gn(t,s,c,l),Wn();var C=t.memoizedState;m!==U||R!==C||ji||e!==null&&e.dependencies!==null&&Ys(e.dependencies)?(typeof v=="function"&&(Tl(t,i,v,s),C=t.memoizedState),(B=ji||ah(t,i,B,s,R,C,w)||e!==null&&e.dependencies!==null&&Ys(e.dependencies))?(E||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,C,w),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,C,w)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=C),c.props=s,c.state=C,c.context=w,s=B):(typeof c.componentDidUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),s=!1)}return c=s,mr(e,t),s=(t.flags&128)!==0,c||s?(c=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&s?(t.child=oa(t,e.child,null,l),t.child=oa(t,null,i,l)):nt(e,t,i,l),t.memoizedState=c.state,e=t.child):e=ri(e,t,l),e}function bh(e,t,i,s){return ta(),t.flags|=256,nt(e,t,i,s),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cl(e){return{baseLanes:e,cachePool:ld()}}function Dl(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=At),e}function wh(e,t,i){var s=t.pendingProps,l=!1,c=(t.flags&128)!==0,m;if((m=c)||(m=e!==null&&e.memoizedState===null?!1:(We.current&2)!==0),m&&(l=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(pe){if(l?Ci(t):Di(),(e=ze)?(e=Rf(e,Nt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_i!==null?{id:Pt,overflow:Qt}:null,retryLane:536870912,hydrationErrors:null},i=Zu(e),i.return=t,t.child=i,it=t,ze=null)):e=null,e===null)throw ki(t);return fc(e)?t.lanes=32:t.lanes=536870912,null}var v=s.children;return s=s.fallback,l?(Di(),l=t.mode,v=gr({mode:"hidden",children:v},l),s=ea(s,l,i,null),v.return=t,s.return=t,v.sibling=s,t.child=v,s=t.child,s.memoizedState=Cl(i),s.childLanes=Dl(e,m,i),t.memoizedState=Rl,Qn(null,s)):(Ci(t),Ol(t,v))}var w=e.memoizedState;if(w!==null&&(v=w.dehydrated,v!==null)){if(c)t.flags&256?(Ci(t),t.flags&=-257,t=zl(e,t,i)):t.memoizedState!==null?(Di(),t.child=e.child,t.flags|=128,t=null):(Di(),v=s.fallback,l=t.mode,s=gr({mode:"visible",children:s.children},l),v=ea(v,l,i,null),v.flags|=2,s.return=t,v.return=t,s.sibling=v,t.child=s,oa(t,e.child,null,i),s=t.child,s.memoizedState=Cl(i),s.childLanes=Dl(e,m,i),t.memoizedState=Rl,t=Qn(null,s));else if(Ci(t),fc(v)){if(m=v.nextSibling&&v.nextSibling.dataset,m)var E=m.dgst;m=E,s=Error(o(419)),s.stack="",s.digest=m,Mn({value:s,source:null,stack:null}),t=zl(e,t,i)}else if(Fe||Na(e,t,i,!1),m=(i&e.childLanes)!==0,Fe||m){if(m=Re,m!==null&&(s=ru(m,i),s!==0&&s!==w.retryLane))throw w.retryLane=s,Zi(e,s),pt(m,e,s),jl;hc(v)||Tr(),t=zl(e,t,i)}else hc(v)?(t.flags|=192,t.child=e.child,t=null):(e=w.treeContext,ze=Lt(v.nextSibling),it=t,pe=!0,Ti=null,Nt=!1,e!==null&&id(t,e),t=Ol(t,s.children),t.flags|=4096);return t}return l?(Di(),v=s.fallback,l=t.mode,w=e.child,E=w.sibling,s=ei(w,{mode:"hidden",children:s.children}),s.subtreeFlags=w.subtreeFlags&65011712,E!==null?v=ei(E,v):(v=ea(v,l,i,null),v.flags|=2),v.return=t,s.return=t,s.sibling=v,t.child=s,Qn(null,s),s=t.child,v=e.child.memoizedState,v===null?v=Cl(i):(l=v.cachePool,l!==null?(w=Ve._currentValue,l=l.parent!==w?{parent:w,pool:w}:l):l=ld(),v={baseLanes:v.baseLanes|i,cachePool:l}),s.memoizedState=v,s.childLanes=Dl(e,m,i),t.memoizedState=Rl,Qn(e.child,s)):(Ci(t),i=e.child,e=i.sibling,i=ei(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=i,t.memoizedState=null,i)}function Ol(e,t){return t=gr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function gr(e,t){return e=St(22,e,null,t),e.lanes=0,e}function zl(e,t,i){return oa(t,e.child,null,i),e=Ol(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xh(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Qo(e.return,t,i)}function ql(e,t,i,s,l,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:l,treeForkCount:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=i,m.tailMode=l,m.treeForkCount=c)}function Sh(e,t,i){var s=t.pendingProps,l=s.revealOrder,c=s.tail;s=s.children;var m=We.current,v=(m&2)!==0;if(v?(m=m&1|2,t.flags|=128):m&=1,V(We,m),nt(e,t,s,i),s=pe?Bn:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xh(e,i,t);else if(e.tag===19)xh(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(i=t.child,l=null;i!==null;)e=i.alternate,e!==null&&ar(e)===null&&(l=i),i=i.sibling;i=l,i===null?(l=t.child,t.child=null):(l=i.sibling,i.sibling=null),ql(t,!1,l,i,c,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ar(e)===null){t.child=l;break}e=l.sibling,l.sibling=i,i=l,l=e}ql(t,!0,i,null,c,s);break;case"together":ql(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function ri(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),qi|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Na(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,i=ei(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=ei(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Bl(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ys(e)))}function My(e,t,i){switch(t.tag){case 3:ct(t,t.stateNode.containerInfo),Ai(t,Ve,e.memoizedState.cache),ta();break;case 27:case 5:wn(t);break;case 4:ct(t,t.stateNode.containerInfo);break;case 10:Ai(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,rl(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Ci(t),t.flags|=128,null):(i&t.child.childLanes)!==0?wh(e,t,i):(Ci(t),e=ri(e,t,i),e!==null?e.sibling:null);Ci(t);break;case 19:var l=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(Na(e,t,i,!1),s=(i&t.childLanes)!==0),l){if(s)return Sh(e,t,i);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),V(We,We.current),s)break;return null;case 22:return t.lanes=0,mh(e,t,i,t.pendingProps);case 24:Ai(t,Ve,e.memoizedState.cache)}return ri(e,t,i)}function _h(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Fe=!0;else{if(!Bl(e,i)&&(t.flags&128)===0)return Fe=!1,My(e,t,i);Fe=(e.flags&131072)!==0}else Fe=!1,pe&&(t.flags&1048576)!==0&&td(t,Bn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=sa(t.elementType),t.type=e,typeof e=="function")Ho(e)?(s=ca(e,s),t.tag=1,t=vh(null,t,e,s,i)):(t.tag=0,t=El(null,t,e,s,i));else{if(e!=null){var l=e.$$typeof;if(l===$){t.tag=11,t=dh(null,t,e,s,i);break e}else if(l===Q){t.tag=14,t=hh(null,t,e,s,i);break e}}throw t=be(e)||e,Error(o(306,t,""))}}return t;case 0:return El(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,l=ca(s,t.pendingProps),vh(e,t,s,l,i);case 3:e:{if(ct(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var c=t.memoizedState;l=c.element,tl(e,t),Gn(t,s,null,i);var m=t.memoizedState;if(s=m.cache,Ai(t,Ve,s),s!==c.cache&&Yo(t,[Ve],i,!0),Wn(),s=m.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=bh(e,t,s,i);break e}else if(s!==l){l=qt(Error(o(424)),t),Mn(l),t=bh(e,t,s,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,ze=Lt(e.firstChild),it=t,pe=!0,Ti=null,Nt=!0,i=md(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(ta(),s===l){t=ri(e,t,i);break e}nt(e,t,s,i)}t=t.child}return t;case 26:return mr(e,t),e===null?(i=Bf(t.type,null,t.pendingProps,null))?t.memoizedState=i:pe||(i=t.type,e=t.pendingProps,s=Dr(de.current).createElement(i),s[tt]=t,s[dt]=e,st(s,i,e),Je(s),t.stateNode=s):t.memoizedState=Bf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return wn(t),e===null&&pe&&(s=t.stateNode=Of(t.type,t.pendingProps,de.current),it=t,Nt=!0,l=ze,Li(t.type)?(mc=l,ze=Lt(s.firstChild)):ze=l),nt(e,t,t.pendingProps.children,i),mr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&pe&&((l=s=ze)&&(s=hp(s,t.type,t.pendingProps,Nt),s!==null?(t.stateNode=s,it=t,ze=Lt(s.firstChild),Nt=!1,l=!0):l=!1),l||ki(t)),wn(t),l=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,s=c.children,cc(l,c)?s=null:m!==null&&cc(l,m)&&(t.flags|=32),t.memoizedState!==null&&(l=ll(e,t,jy,null,null,i),cs._currentValue=l),mr(e,t),nt(e,t,s,i),t.child;case 6:return e===null&&pe&&((e=i=ze)&&(i=fp(i,t.pendingProps,Nt),i!==null?(t.stateNode=i,it=t,ze=null,e=!0):e=!1),e||ki(t)),null;case 13:return wh(e,t,i);case 4:return ct(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=oa(t,null,s,i):nt(e,t,s,i),t.child;case 11:return dh(e,t,t.type,t.pendingProps,i);case 7:return nt(e,t,t.pendingProps,i),t.child;case 8:return nt(e,t,t.pendingProps.children,i),t.child;case 12:return nt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,Ai(t,t.type,s.value),nt(e,t,s.children,i),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,aa(t),l=at(l),s=s(l),t.flags|=1,nt(e,t,s,i),t.child;case 14:return hh(e,t,t.type,t.pendingProps,i);case 15:return fh(e,t,t.type,t.pendingProps,i);case 19:return Sh(e,t,i);case 31:return By(e,t,i);case 22:return mh(e,t,i,t.pendingProps);case 24:return aa(t),s=at(Ve),e===null?(l=Jo(),l===null&&(l=Re,c=Ko(),l.pooledCache=c,c.refCount++,c!==null&&(l.pooledCacheLanes|=i),l=c),t.memoizedState={parent:s,cache:l},el(t),Ai(t,Ve,l)):((e.lanes&i)!==0&&(tl(e,t),Gn(t,null,null,i),Wn()),l=e.memoizedState,c=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Ai(t,Ve,s)):(s=c.cache,Ai(t,Ve,s),s!==l.cache&&Yo(t,[Ve],i,!0))),nt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function oi(e){e.flags|=4}function Ml(e,t,i,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Kh())e.flags|=8192;else throw ra=Zs,Zo}else e.flags&=-16777217}function Th(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Hf(t))if(Kh())e.flags|=8192;else throw ra=Zs,Zo}function yr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?au():536870912,e.lanes|=t,Ya|=t)}function Yn(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var l=e.child;l!==null;)i|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)i|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function Ny(e,t,i){var s=t.pendingProps;switch(Vo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ai(Ve),Ie(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ma(t)?oi(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Fo())),qe(t),null;case 26:var l=t.type,c=t.memoizedState;return e===null?(oi(t),c!==null?(qe(t),Th(t,c)):(qe(t),Ml(t,l,null,s,i))):c?c!==e.memoizedState?(oi(t),qe(t),Th(t,c)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&oi(t),qe(t),Ml(t,l,e,s,i)),null;case 27:if(js(t),i=de.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&oi(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return qe(t),null}e=P.current,Ma(t)?ad(t):(e=Of(l,s,i),t.stateNode=e,oi(t))}return qe(t),null;case 5:if(js(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&oi(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return qe(t),null}if(c=P.current,Ma(t))ad(t);else{var m=Dr(de.current);switch(c){case 1:c=m.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:c=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":c=m.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":c=m.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":c=m.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?c.multiple=!0:s.size&&(c.size=s.size);break;default:c=typeof s.is=="string"?m.createElement(l,{is:s.is}):m.createElement(l)}}c[tt]=t,c[dt]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=c;e:switch(st(c,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&oi(t)}}return qe(t),Ml(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&oi(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=de.current,Ma(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,l=it,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[tt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||xf(e.nodeValue,i)),e||ki(t,!0)}else e=Dr(e).createTextNode(s),e[tt]=t,t.stateNode=e}return qe(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=Ma(t),i!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[tt]=t}else ta(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else i=Fo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Tt(t),t):(Tt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return qe(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Ma(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(o(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));l[tt]=t}else ta(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),l=!1}else l=Fo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Tt(t),t):(Tt(t),null)}return Tt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),yr(t,t.updateQueue),qe(t),null);case 4:return Ie(),e===null&&nc(t.stateNode.containerInfo),qe(t),null;case 10:return ai(t.type),qe(t),null;case 19:if(L(We),s=t.memoizedState,s===null)return qe(t),null;if(l=(t.flags&128)!==0,c=s.rendering,c===null)if(l)Yn(s,!1);else{if(Le!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=ar(e),c!==null){for(t.flags|=128,Yn(s,!1),e=c.updateQueue,t.updateQueue=e,yr(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Ju(i,e),i=i.sibling;return V(We,We.current&1|2),pe&&ti(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&vt()>xr&&(t.flags|=128,l=!0,Yn(s,!1),t.lanes=4194304)}else{if(!l)if(e=ar(c),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,yr(t,e),Yn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!pe)return qe(t),null}else 2*vt()-s.renderingStartTime>xr&&i!==536870912&&(t.flags|=128,l=!0,Yn(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=vt(),e.sibling=null,i=We.current,V(We,l?i&1|2:i&1),pe&&ti(t,s.treeForkCount),e):(qe(t),null);case 22:case 23:return Tt(t),sl(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),i=t.updateQueue,i!==null&&yr(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&L(na),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ai(Ve),qe(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Uy(e,t){switch(Vo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ai(Ve),Ie(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return js(t),null;case 31:if(t.memoizedState!==null){if(Tt(t),t.alternate===null)throw Error(o(340));ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Tt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return L(We),null;case 4:return Ie(),null;case 10:return ai(t.type),null;case 22:case 23:return Tt(t),sl(),e!==null&&L(na),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ai(Ve),null;case 25:return null;default:return null}}function kh(e,t){switch(Vo(t),t.tag){case 3:ai(Ve),Ie();break;case 26:case 27:case 5:js(t);break;case 4:Ie();break;case 31:t.memoizedState!==null&&Tt(t);break;case 13:Tt(t);break;case 19:L(We);break;case 10:ai(t.type);break;case 22:case 23:Tt(t),sl(),e!==null&&L(na);break;case 24:ai(Ve)}}function Kn(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var l=s.next;i=l;do{if((i.tag&e)===e){s=void 0;var c=i.create,m=i.inst;s=c(),m.destroy=s}i=i.next}while(i!==l)}}catch(v){ke(t,t.return,v)}}function Oi(e,t,i){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&e)===e){var m=s.inst,v=m.destroy;if(v!==void 0){m.destroy=void 0,l=t;var w=i,E=v;try{E()}catch(B){ke(l,w,B)}}}s=s.next}while(s!==c)}}catch(B){ke(t,t.return,B)}}function Ah(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{yd(t,i)}catch(s){ke(e,e.return,s)}}}function jh(e,t,i){i.props=ca(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){ke(e,t,s)}}function Xn(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(l){ke(e,t,l)}}function Yt(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(l){ke(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(l){ke(e,t,l)}else i.current=null}function Eh(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(l){ke(e,e.return,l)}}function Nl(e,t,i){try{var s=e.stateNode;rp(s,e.type,i,t),s[dt]=t}catch(l){ke(e,e.return,l)}}function Rh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Li(e.type)||e.tag===4}function Ul(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Li(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ll(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Jt));else if(s!==4&&(s===27&&Li(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(Ll(e,t,i),e=e.sibling;e!==null;)Ll(e,t,i),e=e.sibling}function pr(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&Li(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(pr(e,t,i),e=e.sibling;e!==null;)pr(e,t,i),e=e.sibling}function Ch(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);st(t,s,i),t[tt]=e,t[dt]=i}catch(c){ke(e,e.return,c)}}var li=!1,Pe=!1,Hl=!1,Dh=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Ly(e,t){if(e=e.containerInfo,oc=Ur,e=Gu(e),zo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var l=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var m=0,v=-1,w=-1,E=0,B=0,U=e,R=null;t:for(;;){for(var C;U!==i||l!==0&&U.nodeType!==3||(v=m+l),U!==c||s!==0&&U.nodeType!==3||(w=m+s),U.nodeType===3&&(m+=U.nodeValue.length),(C=U.firstChild)!==null;)R=U,U=C;for(;;){if(U===e)break t;if(R===i&&++E===l&&(v=m),R===c&&++B===s&&(w=m),(C=U.nextSibling)!==null)break;U=R,R=U.parentNode}U=C}i=v===-1||w===-1?null:{start:v,end:w}}else i=null}i=i||{start:0,end:0}}else i=null;for(lc={focusedElem:e,selectionRange:i},Ur=!1,Ze=t;Ze!==null;)if(t=Ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ze=e;else for(;Ze!==null;){switch(t=Ze,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)l=e[i],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,i=t,l=c.memoizedProps,c=c.memoizedState,s=i.stateNode;try{var F=ca(i.type,l);e=s.getSnapshotBeforeUpdate(F,c),s.__reactInternalSnapshotBeforeUpdate=e}catch(ie){ke(i,i.return,ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)dc(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ze=e;break}Ze=t.return}}function Oh(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:ui(e,i),s&4&&Kn(5,i);break;case 1:if(ui(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(m){ke(i,i.return,m)}else{var l=ca(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){ke(i,i.return,m)}}s&64&&Ah(i),s&512&&Xn(i,i.return);break;case 3:if(ui(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{yd(e,t)}catch(m){ke(i,i.return,m)}}break;case 27:t===null&&s&4&&Ch(i);case 26:case 5:ui(e,i),t===null&&s&4&&Eh(i),s&512&&Xn(i,i.return);break;case 12:ui(e,i);break;case 31:ui(e,i),s&4&&Bh(e,i);break;case 13:ui(e,i),s&4&&Mh(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Qy.bind(null,i),mp(e,i))));break;case 22:if(s=i.memoizedState!==null||li,!s){t=t!==null&&t.memoizedState!==null||Pe,l=li;var c=Pe;li=s,(Pe=t)&&!c?di(e,i,(i.subtreeFlags&8772)!==0):ui(e,i),li=l,Pe=c}break;case 30:break;default:ui(e,i)}}function zh(e){var t=e.alternate;t!==null&&(e.alternate=null,zh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&yo(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,ft=!1;function ci(e,t,i){for(i=i.child;i!==null;)qh(e,t,i),i=i.sibling}function qh(e,t,i){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(xn,i)}catch{}switch(i.tag){case 26:Pe||Yt(i,t),ci(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Pe||Yt(i,t);var s=Be,l=ft;Li(i.type)&&(Be=i.stateNode,ft=!1),ci(e,t,i),rs(i.stateNode),Be=s,ft=l;break;case 5:Pe||Yt(i,t);case 6:if(s=Be,l=ft,Be=null,ci(e,t,i),Be=s,ft=l,Be!==null)if(ft)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(i.stateNode)}catch(c){ke(i,t,c)}else try{Be.removeChild(i.stateNode)}catch(c){ke(i,t,c)}break;case 18:Be!==null&&(ft?(e=Be,jf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),nn(e)):jf(Be,i.stateNode));break;case 4:s=Be,l=ft,Be=i.stateNode.containerInfo,ft=!0,ci(e,t,i),Be=s,ft=l;break;case 0:case 11:case 14:case 15:Oi(2,i,t),Pe||Oi(4,i,t),ci(e,t,i);break;case 1:Pe||(Yt(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&jh(i,t,s)),ci(e,t,i);break;case 21:ci(e,t,i);break;case 22:Pe=(s=Pe)||i.memoizedState!==null,ci(e,t,i),Pe=s;break;default:ci(e,t,i)}}function Bh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{nn(e)}catch(i){ke(t,t.return,i)}}}function Mh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{nn(e)}catch(i){ke(t,t.return,i)}}function Hy(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dh),t;default:throw Error(o(435,e.tag))}}function vr(e,t){var i=Hy(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var l=Yy.bind(null,e,s);s.then(l,l)}})}function mt(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var l=i[s],c=e,m=t,v=m;e:for(;v!==null;){switch(v.tag){case 27:if(Li(v.type)){Be=v.stateNode,ft=!1;break e}break;case 5:Be=v.stateNode,ft=!1;break e;case 3:case 4:Be=v.stateNode.containerInfo,ft=!0;break e}v=v.return}if(Be===null)throw Error(o(160));qh(c,m,l),Be=null,ft=!1,c=l.alternate,c!==null&&(c.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Nh(t,e),t=t.sibling}var Wt=null;function Nh(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mt(t,e),gt(e),s&4&&(Oi(3,e,e.return),Kn(3,e),Oi(5,e,e.return));break;case 1:mt(t,e),gt(e),s&512&&(Pe||i===null||Yt(i,i.return)),s&64&&li&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var l=Wt;if(mt(t,e),gt(e),s&512&&(Pe||i===null||Yt(i,i.return)),s&4){var c=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":c=l.getElementsByTagName("title")[0],(!c||c[Tn]||c[tt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=l.createElement(s),l.head.insertBefore(c,l.querySelector("head > title"))),st(c,s,i),c[tt]=e,Je(c),s=c;break e;case"link":var m=Uf("link","href",l).get(s+(i.href||""));if(m){for(var v=0;v<m.length;v++)if(c=m[v],c.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&c.getAttribute("rel")===(i.rel==null?null:i.rel)&&c.getAttribute("title")===(i.title==null?null:i.title)&&c.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){m.splice(v,1);break t}}c=l.createElement(s),st(c,s,i),l.head.appendChild(c);break;case"meta":if(m=Uf("meta","content",l).get(s+(i.content||""))){for(v=0;v<m.length;v++)if(c=m[v],c.getAttribute("content")===(i.content==null?null:""+i.content)&&c.getAttribute("name")===(i.name==null?null:i.name)&&c.getAttribute("property")===(i.property==null?null:i.property)&&c.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&c.getAttribute("charset")===(i.charSet==null?null:i.charSet)){m.splice(v,1);break t}}c=l.createElement(s),st(c,s,i),l.head.appendChild(c);break;default:throw Error(o(468,s))}c[tt]=e,Je(c),s=c}e.stateNode=s}else Lf(l,e.type,e.stateNode);else e.stateNode=Nf(l,s,e.memoizedProps);else c!==s?(c===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):c.count--,s===null?Lf(l,e.type,e.stateNode):Nf(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Nl(e,e.memoizedProps,i.memoizedProps)}break;case 27:mt(t,e),gt(e),s&512&&(Pe||i===null||Yt(i,i.return)),i!==null&&s&4&&Nl(e,e.memoizedProps,i.memoizedProps);break;case 5:if(mt(t,e),gt(e),s&512&&(Pe||i===null||Yt(i,i.return)),e.flags&32){l=e.stateNode;try{Aa(l,"")}catch(F){ke(e,e.return,F)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,Nl(e,l,i!==null?i.memoizedProps:l)),s&1024&&(Hl=!0);break;case 6:if(mt(t,e),gt(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(F){ke(e,e.return,F)}}break;case 3:if(qr=null,l=Wt,Wt=Or(t.containerInfo),mt(t,e),Wt=l,gt(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{nn(t.containerInfo)}catch(F){ke(e,e.return,F)}Hl&&(Hl=!1,Uh(e));break;case 4:s=Wt,Wt=Or(e.stateNode.containerInfo),mt(t,e),gt(e),Wt=s;break;case 12:mt(t,e),gt(e);break;case 31:mt(t,e),gt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,vr(e,s)));break;case 13:mt(t,e),gt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(wr=vt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,vr(e,s)));break;case 22:l=e.memoizedState!==null;var w=i!==null&&i.memoizedState!==null,E=li,B=Pe;if(li=E||l,Pe=B||w,mt(t,e),Pe=B,li=E,gt(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(i===null||w||li||Pe||ua(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){w=i=t;try{if(c=w.stateNode,l)m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{v=w.stateNode;var U=w.memoizedProps.style,R=U!=null&&U.hasOwnProperty("display")?U.display:null;v.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(F){ke(w,w.return,F)}}}else if(t.tag===6){if(i===null){w=t;try{w.stateNode.nodeValue=l?"":w.memoizedProps}catch(F){ke(w,w.return,F)}}}else if(t.tag===18){if(i===null){w=t;try{var C=w.stateNode;l?Ef(C,!0):Ef(w.stateNode,!1)}catch(F){ke(w,w.return,F)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,vr(e,i))));break;case 19:mt(t,e),gt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,vr(e,s)));break;case 30:break;case 21:break;default:mt(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(Rh(s)){i=s;break}s=s.return}if(i==null)throw Error(o(160));switch(i.tag){case 27:var l=i.stateNode,c=Ul(e);pr(e,c,l);break;case 5:var m=i.stateNode;i.flags&32&&(Aa(m,""),i.flags&=-33);var v=Ul(e);pr(e,v,m);break;case 3:case 4:var w=i.stateNode.containerInfo,E=Ul(e);Ll(e,E,w);break;default:throw Error(o(161))}}catch(B){ke(e,e.return,B)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Uh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Uh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ui(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Oh(e,t.alternate,t),t=t.sibling}function ua(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Oi(4,t,t.return),ua(t);break;case 1:Yt(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&jh(t,t.return,i),ua(t);break;case 27:rs(t.stateNode);case 26:case 5:Yt(t,t.return),ua(t);break;case 22:t.memoizedState===null&&ua(t);break;case 30:ua(t);break;default:ua(t)}e=e.sibling}}function di(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,c=t,m=c.flags;switch(c.tag){case 0:case 11:case 15:di(l,c,i),Kn(4,c);break;case 1:if(di(l,c,i),s=c,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(E){ke(s,s.return,E)}if(s=c,l=s.updateQueue,l!==null){var v=s.stateNode;try{var w=l.shared.hiddenCallbacks;if(w!==null)for(l.shared.hiddenCallbacks=null,l=0;l<w.length;l++)gd(w[l],v)}catch(E){ke(s,s.return,E)}}i&&m&64&&Ah(c),Xn(c,c.return);break;case 27:Ch(c);case 26:case 5:di(l,c,i),i&&s===null&&m&4&&Eh(c),Xn(c,c.return);break;case 12:di(l,c,i);break;case 31:di(l,c,i),i&&m&4&&Bh(l,c);break;case 13:di(l,c,i),i&&m&4&&Mh(l,c);break;case 22:c.memoizedState===null&&di(l,c,i),Xn(c,c.return);break;case 30:break;default:di(l,c,i)}t=t.sibling}}function Il(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Nn(i))}function Wl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Nn(e))}function Gt(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lh(e,t,i,s),t=t.sibling}function Lh(e,t,i,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,i,s),l&2048&&Kn(9,t);break;case 1:Gt(e,t,i,s);break;case 3:Gt(e,t,i,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Nn(e)));break;case 12:if(l&2048){Gt(e,t,i,s),e=t.stateNode;try{var c=t.memoizedProps,m=c.id,v=c.onPostCommit;typeof v=="function"&&v(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){ke(t,t.return,w)}}else Gt(e,t,i,s);break;case 31:Gt(e,t,i,s);break;case 13:Gt(e,t,i,s);break;case 23:break;case 22:c=t.stateNode,m=t.alternate,t.memoizedState!==null?c._visibility&2?Gt(e,t,i,s):Jn(e,t):c._visibility&2?Gt(e,t,i,s):(c._visibility|=2,Fa(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Il(m,t);break;case 24:Gt(e,t,i,s),l&2048&&Wl(t.alternate,t);break;default:Gt(e,t,i,s)}}function Fa(e,t,i,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,m=t,v=i,w=s,E=m.flags;switch(m.tag){case 0:case 11:case 15:Fa(c,m,v,w,l),Kn(8,m);break;case 23:break;case 22:var B=m.stateNode;m.memoizedState!==null?B._visibility&2?Fa(c,m,v,w,l):Jn(c,m):(B._visibility|=2,Fa(c,m,v,w,l)),l&&E&2048&&Il(m.alternate,m);break;case 24:Fa(c,m,v,w,l),l&&E&2048&&Wl(m.alternate,m);break;default:Fa(c,m,v,w,l)}t=t.sibling}}function Jn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,l=s.flags;switch(s.tag){case 22:Jn(i,s),l&2048&&Il(s.alternate,s);break;case 24:Jn(i,s),l&2048&&Wl(s.alternate,s);break;default:Jn(i,s)}t=t.sibling}}var Zn=8192;function Pa(e,t,i){if(e.subtreeFlags&Zn)for(e=e.child;e!==null;)Hh(e,t,i),e=e.sibling}function Hh(e,t,i){switch(e.tag){case 26:Pa(e,t,i),e.flags&Zn&&e.memoizedState!==null&&Ap(i,Wt,e.memoizedState,e.memoizedProps);break;case 5:Pa(e,t,i);break;case 3:case 4:var s=Wt;Wt=Or(e.stateNode.containerInfo),Pa(e,t,i),Wt=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Zn,Zn=16777216,Pa(e,t,i),Zn=s):Pa(e,t,i));break;default:Pa(e,t,i)}}function Ih(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function es(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];Ze=s,Gh(s,e)}Ih(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wh(e),e=e.sibling}function Wh(e){switch(e.tag){case 0:case 11:case 15:es(e),e.flags&2048&&Oi(9,e,e.return);break;case 3:es(e);break;case 12:es(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,br(e)):es(e);break;default:es(e)}}function br(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];Ze=s,Gh(s,e)}Ih(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Oi(8,t,t.return),br(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,br(t));break;default:br(t)}e=e.sibling}}function Gh(e,t){for(;Ze!==null;){var i=Ze;switch(i.tag){case 0:case 11:case 15:Oi(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Nn(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Ze=s;else e:for(i=e;Ze!==null;){s=Ze;var l=s.sibling,c=s.return;if(zh(s),s===i){Ze=null;break e}if(l!==null){l.return=c,Ze=l;break e}Ze=c}}}var Iy={getCacheForType:function(e){var t=at(Ve),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return at(Ve).controller.signal}},Wy=typeof WeakMap=="function"?WeakMap:Map,Se=0,Re=null,he=null,ge=0,Te=0,kt=null,zi=!1,Qa=!1,Gl=!1,hi=0,Le=0,qi=0,da=0,Vl=0,At=0,Ya=0,ts=null,yt=null,$l=!1,wr=0,Vh=0,xr=1/0,Sr=null,Bi=null,Ke=0,Mi=null,Ka=null,fi=0,Fl=0,Pl=null,$h=null,is=0,Ql=null;function jt(){return(Se&2)!==0&&ge!==0?ge&-ge:D.T!==null?ec():ou()}function Fh(){if(At===0)if((ge&536870912)===0||pe){var e=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),At=e}else At=536870912;return e=_t.current,e!==null&&(e.flags|=32),At}function pt(e,t,i){(e===Re&&(Te===2||Te===9)||e.cancelPendingCommit!==null)&&(Xa(e,0),Ni(e,ge,At,!1)),_n(e,i),((Se&2)===0||e!==Re)&&(e===Re&&((Se&2)===0&&(da|=i),Le===4&&Ni(e,ge,At,!1)),Kt(e))}function Ph(e,t,i){if((Se&6)!==0)throw Error(o(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Sn(e,t),l=s?$y(e,t):Kl(e,t,!0),c=s;do{if(l===0){Qa&&!s&&Ni(e,t,0,!1);break}else{if(i=e.current.alternate,c&&!Gy(i)){l=Kl(e,t,!1),c=!1;continue}if(l===2){if(c=t,e.errorRecoveryDisabledLanes&c)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var v=e;l=ts;var w=v.current.memoizedState.isDehydrated;if(w&&(Xa(v,m).flags|=256),m=Kl(v,m,!1),m!==2){if(Gl&&!w){v.errorRecoveryDisabledLanes|=c,da|=c,l=4;break e}c=yt,yt=l,c!==null&&(yt===null?yt=c:yt.push.apply(yt,c))}l=m}if(c=!1,l!==2)continue}}if(l===1){Xa(e,0),Ni(e,t,0,!0);break}e:{switch(s=e,c=l,c){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ni(s,t,At,!zi);break e;case 2:yt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(l=wr+300-vt(),10<l)){if(Ni(s,t,At,!zi),Os(s,0,!0)!==0)break e;fi=t,s.timeoutHandle=kf(Qh.bind(null,s,i,yt,Sr,$l,t,At,da,Ya,zi,c,"Throttled",-0,0),l);break e}Qh(s,i,yt,Sr,$l,t,At,da,Ya,zi,c,null,-0,0)}}break}while(!0);Kt(e)}function Qh(e,t,i,s,l,c,m,v,w,E,B,U,R,C){if(e.timeoutHandle=-1,U=t.subtreeFlags,U&8192||(U&16785408)===16785408){U={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jt},Hh(t,c,U);var F=(c&62914560)===c?wr-vt():(c&4194048)===c?Vh-vt():0;if(F=jp(U,F),F!==null){fi=c,e.cancelPendingCommit=F(af.bind(null,e,t,c,i,s,l,m,v,w,B,U,null,R,C)),Ni(e,c,m,!E);return}}af(e,t,c,i,s,l,m,v,w)}function Gy(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var l=i[s],c=l.getSnapshot;l=l.value;try{if(!xt(c(),l))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ni(e,t,i,s){t&=~Vl,t&=~da,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var c=31-wt(l),m=1<<c;s[c]=-1,l&=~m}i!==0&&nu(e,i,t)}function _r(){return(Se&6)===0?(as(0),!1):!0}function Yl(){if(he!==null){if(Te===0)var e=he.return;else e=he,ii=ia=null,dl(e),Ia=null,Ln=0,e=he;for(;e!==null;)kh(e.alternate,e),e=e.return;he=null}}function Xa(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,cp(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),fi=0,Yl(),Re=e,he=i=ei(e.current,null),ge=t,Te=0,kt=null,zi=!1,Qa=Sn(e,t),Gl=!1,Ya=At=Vl=da=qi=Le=0,yt=ts=null,$l=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-wt(s),c=1<<l;t|=e[l],s&=~c}return hi=t,Vs(),i}function Yh(e,t){le=null,D.H=Pn,t===Ha||t===Js?(t=dd(),Te=3):t===Zo?(t=dd(),Te=4):Te=t===jl?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,kt=t,he===null&&(Le=1,hr(e,qt(t,e.current)))}function Kh(){var e=_t.current;return e===null?!0:(ge&4194048)===ge?Ut===null:(ge&62914560)===ge||(ge&536870912)!==0?e===Ut:!1}function Xh(){var e=D.H;return D.H=Pn,e===null?Pn:e}function Jh(){var e=D.A;return D.A=Iy,e}function Tr(){Le=4,zi||(ge&4194048)!==ge&&_t.current!==null||(Qa=!0),(qi&134217727)===0&&(da&134217727)===0||Re===null||Ni(Re,ge,At,!1)}function Kl(e,t,i){var s=Se;Se|=2;var l=Xh(),c=Jh();(Re!==e||ge!==t)&&(Sr=null,Xa(e,t)),t=!1;var m=Le;e:do try{if(Te!==0&&he!==null){var v=he,w=kt;switch(Te){case 8:Yl(),m=6;break e;case 3:case 2:case 9:case 6:_t.current===null&&(t=!0);var E=Te;if(Te=0,kt=null,Ja(e,v,w,E),i&&Qa){m=0;break e}break;default:E=Te,Te=0,kt=null,Ja(e,v,w,E)}}Vy(),m=Le;break}catch(B){Yh(e,B)}while(!0);return t&&e.shellSuspendCounter++,ii=ia=null,Se=s,D.H=l,D.A=c,he===null&&(Re=null,ge=0,Vs()),m}function Vy(){for(;he!==null;)Zh(he)}function $y(e,t){var i=Se;Se|=2;var s=Xh(),l=Jh();Re!==e||ge!==t?(Sr=null,xr=vt()+500,Xa(e,t)):Qa=Sn(e,t);e:do try{if(Te!==0&&he!==null){t=he;var c=kt;t:switch(Te){case 1:Te=0,kt=null,Ja(e,t,c,1);break;case 2:case 9:if(cd(c)){Te=0,kt=null,ef(t);break}t=function(){Te!==2&&Te!==9||Re!==e||(Te=7),Kt(e)},c.then(t,t);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:cd(c)?(Te=0,kt=null,ef(t)):(Te=0,kt=null,Ja(e,t,c,7));break;case 5:var m=null;switch(he.tag){case 26:m=he.memoizedState;case 5:case 27:var v=he;if(m?Hf(m):v.stateNode.complete){Te=0,kt=null;var w=v.sibling;if(w!==null)he=w;else{var E=v.return;E!==null?(he=E,kr(E)):he=null}break t}}Te=0,kt=null,Ja(e,t,c,5);break;case 6:Te=0,kt=null,Ja(e,t,c,6);break;case 8:Yl(),Le=6;break e;default:throw Error(o(462))}}Fy();break}catch(B){Yh(e,B)}while(!0);return ii=ia=null,D.H=s,D.A=l,Se=i,he!==null?0:(Re=null,ge=0,Vs(),Le)}function Fy(){for(;he!==null&&!gg();)Zh(he)}function Zh(e){var t=_h(e.alternate,e,hi);e.memoizedProps=e.pendingProps,t===null?kr(e):he=t}function ef(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=ph(i,t,t.pendingProps,t.type,void 0,ge);break;case 11:t=ph(i,t,t.pendingProps,t.type.render,t.ref,ge);break;case 5:dl(t);default:kh(i,t),t=he=Ju(t,hi),t=_h(i,t,hi)}e.memoizedProps=e.pendingProps,t===null?kr(e):he=t}function Ja(e,t,i,s){ii=ia=null,dl(t),Ia=null,Ln=0;var l=t.return;try{if(qy(e,l,t,i,ge)){Le=1,hr(e,qt(i,e.current)),he=null;return}}catch(c){if(l!==null)throw he=l,c;Le=1,hr(e,qt(i,e.current)),he=null;return}t.flags&32768?(pe||s===1?e=!0:Qa||(ge&536870912)!==0?e=!1:(zi=e=!0,(s===2||s===9||s===3||s===6)&&(s=_t.current,s!==null&&s.tag===13&&(s.flags|=16384))),tf(t,e)):kr(t)}function kr(e){var t=e;do{if((t.flags&32768)!==0){tf(t,zi);return}e=t.return;var i=Ny(t.alternate,t,hi);if(i!==null){he=i;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);Le===0&&(Le=5)}function tf(e,t){do{var i=Uy(e.alternate,e);if(i!==null){i.flags&=32767,he=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){he=e;return}he=e=i}while(e!==null);Le=6,he=null}function af(e,t,i,s,l,c,m,v,w){e.cancelPendingCommit=null;do Ar();while(Ke!==0);if((Se&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(c=t.lanes|t.childLanes,c|=Uo,kg(e,i,c,m,v,w),e===Re&&(he=Re=null,ge=0),Ka=t,Mi=e,fi=i,Fl=c,Pl=l,$h=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ky(Es,function(){return lf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=D.T,D.T=null,l=W.p,W.p=2,m=Se,Se|=4;try{Ly(e,t,i)}finally{Se=m,W.p=l,D.T=s}}Ke=1,nf(),sf(),rf()}}function nf(){if(Ke===1){Ke=0;var e=Mi,t=Ka,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=D.T,D.T=null;var s=W.p;W.p=2;var l=Se;Se|=4;try{Nh(t,e);var c=lc,m=Gu(e.containerInfo),v=c.focusedElem,w=c.selectionRange;if(m!==v&&v&&v.ownerDocument&&Wu(v.ownerDocument.documentElement,v)){if(w!==null&&zo(v)){var E=w.start,B=w.end;if(B===void 0&&(B=E),"selectionStart"in v)v.selectionStart=E,v.selectionEnd=Math.min(B,v.value.length);else{var U=v.ownerDocument||document,R=U&&U.defaultView||window;if(R.getSelection){var C=R.getSelection(),F=v.textContent.length,ie=Math.min(w.start,F),Ee=w.end===void 0?ie:Math.min(w.end,F);!C.extend&&ie>Ee&&(m=Ee,Ee=ie,ie=m);var A=Iu(v,ie),_=Iu(v,Ee);if(A&&_&&(C.rangeCount!==1||C.anchorNode!==A.node||C.anchorOffset!==A.offset||C.focusNode!==_.node||C.focusOffset!==_.offset)){var j=U.createRange();j.setStart(A.node,A.offset),C.removeAllRanges(),ie>Ee?(C.addRange(j),C.extend(_.node,_.offset)):(j.setEnd(_.node,_.offset),C.addRange(j))}}}}for(U=[],C=v;C=C.parentNode;)C.nodeType===1&&U.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<U.length;v++){var N=U[v];N.element.scrollLeft=N.left,N.element.scrollTop=N.top}}Ur=!!oc,lc=oc=null}finally{Se=l,W.p=s,D.T=i}}e.current=t,Ke=2}}function sf(){if(Ke===2){Ke=0;var e=Mi,t=Ka,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=D.T,D.T=null;var s=W.p;W.p=2;var l=Se;Se|=4;try{Oh(e,t.alternate,t)}finally{Se=l,W.p=s,D.T=i}}Ke=3}}function rf(){if(Ke===4||Ke===3){Ke=0,yg();var e=Mi,t=Ka,i=fi,s=$h;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ke=5:(Ke=0,Ka=Mi=null,of(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Bi=null),mo(i),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(xn,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=D.T,l=W.p,W.p=2,D.T=null;try{for(var c=e.onRecoverableError,m=0;m<s.length;m++){var v=s[m];c(v.value,{componentStack:v.stack})}}finally{D.T=t,W.p=l}}(fi&3)!==0&&Ar(),Kt(e),l=e.pendingLanes,(i&261930)!==0&&(l&42)!==0?e===Ql?is++:(is=0,Ql=e):is=0,as(0)}}function of(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Nn(t)))}function Ar(){return nf(),sf(),rf(),lf()}function lf(){if(Ke!==5)return!1;var e=Mi,t=Fl;Fl=0;var i=mo(fi),s=D.T,l=W.p;try{W.p=32>i?32:i,D.T=null,i=Pl,Pl=null;var c=Mi,m=fi;if(Ke=0,Ka=Mi=null,fi=0,(Se&6)!==0)throw Error(o(331));var v=Se;if(Se|=4,Wh(c.current),Lh(c,c.current,m,i),Se=v,as(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(xn,c)}catch{}return!0}finally{W.p=l,D.T=s,of(e,t)}}function cf(e,t,i){t=qt(i,t),t=Al(e.stateNode,t,2),e=Ri(e,t,2),e!==null&&(_n(e,2),Kt(e))}function ke(e,t,i){if(e.tag===3)cf(e,e,i);else for(;t!==null;){if(t.tag===3){cf(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Bi===null||!Bi.has(s))){e=qt(i,e),i=ch(2),s=Ri(t,i,2),s!==null&&(uh(i,s,t,e),_n(s,2),Kt(s));break}}t=t.return}}function Xl(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new Wy;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(i)||(Gl=!0,l.add(i),e=Py.bind(null,e,t,i),t.then(e,e))}function Py(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Re===e&&(ge&i)===i&&(Le===4||Le===3&&(ge&62914560)===ge&&300>vt()-wr?(Se&2)===0&&Xa(e,0):Vl|=i,Ya===ge&&(Ya=0)),Kt(e)}function uf(e,t){t===0&&(t=au()),e=Zi(e,t),e!==null&&(_n(e,t),Kt(e))}function Qy(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),uf(e,i)}function Yy(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(i=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),uf(e,i)}function Ky(e,t){return co(e,t)}var jr=null,Za=null,Jl=!1,Er=!1,Zl=!1,Ui=0;function Kt(e){e!==Za&&e.next===null&&(Za===null?jr=Za=e:Za=Za.next=e),Er=!0,Jl||(Jl=!0,Jy())}function as(e,t){if(!Zl&&Er){Zl=!0;do for(var i=!1,s=jr;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var c=0;else{var m=s.suspendedLanes,v=s.pingedLanes;c=(1<<31-wt(42|e)+1)-1,c&=l&~(m&~v),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(i=!0,mf(s,c))}else c=ge,c=Os(s,s===Re?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||Sn(s,c)||(i=!0,mf(s,c));s=s.next}while(i);Zl=!1}}function Xy(){df()}function df(){Er=Jl=!1;var e=0;Ui!==0&&lp()&&(e=Ui);for(var t=vt(),i=null,s=jr;s!==null;){var l=s.next,c=hf(s,t);c===0?(s.next=null,i===null?jr=l:i.next=l,l===null&&(Za=i)):(i=s,(e!==0||(c&3)!==0)&&(Er=!0)),s=l}Ke!==0&&Ke!==5||as(e),Ui!==0&&(Ui=0)}function hf(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var m=31-wt(c),v=1<<m,w=l[m];w===-1?((v&i)===0||(v&s)!==0)&&(l[m]=Tg(v,t)):w<=t&&(e.expiredLanes|=v),c&=~v}if(t=Re,i=ge,i=Os(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(Te===2||Te===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&uo(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Sn(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&uo(s),mo(i)){case 2:case 8:i=tu;break;case 32:i=Es;break;case 268435456:i=iu;break;default:i=Es}return s=ff.bind(null,e),i=co(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&uo(s),e.callbackPriority=2,e.callbackNode=null,2}function ff(e,t){if(Ke!==0&&Ke!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ar()&&e.callbackNode!==i)return null;var s=ge;return s=Os(e,e===Re?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Ph(e,s,t),hf(e,vt()),e.callbackNode!=null&&e.callbackNode===i?ff.bind(null,e):null)}function mf(e,t){if(Ar())return null;Ph(e,t,!0)}function Jy(){up(function(){(Se&6)!==0?co(eu,Xy):df()})}function ec(){if(Ui===0){var e=Ua;e===0&&(e=Rs,Rs<<=1,(Rs&261888)===0&&(Rs=256)),Ui=e}return Ui}function gf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ms(""+e)}function yf(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Zy(e,t,i,s,l){if(t==="submit"&&i&&i.stateNode===l){var c=gf((l[dt]||null).action),m=s.submitter;m&&(t=(t=m[dt]||null)?gf(t.formAction):m.getAttribute("formAction"),t!==null&&(c=t,m=null));var v=new Hs("action","action",null,s,l);e.push({event:v,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Ui!==0){var w=m?yf(l,m):new FormData(l);wl(i,{pending:!0,data:w,method:l.method,action:c},null,w)}}else typeof c=="function"&&(v.preventDefault(),w=m?yf(l,m):new FormData(l),wl(i,{pending:!0,data:w,method:l.method,action:c},c,w))},currentTarget:l}]})}}for(var tc=0;tc<No.length;tc++){var ic=No[tc],ep=ic.toLowerCase(),tp=ic[0].toUpperCase()+ic.slice(1);It(ep,"on"+tp)}It(Fu,"onAnimationEnd"),It(Pu,"onAnimationIteration"),It(Qu,"onAnimationStart"),It("dblclick","onDoubleClick"),It("focusin","onFocus"),It("focusout","onBlur"),It(py,"onTransitionRun"),It(vy,"onTransitionStart"),It(by,"onTransitionCancel"),It(Yu,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ip=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ns));function pf(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],l=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var m=s.length-1;0<=m;m--){var v=s[m],w=v.instance,E=v.currentTarget;if(v=v.listener,w!==c&&l.isPropagationStopped())break e;c=v,l.currentTarget=E;try{c(l)}catch(B){Gs(B)}l.currentTarget=null,c=w}else for(m=0;m<s.length;m++){if(v=s[m],w=v.instance,E=v.currentTarget,v=v.listener,w!==c&&l.isPropagationStopped())break e;c=v,l.currentTarget=E;try{c(l)}catch(B){Gs(B)}l.currentTarget=null,c=w}}}}function fe(e,t){var i=t[go];i===void 0&&(i=t[go]=new Set);var s=e+"__bubble";i.has(s)||(vf(t,e,2,!1),i.add(s))}function ac(e,t,i){var s=0;t&&(s|=4),vf(i,e,s,t)}var Rr="_reactListening"+Math.random().toString(36).slice(2);function nc(e){if(!e[Rr]){e[Rr]=!0,uu.forEach(function(i){i!=="selectionchange"&&(ip.has(i)||ac(i,!1,e),ac(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rr]||(t[Rr]=!0,ac("selectionchange",!1,t))}}function vf(e,t,i,s){switch(Pf(t)){case 2:var l=Cp;break;case 8:l=Dp;break;default:l=bc}i=l.bind(null,t,i,e),l=void 0,!To||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,i,{capture:!0,passive:l}):e.addEventListener(t,i,!0):l!==void 0?e.addEventListener(t,i,{passive:l}):e.addEventListener(t,i,!1)}function sc(e,t,i,s,l){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var v=s.stateNode.containerInfo;if(v===l)break;if(m===4)for(m=s.return;m!==null;){var w=m.tag;if((w===3||w===4)&&m.stateNode.containerInfo===l)return;m=m.return}for(;v!==null;){if(m=xa(v),m===null)return;if(w=m.tag,w===5||w===6||w===26||w===27){s=c=m;continue e}v=v.parentNode}}s=s.return}Su(function(){var E=c,B=So(i),U=[];e:{var R=Ku.get(e);if(R!==void 0){var C=Hs,F=e;switch(e){case"keypress":if(Us(i)===0)break e;case"keydown":case"keyup":C=Yg;break;case"focusin":F="focus",C=Eo;break;case"focusout":F="blur",C=Eo;break;case"beforeblur":case"afterblur":C=Eo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Ng;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Jg;break;case Fu:case Pu:case Qu:C=Hg;break;case Yu:C=ey;break;case"scroll":case"scrollend":C=Bg;break;case"wheel":C=iy;break;case"copy":case"cut":case"paste":C=Wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=ju;break;case"toggle":case"beforetoggle":C=ny}var ie=(t&4)!==0,Ee=!ie&&(e==="scroll"||e==="scrollend"),A=ie?R!==null?R+"Capture":null:R;ie=[];for(var _=E,j;_!==null;){var N=_;if(j=N.stateNode,N=N.tag,N!==5&&N!==26&&N!==27||j===null||A===null||(N=An(_,A),N!=null&&ie.push(ss(_,N,j))),Ee)break;_=_.return}0<ie.length&&(R=new C(R,F,null,i,B),U.push({event:R,listeners:ie}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",R&&i!==xo&&(F=i.relatedTarget||i.fromElement)&&(xa(F)||F[wa]))break e;if((C||R)&&(R=B.window===B?B:(R=B.ownerDocument)?R.defaultView||R.parentWindow:window,C?(F=i.relatedTarget||i.toElement,C=E,F=F?xa(F):null,F!==null&&(Ee=h(F),ie=F.tag,F!==Ee||ie!==5&&ie!==27&&ie!==6)&&(F=null)):(C=null,F=E),C!==F)){if(ie=ku,N="onMouseLeave",A="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(ie=ju,N="onPointerLeave",A="onPointerEnter",_="pointer"),Ee=C==null?R:kn(C),j=F==null?R:kn(F),R=new ie(N,_+"leave",C,i,B),R.target=Ee,R.relatedTarget=j,N=null,xa(B)===E&&(ie=new ie(A,_+"enter",F,i,B),ie.target=j,ie.relatedTarget=Ee,N=ie),Ee=N,C&&F)t:{for(ie=ap,A=C,_=F,j=0,N=A;N;N=ie(N))j++;N=0;for(var te=_;te;te=ie(te))N++;for(;0<j-N;)A=ie(A),j--;for(;0<N-j;)_=ie(_),N--;for(;j--;){if(A===_||_!==null&&A===_.alternate){ie=A;break t}A=ie(A),_=ie(_)}ie=null}else ie=null;C!==null&&bf(U,R,C,ie,!1),F!==null&&Ee!==null&&bf(U,Ee,F,ie,!0)}}e:{if(R=E?kn(E):window,C=R.nodeName&&R.nodeName.toLowerCase(),C==="select"||C==="input"&&R.type==="file")var we=Bu;else if(zu(R))if(Mu)we=my;else{we=hy;var K=dy}else C=R.nodeName,!C||C.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?E&&wo(E.elementType)&&(we=Bu):we=fy;if(we&&(we=we(e,E))){qu(U,we,i,B);break e}K&&K(e,R,E),e==="focusout"&&E&&R.type==="number"&&E.memoizedProps.value!=null&&bo(R,"number",R.value)}switch(K=E?kn(E):window,e){case"focusin":(zu(K)||K.contentEditable==="true")&&(Ca=K,qo=E,qn=null);break;case"focusout":qn=qo=Ca=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,Vu(U,i,B);break;case"selectionchange":if(yy)break;case"keydown":case"keyup":Vu(U,i,B)}var ce;if(Co)e:{switch(e){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else Ra?Du(e,i)&&(ye="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ye="onCompositionStart");ye&&(Eu&&i.locale!=="ko"&&(Ra||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Ra&&(ce=_u()):(Si=B,ko="value"in Si?Si.value:Si.textContent,Ra=!0)),K=Cr(E,ye),0<K.length&&(ye=new Au(ye,e,null,i,B),U.push({event:ye,listeners:K}),ce?ye.data=ce:(ce=Ou(i),ce!==null&&(ye.data=ce)))),(ce=ry?oy(e,i):ly(e,i))&&(ye=Cr(E,"onBeforeInput"),0<ye.length&&(K=new Au("onBeforeInput","beforeinput",null,i,B),U.push({event:K,listeners:ye}),K.data=ce)),Zy(U,e,E,i,B)}pf(U,t)})}function ss(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Cr(e,t){for(var i=t+"Capture",s=[];e!==null;){var l=e,c=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||c===null||(l=An(e,i),l!=null&&s.unshift(ss(e,l,c)),l=An(e,t),l!=null&&s.push(ss(e,l,c))),e.tag===3)return s;e=e.return}return[]}function ap(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bf(e,t,i,s,l){for(var c=t._reactName,m=[];i!==null&&i!==s;){var v=i,w=v.alternate,E=v.stateNode;if(v=v.tag,w!==null&&w===s)break;v!==5&&v!==26&&v!==27||E===null||(w=E,l?(E=An(i,c),E!=null&&m.unshift(ss(i,E,w))):l||(E=An(i,c),E!=null&&m.push(ss(i,E,w)))),i=i.return}m.length!==0&&e.push({event:t,listeners:m})}var np=/\r\n?/g,sp=/\u0000|\uFFFD/g;function wf(e){return(typeof e=="string"?e:""+e).replace(np,`
`).replace(sp,"")}function xf(e,t){return t=wf(t),wf(e)===t}function je(e,t,i,s,l,c){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Aa(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Aa(e,""+s);break;case"className":qs(e,"class",s);break;case"tabIndex":qs(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":qs(e,i,s);break;case"style":wu(e,s,c);break;case"data":if(t!=="object"){qs(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Ms(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(i==="formAction"?(t!=="input"&&je(e,t,"name",l.name,l,null),je(e,t,"formEncType",l.formEncType,l,null),je(e,t,"formMethod",l.formMethod,l,null),je(e,t,"formTarget",l.formTarget,l,null)):(je(e,t,"encType",l.encType,l,null),je(e,t,"method",l.method,l,null),je(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Ms(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=Jt);break;case"onScroll":s!=null&&fe("scroll",e);break;case"onScrollEnd":s!=null&&fe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Ms(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":fe("beforetoggle",e),fe("toggle",e),zs(e,"popover",s);break;case"xlinkActuate":Xt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Xt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Xt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Xt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Xt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Xt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Xt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":zs(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=zg.get(i)||i,zs(e,i,s))}}function rc(e,t,i,s,l,c){switch(i){case"style":wu(e,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(i=s.__html,i!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Aa(e,s):(typeof s=="number"||typeof s=="bigint")&&Aa(e,""+s);break;case"onScroll":s!=null&&fe("scroll",e);break;case"onScrollEnd":s!=null&&fe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Jt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!du.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(l=i.endsWith("Capture"),t=i.slice(2,l?i.length-7:void 0),c=e[dt]||null,c=c!=null?c[i]:null,typeof c=="function"&&e.removeEventListener(t,c,l),typeof s=="function")){typeof c!="function"&&c!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,l);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):zs(e,i,s)}}}function st(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fe("error",e),fe("load",e);var s=!1,l=!1,c;for(c in i)if(i.hasOwnProperty(c)){var m=i[c];if(m!=null)switch(c){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:je(e,t,c,m,i,null)}}l&&je(e,t,"srcSet",i.srcSet,i,null),s&&je(e,t,"src",i.src,i,null);return;case"input":fe("invalid",e);var v=c=m=l=null,w=null,E=null;for(s in i)if(i.hasOwnProperty(s)){var B=i[s];if(B!=null)switch(s){case"name":l=B;break;case"type":m=B;break;case"checked":w=B;break;case"defaultChecked":E=B;break;case"value":c=B;break;case"defaultValue":v=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,t));break;default:je(e,t,s,B,i,null)}}yu(e,c,v,w,E,m,l,!1);return;case"select":fe("invalid",e),s=m=c=null;for(l in i)if(i.hasOwnProperty(l)&&(v=i[l],v!=null))switch(l){case"value":c=v;break;case"defaultValue":m=v;break;case"multiple":s=v;default:je(e,t,l,v,i,null)}t=c,i=m,e.multiple=!!s,t!=null?ka(e,!!s,t,!1):i!=null&&ka(e,!!s,i,!0);return;case"textarea":fe("invalid",e),c=l=s=null;for(m in i)if(i.hasOwnProperty(m)&&(v=i[m],v!=null))switch(m){case"value":s=v;break;case"defaultValue":l=v;break;case"children":c=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:je(e,t,m,v,i,null)}vu(e,s,l,c);return;case"option":for(w in i)i.hasOwnProperty(w)&&(s=i[w],s!=null)&&(w==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":je(e,t,w,s,i,null));return;case"dialog":fe("beforetoggle",e),fe("toggle",e),fe("cancel",e),fe("close",e);break;case"iframe":case"object":fe("load",e);break;case"video":case"audio":for(s=0;s<ns.length;s++)fe(ns[s],e);break;case"image":fe("error",e),fe("load",e);break;case"details":fe("toggle",e);break;case"embed":case"source":case"link":fe("error",e),fe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in i)if(i.hasOwnProperty(E)&&(s=i[E],s!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:je(e,t,E,s,i,null)}return;default:if(wo(t)){for(B in i)i.hasOwnProperty(B)&&(s=i[B],s!==void 0&&rc(e,t,B,s,i,void 0));return}}for(v in i)i.hasOwnProperty(v)&&(s=i[v],s!=null&&je(e,t,v,s,i,null))}function rp(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,c=null,m=null,v=null,w=null,E=null,B=null;for(C in i){var U=i[C];if(i.hasOwnProperty(C)&&U!=null)switch(C){case"checked":break;case"value":break;case"defaultValue":w=U;default:s.hasOwnProperty(C)||je(e,t,C,null,s,U)}}for(var R in s){var C=s[R];if(U=i[R],s.hasOwnProperty(R)&&(C!=null||U!=null))switch(R){case"type":c=C;break;case"name":l=C;break;case"checked":E=C;break;case"defaultChecked":B=C;break;case"value":m=C;break;case"defaultValue":v=C;break;case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(o(137,t));break;default:C!==U&&je(e,t,R,C,s,U)}}vo(e,m,v,w,E,B,c,l);return;case"select":C=m=v=R=null;for(c in i)if(w=i[c],i.hasOwnProperty(c)&&w!=null)switch(c){case"value":break;case"multiple":C=w;default:s.hasOwnProperty(c)||je(e,t,c,null,s,w)}for(l in s)if(c=s[l],w=i[l],s.hasOwnProperty(l)&&(c!=null||w!=null))switch(l){case"value":R=c;break;case"defaultValue":v=c;break;case"multiple":m=c;default:c!==w&&je(e,t,l,c,s,w)}t=v,i=m,s=C,R!=null?ka(e,!!i,R,!1):!!s!=!!i&&(t!=null?ka(e,!!i,t,!0):ka(e,!!i,i?[]:"",!1));return;case"textarea":C=R=null;for(v in i)if(l=i[v],i.hasOwnProperty(v)&&l!=null&&!s.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:je(e,t,v,null,s,l)}for(m in s)if(l=s[m],c=i[m],s.hasOwnProperty(m)&&(l!=null||c!=null))switch(m){case"value":R=l;break;case"defaultValue":C=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(o(91));break;default:l!==c&&je(e,t,m,l,s,c)}pu(e,R,C);return;case"option":for(var F in i)R=i[F],i.hasOwnProperty(F)&&R!=null&&!s.hasOwnProperty(F)&&(F==="selected"?e.selected=!1:je(e,t,F,null,s,R));for(w in s)R=s[w],C=i[w],s.hasOwnProperty(w)&&R!==C&&(R!=null||C!=null)&&(w==="selected"?e.selected=R&&typeof R!="function"&&typeof R!="symbol":je(e,t,w,R,s,C));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in i)R=i[ie],i.hasOwnProperty(ie)&&R!=null&&!s.hasOwnProperty(ie)&&je(e,t,ie,null,s,R);for(E in s)if(R=s[E],C=i[E],s.hasOwnProperty(E)&&R!==C&&(R!=null||C!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(137,t));break;default:je(e,t,E,R,s,C)}return;default:if(wo(t)){for(var Ee in i)R=i[Ee],i.hasOwnProperty(Ee)&&R!==void 0&&!s.hasOwnProperty(Ee)&&rc(e,t,Ee,void 0,s,R);for(B in s)R=s[B],C=i[B],!s.hasOwnProperty(B)||R===C||R===void 0&&C===void 0||rc(e,t,B,R,s,C);return}}for(var A in i)R=i[A],i.hasOwnProperty(A)&&R!=null&&!s.hasOwnProperty(A)&&je(e,t,A,null,s,R);for(U in s)R=s[U],C=i[U],!s.hasOwnProperty(U)||R===C||R==null&&C==null||je(e,t,U,R,s,C)}function Sf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function op(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var l=i[s],c=l.transferSize,m=l.initiatorType,v=l.duration;if(c&&v&&Sf(m)){for(m=0,v=l.responseEnd,s+=1;s<i.length;s++){var w=i[s],E=w.startTime;if(E>v)break;var B=w.transferSize,U=w.initiatorType;B&&Sf(U)&&(w=w.responseEnd,m+=B*(w<v?1:(v-E)/(w-E)))}if(--s,t+=8*(c+m)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var oc=null,lc=null;function Dr(e){return e.nodeType===9?e:e.ownerDocument}function _f(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uc=null;function lp(){var e=window.event;return e&&e.type==="popstate"?e===uc?!1:(uc=e,!0):(uc=null,!1)}var kf=typeof setTimeout=="function"?setTimeout:void 0,cp=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,up=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(e){return Af.resolve(null).then(e).catch(dp)}:kf;function dp(e){setTimeout(function(){throw e})}function Li(e){return e==="head"}function jf(e,t){var i=t,s=0;do{var l=i.nextSibling;if(e.removeChild(i),l&&l.nodeType===8)if(i=l.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(l),nn(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")rs(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,rs(i);for(var c=i.firstChild;c;){var m=c.nextSibling,v=c.nodeName;c[Tn]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&c.rel.toLowerCase()==="stylesheet"||i.removeChild(c),c=m}}else i==="body"&&rs(e.ownerDocument.body);i=l}while(i);nn(t)}function Ef(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function dc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":dc(i),yo(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function hp(e,t,i,s){for(;e.nodeType===1;){var l=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Tn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Lt(e.nextSibling),e===null)break}return null}function fp(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Lt(e.nextSibling),e===null))return null;return e}function Rf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Lt(e.nextSibling),e===null))return null;return e}function hc(e){return e.data==="$?"||e.data==="$~"}function fc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function mp(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var mc=null;function Cf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return Lt(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Of(e,t,i){switch(t=Dr(i),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function rs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);yo(e)}var Ht=new Map,zf=new Set;function Or(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mi=W.d;W.d={f:gp,r:yp,D:pp,C:vp,L:bp,m:wp,X:Sp,S:xp,M:_p};function gp(){var e=mi.f(),t=_r();return e||t}function yp(e){var t=Sa(e);t!==null&&t.tag===5&&t.type==="form"?Yd(t):mi.r(e)}var en=typeof document>"u"?null:document;function qf(e,t,i){var s=en;if(s&&typeof t=="string"&&t){var l=Ot(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof i=="string"&&(l+='[crossorigin="'+i+'"]'),zf.has(l)||(zf.add(l),e={rel:e,crossOrigin:i,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),st(t,"link",e),Je(t),s.head.appendChild(t)))}}function pp(e){mi.D(e),qf("dns-prefetch",e,null)}function vp(e,t){mi.C(e,t),qf("preconnect",e,t)}function bp(e,t,i){mi.L(e,t,i);var s=en;if(s&&e&&t){var l='link[rel="preload"][as="'+Ot(t)+'"]';t==="image"&&i&&i.imageSrcSet?(l+='[imagesrcset="'+Ot(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(l+='[imagesizes="'+Ot(i.imageSizes)+'"]')):l+='[href="'+Ot(e)+'"]';var c=l;switch(t){case"style":c=tn(e);break;case"script":c=an(e)}Ht.has(c)||(e=T({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ht.set(c,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(os(c))||t==="script"&&s.querySelector(ls(c))||(t=s.createElement("link"),st(t,"link",e),Je(t),s.head.appendChild(t)))}}function wp(e,t){mi.m(e,t);var i=en;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Ot(s)+'"][href="'+Ot(e)+'"]',c=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=an(e)}if(!Ht.has(c)&&(e=T({rel:"modulepreload",href:e},t),Ht.set(c,e),i.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ls(c)))return}s=i.createElement("link"),st(s,"link",e),Je(s),i.head.appendChild(s)}}}function xp(e,t,i){mi.S(e,t,i);var s=en;if(s&&e){var l=_a(s).hoistableStyles,c=tn(e);t=t||"default";var m=l.get(c);if(!m){var v={loading:0,preload:null};if(m=s.querySelector(os(c)))v.loading=5;else{e=T({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ht.get(c))&&gc(e,i);var w=m=s.createElement("link");Je(w),st(w,"link",e),w._p=new Promise(function(E,B){w.onload=E,w.onerror=B}),w.addEventListener("load",function(){v.loading|=1}),w.addEventListener("error",function(){v.loading|=2}),v.loading|=4,zr(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:v},l.set(c,m)}}}function Sp(e,t){mi.X(e,t);var i=en;if(i&&e){var s=_a(i).hoistableScripts,l=an(e),c=s.get(l);c||(c=i.querySelector(ls(l)),c||(e=T({src:e,async:!0},t),(t=Ht.get(l))&&yc(e,t),c=i.createElement("script"),Je(c),st(c,"link",e),i.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(l,c))}}function _p(e,t){mi.M(e,t);var i=en;if(i&&e){var s=_a(i).hoistableScripts,l=an(e),c=s.get(l);c||(c=i.querySelector(ls(l)),c||(e=T({src:e,async:!0,type:"module"},t),(t=Ht.get(l))&&yc(e,t),c=i.createElement("script"),Je(c),st(c,"link",e),i.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(l,c))}}function Bf(e,t,i,s){var l=(l=de.current)?Or(l):null;if(!l)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=tn(i.href),i=_a(l).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=tn(i.href);var c=_a(l).hoistableStyles,m=c.get(e);if(m||(l=l.ownerDocument||l,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,m),(c=l.querySelector(os(e)))&&!c._p&&(m.instance=c,m.state.loading=5),Ht.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ht.set(e,i),c||Tp(l,e,i,m.state))),t&&s===null)throw Error(o(528,""));return m}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=an(i),i=_a(l).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function tn(e){return'href="'+Ot(e)+'"'}function os(e){return'link[rel="stylesheet"]['+e+"]"}function Mf(e){return T({},e,{"data-precedence":e.precedence,precedence:null})}function Tp(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),st(t,"link",i),Je(t),e.head.appendChild(t))}function an(e){return'[src="'+Ot(e)+'"]'}function ls(e){return"script[async]"+e}function Nf(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Ot(i.href)+'"]');if(s)return t.instance=s,Je(s),s;var l=T({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Je(s),st(s,"style",l),zr(s,i.precedence,e),t.instance=s;case"stylesheet":l=tn(i.href);var c=e.querySelector(os(l));if(c)return t.state.loading|=4,t.instance=c,Je(c),c;s=Mf(i),(l=Ht.get(l))&&gc(s,l),c=(e.ownerDocument||e).createElement("link"),Je(c);var m=c;return m._p=new Promise(function(v,w){m.onload=v,m.onerror=w}),st(c,"link",s),t.state.loading|=4,zr(c,i.precedence,e),t.instance=c;case"script":return c=an(i.src),(l=e.querySelector(ls(c)))?(t.instance=l,Je(l),l):(s=i,(l=Ht.get(c))&&(s=T({},i),yc(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),Je(l),st(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,zr(s,i.precedence,e));return t.instance}function zr(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,c=l,m=0;m<s.length;m++){var v=s[m];if(v.dataset.precedence===t)c=v;else if(c!==l)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function gc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var qr=null;function Uf(e,t,i){if(qr===null){var s=new Map,l=qr=new Map;l.set(i,s)}else l=qr,s=l.get(i),s||(s=new Map,l.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),l=0;l<i.length;l++){var c=i[l];if(!(c[Tn]||c[tt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var m=c.getAttribute(t)||"";m=e+m;var v=s.get(m);v?v.push(c):s.set(m,[c])}}return s}function Lf(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function kp(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Hf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ap(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var l=tn(s.href),c=t.querySelector(os(l));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Br.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=c,Je(c);return}c=t.ownerDocument||t,s=Mf(s),(l=Ht.get(l))&&gc(s,l),c=c.createElement("link"),Je(c);var m=c;m._p=new Promise(function(v,w){m.onload=v,m.onerror=w}),st(c,"link",s),i.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Br.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var pc=0;function jp(e,t){return e.stylesheets&&e.count===0&&Nr(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&Nr(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&pc===0&&(pc=62500*op());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Nr(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>pc?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function Br(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mr=null;function Nr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mr=new Map,t.forEach(Ep,e),Mr=null,Br.call(e))}function Ep(e,t){if(!(t.state.loading&4)){var i=Mr.get(e);if(i)var s=i.get(null);else{i=new Map,Mr.set(e,i);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<l.length;c++){var m=l[c];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(i.set(m.dataset.precedence,m),s=m)}s&&i.set(null,s)}l=t.instance,m=l.getAttribute("data-precedence"),c=i.get(m)||s,c===s&&i.set(null,l),i.set(m,l),this.count++,s=Br.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),c?c.parentNode.insertBefore(l,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var cs={$$typeof:M,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Rp(e,t,i,s,l,c,m,v,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ho(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ho(0),this.hiddenUpdates=ho(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=c,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function If(e,t,i,s,l,c,m,v,w,E,B,U){return e=new Rp(e,t,i,m,w,E,B,U,v),t=1,c===!0&&(t|=24),c=St(3,null,null,t),e.current=c,c.stateNode=e,t=Ko(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:s,isDehydrated:i,cache:t},el(c),e}function Wf(e){return e?(e=za,e):za}function Gf(e,t,i,s,l,c){l=Wf(l),s.context===null?s.context=l:s.pendingContext=l,s=Ei(t),s.payload={element:i},c=c===void 0?null:c,c!==null&&(s.callback=c),i=Ri(e,s,t),i!==null&&(pt(i,e,t),In(i,e,t))}function Vf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function vc(e,t){Vf(e,t),(e=e.alternate)&&Vf(e,t)}function $f(e){if(e.tag===13||e.tag===31){var t=Zi(e,67108864);t!==null&&pt(t,e,67108864),vc(e,67108864)}}function Ff(e){if(e.tag===13||e.tag===31){var t=jt();t=fo(t);var i=Zi(e,t);i!==null&&pt(i,e,t),vc(e,t)}}var Ur=!0;function Cp(e,t,i,s){var l=D.T;D.T=null;var c=W.p;try{W.p=2,bc(e,t,i,s)}finally{W.p=c,D.T=l}}function Dp(e,t,i,s){var l=D.T;D.T=null;var c=W.p;try{W.p=8,bc(e,t,i,s)}finally{W.p=c,D.T=l}}function bc(e,t,i,s){if(Ur){var l=wc(s);if(l===null)sc(e,t,s,Lr,i),Qf(e,s);else if(zp(l,e,t,i,s))s.stopPropagation();else if(Qf(e,s),t&4&&-1<Op.indexOf(e)){for(;l!==null;){var c=Sa(l);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var m=Qi(c.pendingLanes);if(m!==0){var v=c;for(v.pendingLanes|=2,v.entangledLanes|=2;m;){var w=1<<31-wt(m);v.entanglements[1]|=w,m&=~w}Kt(c),(Se&6)===0&&(xr=vt()+500,as(0))}}break;case 31:case 13:v=Zi(c,2),v!==null&&pt(v,c,2),_r(),vc(c,2)}if(c=wc(s),c===null&&sc(e,t,s,Lr,i),c===l)break;l=c}l!==null&&s.stopPropagation()}else sc(e,t,s,null,i)}}function wc(e){return e=So(e),xc(e)}var Lr=null;function xc(e){if(Lr=null,e=xa(e),e!==null){var t=h(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=f(t),e!==null)return e;e=null}else if(i===31){if(e=g(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Lr=e,null}function Pf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pg()){case eu:return 2;case tu:return 8;case Es:case vg:return 32;case iu:return 268435456;default:return 32}default:return 32}}var Sc=!1,Hi=null,Ii=null,Wi=null,us=new Map,ds=new Map,Gi=[],Op="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qf(e,t){switch(e){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(t.pointerId)}}function hs(e,t,i,s,l,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:c,targetContainers:[l]},t!==null&&(t=Sa(t),t!==null&&$f(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function zp(e,t,i,s,l){switch(t){case"focusin":return Hi=hs(Hi,e,t,i,s,l),!0;case"dragenter":return Ii=hs(Ii,e,t,i,s,l),!0;case"mouseover":return Wi=hs(Wi,e,t,i,s,l),!0;case"pointerover":var c=l.pointerId;return us.set(c,hs(us.get(c)||null,e,t,i,s,l)),!0;case"gotpointercapture":return c=l.pointerId,ds.set(c,hs(ds.get(c)||null,e,t,i,s,l)),!0}return!1}function Yf(e){var t=xa(e.target);if(t!==null){var i=h(t);if(i!==null){if(t=i.tag,t===13){if(t=f(i),t!==null){e.blockedOn=t,lu(e.priority,function(){Ff(i)});return}}else if(t===31){if(t=g(i),t!==null){e.blockedOn=t,lu(e.priority,function(){Ff(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=wc(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);xo=s,i.target.dispatchEvent(s),xo=null}else return t=Sa(i),t!==null&&$f(t),e.blockedOn=i,!1;t.shift()}return!0}function Kf(e,t,i){Hr(e)&&i.delete(t)}function qp(){Sc=!1,Hi!==null&&Hr(Hi)&&(Hi=null),Ii!==null&&Hr(Ii)&&(Ii=null),Wi!==null&&Hr(Wi)&&(Wi=null),us.forEach(Kf),ds.forEach(Kf)}function Ir(e,t){e.blockedOn===t&&(e.blockedOn=null,Sc||(Sc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,qp)))}var Wr=null;function Xf(e){Wr!==e&&(Wr=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wr===e&&(Wr=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(xc(s||i)===null)continue;break}var c=Sa(i);c!==null&&(e.splice(t,3),t-=3,wl(c,{pending:!0,data:l,method:i.method,action:s},s,l))}}))}function nn(e){function t(w){return Ir(w,e)}Hi!==null&&Ir(Hi,e),Ii!==null&&Ir(Ii,e),Wi!==null&&Ir(Wi,e),us.forEach(t),ds.forEach(t);for(var i=0;i<Gi.length;i++){var s=Gi[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Gi.length&&(i=Gi[0],i.blockedOn===null);)Yf(i),i.blockedOn===null&&Gi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var l=i[s],c=i[s+1],m=l[dt]||null;if(typeof c=="function")m||Xf(i);else if(m){var v=null;if(c&&c.hasAttribute("formAction")){if(l=c,m=c[dt]||null)v=m.formAction;else if(xc(l)!==null)continue}else v=m.action;typeof v=="function"?i[s+1]=v:(i.splice(s,3),s-=3),Xf(i)}}}function Jf(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(m){return l=m})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function _c(e){this._internalRoot=e}Gr.prototype.render=_c.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var i=t.current,s=jt();Gf(i,s,e,t,null,null)},Gr.prototype.unmount=_c.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gf(e.current,2,null,e,null,null),_r(),t[wa]=null}};function Gr(e){this._internalRoot=e}Gr.prototype.unstable_scheduleHydration=function(e){if(e){var t=ou();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Gi.length&&t!==0&&t<Gi[i].priority;i++);Gi.splice(i,0,e),i===0&&Yf(e)}};var Zf=a.version;if(Zf!=="19.2.4")throw Error(o(527,Zf,"19.2.4"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var Bp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vr.isDisabled&&Vr.supportsFiber)try{xn=Vr.inject(Bp),bt=Vr}catch{}}return ms.createRoot=function(e,t){if(!u(e))throw Error(o(299));var i=!1,s="",l=sh,c=rh,m=oh;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=If(e,1,!1,null,null,i,s,null,l,c,m,Jf),e[wa]=t.current,nc(e),new _c(t)},ms.hydrateRoot=function(e,t,i){if(!u(e))throw Error(o(299));var s=!1,l="",c=sh,m=rh,v=oh,w=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(c=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.formState!==void 0&&(w=i.formState)),t=If(e,1,!0,t,i??null,s,l,w,c,m,v,Jf),t.context=Wf(null),i=t.current,s=jt(),s=fo(s),l=Ei(s),l.callback=null,Ri(i,l,s),i=s,t.current.lanes=i,_n(t,i),Kt(t),e[wa]=t.current,nc(e),new Gr(t)},ms.version="19.2.4",ms}var cm;function $p(){if(cm)return Ac.exports;cm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Ac.exports=Vp(),Ac.exports}var Fp=$p();const um={light:{bg:"#F8F9FA",surface:"#FFFFFF",surfaceHover:"#F1F5F9",surfaceActive:"#E8F4F5",primary:"#0D7377",primaryLight:"#E8F4F5",primaryDark:"#095557",text:"#1A1A2E",textSecondary:"#4A5568",textMuted:"#718096",textDim:"#A0AEC0",border:"#E2E8F0",borderLight:"#F1F5F9",success:"#059669",successBg:"#ECFDF5",error:"#DC2626",errorBg:"#FEF2F2",warning:"#D97706",warningBg:"#FFFBEB",answerBg:"#ECFDF5",answerBorder:"#059669",answerText:"#065F46",rsvpBg:"#FFFFFF",tabBar:"#FFFFFF",tabBarBorder:"#E2E8F0",tabActive:"#0D7377",tabInactive:"#A0AEC0",shadow:"0 1px 3px rgba(0,0,0,0.08)",shadowMd:"0 4px 6px rgba(0,0,0,0.07)"},dark:{bg:"#121212",surface:"#1E1E1E",surfaceHover:"#2A2A2A",surfaceActive:"#1A3A3B",primary:"#4DB6AC",primaryLight:"#1A3A3B",primaryDark:"#80CBC4",text:"#E8E8E8",textSecondary:"#B0B0B0",textMuted:"#808080",textDim:"#555555",border:"#333333",borderLight:"#2A2A2A",success:"#34D399",successBg:"#064E3B",error:"#F87171",errorBg:"#7F1D1D",warning:"#FBBF24",warningBg:"#78350F",answerBg:"#064E3B",answerBorder:"#34D399",answerText:"#A7F3D0",rsvpBg:"#000000",tabBar:"#1E1E1E",tabBarBorder:"#333333",tabActive:"#4DB6AC",tabInactive:"#666666",shadow:"none",shadowMd:"none"}},dm={light:{equipment:"#2563EB",digital:"#7C3AED",radprotection:"#DC2626",doselimits:"#D97706",radbio:"#059669",skineffects:"#DB2777",qa:"#0891B2"},dark:{equipment:"#60A5FA",digital:"#A78BFA",radprotection:"#F87171",doselimits:"#FBBF24",radbio:"#34D399",skineffects:"#F472B6",qa:"#22D3EE"}},Im=ue.createContext();function Pp({children:n}){const[a,r]=ue.useState(()=>{try{const f=localStorage.getItem("fluoro_theme");if(f!==null)return f==="dark";const g=localStorage.getItem("fluoro_darkMode");return g!==null?g==="true":!1}catch{return!1}}),o=a?um.dark:um.light,u=a?dm.dark:dm.light;ue.useEffect(()=>{localStorage.setItem("fluoro_theme",a?"dark":"light"),document.body.style.background=o.bg,document.querySelector('meta[name="theme-color"]')?.setAttribute("content",o.bg)},[a,o.bg]);const h=()=>r(f=>!f);return d.jsx(Im.Provider,{value:{isDark:a,theme:o,domainColors:u,toggleTheme:h},children:n})}function ve(){const n=ue.useContext(Im);if(!n)throw new Error("useTheme must be used within ThemeProvider");return n}function to(n,a){var r={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&a.indexOf(o)<0&&(r[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(n);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(n,o[u])&&(r[o[u]]=n[o[u]]);return r}function Qp(n,a,r,o){function u(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function g(b){try{p(o.next(b))}catch(T){f(T)}}function y(b){try{p(o.throw(b))}catch(T){f(T)}}function p(b){b.done?h(b.value):u(b.value).then(g,y)}p((o=o.apply(n,a||[])).next())})}const Yp=n=>n?(...a)=>n(...a):(...a)=>fetch(...a);class Kc extends Error{constructor(a,r="FunctionsError",o){super(a),this.name=r,this.context=o}}class Kp extends Kc{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class hm extends Kc{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class fm extends Kc{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Uc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Uc||(Uc={}));class Xp{constructor(a,{headers:r={},customFetch:o,region:u=Uc.Any}={}){this.url=a,this.headers=r,this.region=u,this.fetch=Yp(o)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return Qp(this,arguments,void 0,function*(r,o={}){var u;let h,f;try{const{headers:g,method:y,body:p,signal:b,timeout:T}=o;let x={},{region:k}=o;k||(k=this.region);const z=new URL(`${this.url}/${r}`);k&&k!=="any"&&(x["x-region"]=k,z.searchParams.set("forceFunctionRegion",k));let H;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",H=p):typeof p=="string"?(x["Content-Type"]="text/plain",H=p):typeof FormData<"u"&&p instanceof FormData?H=p:(x["Content-Type"]="application/json",H=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?H=JSON.stringify(p):H=p;let q=b;T&&(f=new AbortController,h=setTimeout(()=>f.abort(),T),b?(q=f.signal,b.addEventListener("abort",()=>f.abort())):q=f.signal);const I=yield this.fetch(z.toString(),{method:y||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),g),body:H,signal:q}).catch(Z=>{throw new Kp(Z)}),O=I.headers.get("x-relay-error");if(O&&O==="true")throw new hm(I);if(!I.ok)throw new fm(I);let M=((u=I.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),$;return M==="application/json"?$=yield I.json():M==="application/octet-stream"||M==="application/pdf"?$=yield I.blob():M==="text/event-stream"?$=I:M==="multipart/form-data"?$=yield I.formData():$=yield I.text(),{data:$,error:null,response:I}}catch(g){return{data:null,error:g,response:g instanceof fm||g instanceof hm?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var Jp=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},Zp=class{constructor(n){var a,r,o;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(a=n.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=n.signal,this.isMaybeSingle=(r=n.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(o=n.urlLengthLimit)!==null&&o!==void 0?o:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=new Headers(this.headers),this.headers.set(n,a),this}then(n,a){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,g=null,y=null,p=h.status,b=h.statusText;if(h.ok){var T,x;if(r.method!=="HEAD"){var k;const I=await h.text();I===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((k=r.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?g=I:g=JSON.parse(I))}const H=(T=r.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),q=(x=h.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");H&&q&&q.length>1&&(y=parseInt(q[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,p=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var z;const H=await h.text();try{f=JSON.parse(H),Array.isArray(f)&&h.status===404&&(g=[],f=null,p=200,b="OK")}catch{h.status===404&&H===""?(p=204,b="No Content"):f={message:H}}if(f&&r.isMaybeSingle&&(!(f==null||(z=f.details)===null||z===void 0)&&z.includes("0 rows"))&&(f=null,p=200,b="OK"),f&&r.shouldThrowOnError)throw new Jp(f)}return{error:f,data:g,count:y,status:p,statusText:b}});return this.shouldThrowOnError||(u=u.catch(h=>{var f;let g="",y="",p="";const b=h?.cause;if(b){var T,x,k,z;const I=(T=b?.message)!==null&&T!==void 0?T:"",O=(x=b?.code)!==null&&x!==void 0?x:"";g=`${(k=h?.name)!==null&&k!==void 0?k:"FetchError"}: ${h?.message}`,g+=`

Caused by: ${(z=b?.name)!==null&&z!==void 0?z:"Error"}: ${I}`,O&&(g+=` (${O})`),b?.stack&&(g+=`
${b.stack}`)}else{var H;g=(H=h?.stack)!==null&&H!==void 0?H:""}const q=this.url.toString().length;return h?.name==="AbortError"||h?.code==="ABORT_ERR"?(p="",y="Request was aborted (timeout or manual cancellation)",q>this.urlLengthLimit&&(y+=`. Note: Your request URL is ${q} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(b?.name==="HeadersOverflowError"||b?.code==="UND_ERR_HEADERS_OVERFLOW")&&(p="",y="HTTP headers exceeded server limits (typically 16KB)",q>this.urlLengthLimit&&(y+=`. Your request URL is ${q} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:g,hint:y,code:p},data:null,count:null,status:0,statusText:""}})),u.then(n,a)}returns(){return this}overrideTypes(){return this}},e0=class extends Zp{select(n){let a=!1;const r=(n??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:a=!0,nullsFirst:r,foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${n}.${a?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:r=a}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,a,{foreignTable:r,referencedTable:o=r}={}){const u=typeof o>"u"?"offset":`${o}.offset`,h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(h,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:a=!1,settings:r=!1,buffers:o=!1,wal:u=!1,format:h="text"}={}){var f;const g=[n?"analyze":null,a?"verbose":null,r?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${y}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const mm=new RegExp("[,()]");var un=class extends e0{eq(n,a){return this.url.searchParams.append(n,`eq.${a}`),this}neq(n,a){return this.url.searchParams.append(n,`neq.${a}`),this}gt(n,a){return this.url.searchParams.append(n,`gt.${a}`),this}gte(n,a){return this.url.searchParams.append(n,`gte.${a}`),this}lt(n,a){return this.url.searchParams.append(n,`lt.${a}`),this}lte(n,a){return this.url.searchParams.append(n,`lte.${a}`),this}like(n,a){return this.url.searchParams.append(n,`like.${a}`),this}likeAllOf(n,a){return this.url.searchParams.append(n,`like(all).{${a.join(",")}}`),this}likeAnyOf(n,a){return this.url.searchParams.append(n,`like(any).{${a.join(",")}}`),this}ilike(n,a){return this.url.searchParams.append(n,`ilike.${a}`),this}ilikeAllOf(n,a){return this.url.searchParams.append(n,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(n,a){return this.url.searchParams.append(n,`ilike(any).{${a.join(",")}}`),this}regexMatch(n,a){return this.url.searchParams.append(n,`match.${a}`),this}regexIMatch(n,a){return this.url.searchParams.append(n,`imatch.${a}`),this}is(n,a){return this.url.searchParams.append(n,`is.${a}`),this}isDistinct(n,a){return this.url.searchParams.append(n,`isdistinct.${a}`),this}in(n,a){const r=Array.from(new Set(a)).map(o=>typeof o=="string"&&mm.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${r})`),this}notIn(n,a){const r=Array.from(new Set(a)).map(o=>typeof o=="string"&&mm.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`not.in.(${r})`),this}contains(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cs.{${a.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(a)}`),this}containedBy(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cd.{${a.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(a)}`),this}rangeGt(n,a){return this.url.searchParams.append(n,`sr.${a}`),this}rangeGte(n,a){return this.url.searchParams.append(n,`nxl.${a}`),this}rangeLt(n,a){return this.url.searchParams.append(n,`sl.${a}`),this}rangeLte(n,a){return this.url.searchParams.append(n,`nxr.${a}`),this}rangeAdjacent(n,a){return this.url.searchParams.append(n,`adj.${a}`),this}overlaps(n,a){return typeof a=="string"?this.url.searchParams.append(n,`ov.${a}`):this.url.searchParams.append(n,`ov.{${a.join(",")}}`),this}textSearch(n,a,{config:r,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(n,`${u}fts${h}.${a}`),this}match(n){return Object.entries(n).forEach(([a,r])=>{this.url.searchParams.append(a,`eq.${r}`)}),this}not(n,a,r){return this.url.searchParams.append(n,`not.${a}.${r}`),this}or(n,{foreignTable:a,referencedTable:r=a}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,a,r){return this.url.searchParams.append(n,`${a}.${r}`),this}},t0=class{constructor(n,{headers:a={},schema:r,fetch:o,urlLengthLimit:u=8e3}){this.url=n,this.headers=new Headers(a),this.schema=r,this.fetch=o,this.urlLengthLimit=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,a){const{head:r=!1,count:o}=a??{},u=r?"HEAD":"GET";let h=!1;const f=(n??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join(""),{url:g,headers:y}=this.cloneRequestState();return g.searchParams.set("select",f),o&&y.append("Prefer",`count=${o}`),new un({method:u,url:g,headers:y,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:a,defaultToNull:r=!0}={}){var o;const u="POST",{url:h,headers:f}=this.cloneRequestState();if(a&&f.append("Prefer",`count=${a}`),r||f.append("Prefer","missing=default"),Array.isArray(n)){const g=n.reduce((y,p)=>y.concat(Object.keys(p)),[]);if(g.length>0){const y=[...new Set(g)].map(p=>`"${p}"`);h.searchParams.set("columns",y.join(","))}}return new un({method:u,url:h,headers:f,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:a,ignoreDuplicates:r=!1,count:o,defaultToNull:u=!0}={}){var h;const f="POST",{url:g,headers:y}=this.cloneRequestState();if(y.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),a!==void 0&&g.searchParams.set("on_conflict",a),o&&y.append("Prefer",`count=${o}`),u||y.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((b,T)=>b.concat(Object.keys(T)),[]);if(p.length>0){const b=[...new Set(p)].map(T=>`"${T}"`);g.searchParams.set("columns",b.join(","))}}return new un({method:f,url:g,headers:y,schema:this.schema,body:n,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:a}={}){var r;const o="PATCH",{url:u,headers:h}=this.cloneRequestState();return a&&h.append("Prefer",`count=${a}`),new un({method:o,url:u,headers:h,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var a;const r="DELETE",{url:o,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new un({method:r,url:o,headers:u,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}};function bs(n){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},bs(n)}function i0(n,a){if(bs(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var o=r.call(n,a);if(bs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function a0(n){var a=i0(n,"string");return bs(a)=="symbol"?a:a+""}function n0(n,a,r){return(a=a0(a))in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n}function gm(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),r.push.apply(r,o)}return r}function $r(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?gm(Object(r),!0).forEach(function(o){n0(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):gm(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}var s0=class Wm{constructor(a,{headers:r={},schema:o,fetch:u,timeout:h,urlLengthLimit:f=8e3}={}){this.url=a,this.headers=new Headers(r),this.schemaName=o,this.urlLengthLimit=f;const g=u??globalThis.fetch;h!==void 0&&h>0?this.fetch=(y,p)=>{const b=new AbortController,T=setTimeout(()=>b.abort(),h),x=p?.signal;if(x){if(x.aborted)return clearTimeout(T),g(y,p);const k=()=>{clearTimeout(T),b.abort()};return x.addEventListener("abort",k,{once:!0}),g(y,$r($r({},p),{},{signal:b.signal})).finally(()=>{clearTimeout(T),x.removeEventListener("abort",k)})}return g(y,$r($r({},p),{},{signal:b.signal})).finally(()=>clearTimeout(T))}:this.fetch=g}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new t0(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(a){return new Wm(this.url,{headers:this.headers,schema:a,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(a,r={},{head:o=!1,get:u=!1,count:h}={}){var f;let g;const y=new URL(`${this.url}/rpc/${a}`);let p;const b=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(b)),T=o&&Object.values(r).some(b);T?(g="POST",p=r):o||u?(g=o?"HEAD":"GET",Object.entries(r).filter(([k,z])=>z!==void 0).map(([k,z])=>[k,Array.isArray(z)?`{${z.join(",")}}`:`${z}`]).forEach(([k,z])=>{y.searchParams.append(k,z)})):(g="POST",p=r);const x=new Headers(this.headers);return T?x.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&x.set("Prefer",`count=${h}`),new un({method:g,url:y,headers:x,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class r0{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const o=r.versions;if(o&&o.node){const u=o.node,h=parseInt(u.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let r=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(r+=`

Suggested solution: ${a.workaround}`),new Error(r)}static createWebSocket(a,r){const o=this.getWebSocketConstructor();return new o(a,r)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const o0="2.98.0",l0=`realtime-js/${o0}`,c0="1.0.0",Gm="2.0.0",ym=Gm,Lc=1e4,u0=1e3,d0=100;var $i;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})($i||($i={}));var Xe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Xe||(Xe={}));var Ft;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ft||(Ft={}));var Hc;(function(n){n.websocket="websocket"})(Hc||(Hc={}));var ga;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ga||(ga={}));class h0{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,r){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(a));let o=[a.join_ref,a.ref,a.topic,a.event,a.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(a){var r;return this._isArrayBuffer((r=a.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var r,o;const u=(o=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(a){var r,o;const u=(o=(r=a.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,r,o){var u,h;const f=a.topic,g=(u=a.ref)!==null&&u!==void 0?u:"",y=(h=a.join_ref)!==null&&h!==void 0?h:"",p=a.payload.event,b=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},T=Object.keys(b).length===0?"":JSON.stringify(b);if(y.length>255)throw new Error(`joinRef length ${y.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(T.length>255)throw new Error(`metadata length ${T.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+y.length+g.length+f.length+p.length+T.length,k=new ArrayBuffer(this.HEADER_LENGTH+x);let z=new DataView(k),H=0;z.setUint8(H++,this.KINDS.userBroadcastPush),z.setUint8(H++,y.length),z.setUint8(H++,g.length),z.setUint8(H++,f.length),z.setUint8(H++,p.length),z.setUint8(H++,T.length),z.setUint8(H++,r),Array.from(y,I=>z.setUint8(H++,I.charCodeAt(0))),Array.from(g,I=>z.setUint8(H++,I.charCodeAt(0))),Array.from(f,I=>z.setUint8(H++,I.charCodeAt(0))),Array.from(p,I=>z.setUint8(H++,I.charCodeAt(0))),Array.from(T,I=>z.setUint8(H++,I.charCodeAt(0)));var q=new Uint8Array(k.byteLength+o.byteLength);return q.set(new Uint8Array(k),0),q.set(new Uint8Array(o),k.byteLength),q.buffer}decode(a,r){if(this._isArrayBuffer(a)){let o=this._binaryDecode(a);return r(o)}if(typeof a=="string"){const o=JSON.parse(a),[u,h,f,g,y]=o;return r({join_ref:u,ref:h,topic:f,event:g,payload:y})}return r({})}_binaryDecode(a){const r=new DataView(a),o=r.getUint8(0),u=new TextDecoder;if(o===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,r,u)}_decodeUserBroadcast(a,r,o){const u=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let y=this.HEADER_LENGTH+4;const p=o.decode(a.slice(y,y+u));y=y+u;const b=o.decode(a.slice(y,y+h));y=y+h;const T=o.decode(a.slice(y,y+f));y=y+f;const x=a.slice(y,a.byteLength),k=g===this.JSON_ENCODING?JSON.parse(o.decode(x)):x,z={type:this.BROADCAST_EVENT,event:b,payload:k};return f>0&&(z.meta=JSON.parse(T)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:z}}_isArrayBuffer(a){var r;return a instanceof ArrayBuffer||((r=a?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(a,r){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([o])=>r.includes(o)))}}class Vm{constructor(a,r){this.callback=a,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(De||(De={}));const pm=(n,a,r={})=>{var o;const u=(o=r.skipTypes)!==null&&o!==void 0?o:[];return a?Object.keys(a).reduce((h,f)=>(h[f]=f0(f,n,a,u),h),{}):{}},f0=(n,a,r,o)=>{const u=a.find(g=>g.name===n),h=u?.type,f=r[n];return h&&!o.includes(h)?$m(h,f):Ic(f)},$m=(n,a)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return p0(a,r)}switch(n){case De.bool:return m0(a);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return g0(a);case De.json:case De.jsonb:return y0(a);case De.timestamp:return v0(a);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return Ic(a);default:return Ic(a)}},Ic=n=>n,m0=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},g0=n=>{if(typeof n=="string"){const a=parseFloat(n);if(!Number.isNaN(a))return a}return n},y0=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},p0=(n,a)=>{if(typeof n!="string")return n;const r=n.length-1,o=n[r];if(n[0]==="{"&&o==="}"){let h;const f=n.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>$m(a,g))}return n},v0=n=>typeof n=="string"?n.replace(" ","T"):n,Fm=n=>{const a=new URL(n);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Cc{constructor(a,r,o={},u=Lc){this.channel=a,this.event=r,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,r){var o;return this._hasReceived(a)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:a,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:r}){this.recHooks.filter(o=>o.status===a).forEach(o=>o.callback(r))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var vm;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(vm||(vm={}));class ps{constructor(a,r){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,u,h,f),this.pendingDiffs.forEach(y=>{this.state=ps.syncDiff(this.state,y,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(o.diff,{},u=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=ps.syncDiff(this.state,u,h,f),g())}),this.onJoin((u,h,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:h,newPresences:f})}),this.onLeave((u,h,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,r,o,u){const h=this.cloneDeep(a),f=this.transformState(r),g={},y={};return this.map(h,(p,b)=>{f[p]||(y[p]=b)}),this.map(f,(p,b)=>{const T=h[p];if(T){const x=b.map(q=>q.presence_ref),k=T.map(q=>q.presence_ref),z=b.filter(q=>k.indexOf(q.presence_ref)<0),H=T.filter(q=>x.indexOf(q.presence_ref)<0);z.length>0&&(g[p]=z),H.length>0&&(y[p]=H)}else g[p]=b}),this.syncDiff(h,{joins:g,leaves:y},o,u)}static syncDiff(a,r,o,u){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(h,(g,y)=>{var p;const b=(p=a[g])!==null&&p!==void 0?p:[];if(a[g]=this.cloneDeep(y),b.length>0){const T=a[g].map(k=>k.presence_ref),x=b.filter(k=>T.indexOf(k.presence_ref)<0);a[g].unshift(...x)}o(g,b,y)}),this.map(f,(g,y)=>{let p=a[g];if(!p)return;const b=y.map(T=>T.presence_ref);p=p.filter(T=>b.indexOf(T.presence_ref)<0),a[g]=p,u(g,p,y),p.length===0&&delete a[g]}),a}static map(a,r){return Object.getOwnPropertyNames(a).map(o=>r(o,a[o]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((r,o)=>{const u=a[o];return"metas"in u?r[o]=u.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[o]=u,r},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(bm||(bm={}));var vs;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(vs||(vs={}));var yi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(yi||(yi={}));class fn{constructor(a,r={config:{}},o){var u,h;if(this.topic=a,this.params=r,this.socket=o,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Cc(this,Ft.join,this.params,this.timeout),this.rejoinTimer=new Vm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ft.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new ps(this),this.broadcastEndpointURL=Fm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,r=this.timeout){var o,u,h;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:f,presence:g,private:y}}=this.params,p=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(k=>k.filter))!==null&&u!==void 0?u:[],b=!!this.bindings[vs.PRESENCE]&&this.bindings[vs.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,T={},x={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:y};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(k=>a?.(yi.CHANNEL_ERROR,k)),this._onClose(()=>a?.(yi.CLOSED)),this.updateJoinPayload(Object.assign({config:x},T)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:k})=>{var z;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){a?.(yi.SUBSCRIBED);return}else{const H=this.bindings.postgres_changes,q=(z=H?.length)!==null&&z!==void 0?z:0,I=[];for(let O=0;O<q;O++){const M=H[O],{filter:{event:$,schema:Z,table:X,filter:Q}}=M,Oe=k&&k[O];if(Oe&&Oe.event===$&&fn.isFilterValueEqual(Oe.schema,Z)&&fn.isFilterValueEqual(Oe.table,X)&&fn.isFilterValueEqual(Oe.filter,Q))I.push(Object.assign(Object.assign({},M),{id:Oe.id}));else{this.unsubscribe(),this.state=Xe.errored,a?.(yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,a&&a(yi.SUBSCRIBED);return}}).receive("error",k=>{this.state=Xe.errored,a?.(yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{a?.(yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,r={}){return await this.send({type:"presence",event:"track",payload:a},r.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,r,o){return this.state===Xe.joined&&a===vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,r,o)}async httpSend(a,r,o={}){var u;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(g.status===202)return{success:!0};let y=g.statusText;try{const p=await g.json();y=p.error||p.message||y}catch{}return Promise.reject(new Error(y))}async send(a,r={}){var o,u;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=a,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const y={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=p.body)===null||u===void 0?void 0:u.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,y;const p=this._push(a.type,a,r.timeout||this.timeout);a.type==="broadcast"&&!(!((y=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ft.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new Cc(this,Ft.leave,{},a),o.receive("ok",()=>{r(),u("ok")}).receive("timeout",()=>{r(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(a,r,o){const u=new AbortController,h=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(a,Object.assign(Object.assign({},r),{signal:u.signal}));return clearTimeout(h),f}_push(a,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Cc(this,a,r,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>d0){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(a,r,o){return r}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,r,o){var u,h;const f=a.toLocaleLowerCase(),{close:g,error:y,leave:p,join:b}=Ft;if(o&&[g,y,p,b].indexOf(f)>=0&&o!==this._joinRef())return;let x=this._onMessage(f,r,o);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(k=>{var z,H,q;return((z=k.filter)===null||z===void 0?void 0:z.event)==="*"||((q=(H=k.filter)===null||H===void 0?void 0:H.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===f}).map(k=>k.callback(x,o)):(h=this.bindings[f])===null||h===void 0||h.filter(k=>{var z,H,q,I,O,M;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in k){const $=k.id,Z=(z=k.filter)===null||z===void 0?void 0:z.event;return $&&((H=r.ids)===null||H===void 0?void 0:H.includes($))&&(Z==="*"||Z?.toLocaleLowerCase()===((q=r.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const $=(O=(I=k?.filter)===null||I===void 0?void 0:I.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return $==="*"||$===((M=r?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===f}).map(k=>{if(typeof x=="object"&&"ids"in x){const z=x.data,{schema:H,table:q,commit_timestamp:I,type:O,errors:M}=z;x=Object.assign(Object.assign({},{schema:H,table:q,commit_timestamp:I,eventType:O,new:{},old:{},errors:M}),this._getPayloadRecords(z))}k.callback(x,o)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,r,o){const u=a.toLocaleLowerCase(),h={type:u,filter:r,callback:o};return this.bindings[u]?this.bindings[u].push(h):this.bindings[u]=[h],this}_off(a,r){const o=a.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var h;return!(((h=u.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===o&&fn.isEqual(u.filter,r))})),this}static isEqual(a,r){if(Object.keys(a).length!==Object.keys(r).length)return!1;for(const o in a)if(a[o]!==r[o])return!1;return!0}static isFilterValueEqual(a,r){return(a??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Ft.close,{},a)}_onError(a){this._on(Ft.error,{},r=>a(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const r={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(r.new=pm(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(r.old=pm(a.columns,a.old_record)),r}}const Dc=()=>{},Fr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b0=[1e3,2e3,5e3,1e4],w0=1e4,x0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class S0{constructor(a,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lc,this.transport=null,this.heartbeatIntervalMs=Fr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dc,this.ref=0,this.reconnectTimer=null,this.vsn=ym,this.logger=Dc,this.conn=null,this.sendBuffer=[],this.serializer=new h0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...h)=>u(...h):(...h)=>fetch(...h),!(!((o=r?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${a}/${Hc.websocket}`,this.httpEndpoint=Fm(a),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=r0.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const r=a.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const r=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const a=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,r,o){this.logger(a,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case $i.connecting:return ga.Connecting;case $i.open:return ga.Open;case $i.closing:return ga.Closing;default:return ga.Closed}}isConnected(){return this.connectionState()===ga.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,r={config:{}}){const o=`realtime:${a}`,u=this.getChannels().find(h=>h.topic===o);if(u)return u;{const h=new fn(`realtime:${a}`,r,this);return this.channels.push(h),h}}push(a){const{topic:r,event:o,payload:u,ref:h}=a,f=()=>{this.encode(a,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${r} ${o} (${h})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(u0,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fr.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let r=this.channels.find(o=>o.topic===a&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${a}"`),r.unsubscribe())}_remove(a){this.channels=this.channels.filter(r=>r.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",p)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:u,payload:h,ref:f}=r,g=f?`(${f})`:"",y=h.status||"";this.log("receive",`${y} ${o} ${u} ${g}`.trim(),h),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(u,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(a){var r;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===$i.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$i.open||this.conn.readyState===$i.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.accessTokenValue&&(this.channels.forEach(r=>{r.updateJoinPayload({access_token:this.accessTokenValue})}),this.sendBuffer=[],this.channels.forEach(r=>{r._isJoining()&&(r.joinPush.sent=!1,r.joinPush.send())})),this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var r;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(a=>a._trigger(Ft.error))}_appendParams(a,r){if(Object.keys(r).length===0)return a;const o=a.match(/\?/)?"&":"?",u=new URLSearchParams(r);return`${a}${o}${u}`}_workerObjectUrl(a){let r;if(a)r=a;else{const o=new Blob([x0],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(a,r=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(a=null){let r,o=!1;if(a)r=a,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(u=>{const h={access_token:r,version:l0};r&&u.updateJoinPayload(h),u.joinedOnce&&u._isJoined()&&u._push(Ft.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${a}`,r)})}_triggerStateCallbacks(a,r){try{this.stateChangeCallbacks[a].forEach(o=>{try{o(r)}catch(u){this.log("error",`error in ${a} callback`,u)}})}catch(o){this.log("error",`error triggering ${a} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Vm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var r,o,u,h,f,g,y,p,b,T,x,k;switch(this.transport=(r=a?.transport)!==null&&r!==void 0?r:null,this.timeout=(o=a?.timeout)!==null&&o!==void 0?o:Lc,this.heartbeatIntervalMs=(u=a?.heartbeatIntervalMs)!==null&&u!==void 0?u:Fr.HEARTBEAT_INTERVAL,this.worker=(h=a?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=a?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=a?.heartbeatCallback)!==null&&g!==void 0?g:Dc,this.vsn=(y=a?.vsn)!==null&&y!==void 0?y:ym,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=a?.reconnectAfterMs)!==null&&p!==void 0?p:(z=>b0[z-1]||w0),this.vsn){case c0:this.encode=(b=a?.encode)!==null&&b!==void 0?b:((z,H)=>H(JSON.stringify(z))),this.decode=(T=a?.decode)!==null&&T!==void 0?T:((z,H)=>H(JSON.parse(z)));break;case Gm:this.encode=(x=a?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(k=a?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}var ws=class extends Error{constructor(n,a){super(n),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&a.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _0(n,a,r){const o=new URL(a,n);if(r)for(const[u,h]of Object.entries(r))h!==void 0&&o.searchParams.set(u,h);return o.toString()}async function T0(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function k0(n){const a=n.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:u,body:h,headers:f}){const g=_0(n.baseUrl,o,u),y=await T0(n.auth),p=await a(g,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...y,...f},body:h?JSON.stringify(h):void 0}),b=await p.text(),T=(p.headers.get("content-type")||"").includes("application/json"),x=T&&b?JSON.parse(b):b;if(!p.ok){const k=T?x:void 0,z=k?.error;throw new ws(z?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:z?.type,icebergCode:z?.code,details:k})}return{status:p.status,headers:p.headers,data:x}}}}function Pr(n){return n.join("")}var A0=class{constructor(n,a=""){this.client=n,this.prefix=a}async listNamespaces(n){const a=n?{parent:Pr(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(n,a){const r={namespace:n.namespace,properties:a?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pr(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pr(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pr(n.namespace)}`}),!0}catch(a){if(a instanceof ws&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(n,a){try{return await this.createNamespace(n,a)}catch(r){if(r instanceof ws&&r.status===409)return;throw r}}};function sn(n){return n.join("")}var j0=class{constructor(n,a="",r){this.client=n,this.prefix=a,this.accessDelegation=r}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sn(n.namespace)}/tables`})).data.identifiers}async createTable(n,a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sn(n.namespace)}/tables`,body:a,headers:r})).data.metadata}async updateTable(n,a){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sn(n.namespace)}/tables/${n.name}`,body:a});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(n,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(a?.purge??!1)}})}async loadTable(n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sn(n.namespace)}/tables/${n.name}`,headers:a})).data.metadata}async tableExists(n){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sn(n.namespace)}/tables/${n.name}`,headers:a}),!0}catch(r){if(r instanceof ws&&r.status===404)return!1;throw r}}async createTableIfNotExists(n,a){try{return await this.createTable(n,a)}catch(r){if(r instanceof ws&&r.status===409)return await this.loadTable({namespace:n.namespace,name:a.name});throw r}}},E0=class{constructor(n){let a="v1";n.catalogName&&(a+=`/${n.catalogName}`);const r=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=k0({baseUrl:r,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new A0(this.client,a),this.tableOps=new j0(this.client,a,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,a){return this.namespaceOps.createNamespace(n,a)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,a){return this.tableOps.createTable(n,a)}async updateTable(n,a){return this.tableOps.updateTable(n,a)}async dropTable(n,a){await this.tableOps.dropTable(n,a)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,a){return this.namespaceOps.createNamespaceIfNotExists(n,a)}async createTableIfNotExists(n,a){return this.tableOps.createTableIfNotExists(n,a)}},io=class extends Error{constructor(n,a="storage",r,o){super(n),this.__isStorageError=!0,this.namespace=a,this.name=a==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=o}};function ao(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Qr=class extends io{constructor(n,a,r,o="storage"){super(n,o,a,r),this.name=o==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=a,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Pm=class extends io{constructor(n,a,r="storage"){super(n,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=a}};const R0=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),C0=n=>{if(typeof n!="object"||n===null)return!1;const a=Object.getPrototypeOf(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Wc=n=>{if(Array.isArray(n))return n.map(r=>Wc(r));if(typeof n=="function"||n!==Object(n))return n;const a={};return Object.entries(n).forEach(([r,o])=>{const u=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));a[u]=Wc(o)}),a},D0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function xs(n){"@babel/helpers - typeof";return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},xs(n)}function O0(n,a){if(xs(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var o=r.call(n,a);if(xs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function z0(n){var a=O0(n,"string");return xs(a)=="symbol"?a:a+""}function q0(n,a,r){return(a=z0(a))in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n}function wm(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),r.push.apply(r,o)}return r}function ae(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?wm(Object(r),!0).forEach(function(o){q0(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):wm(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}const xm=n=>{var a;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(a=n.error)===null||a===void 0?void 0:a.message)||JSON.stringify(n)},B0=async(n,a,r,o)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!r?.noResolveJson){const u=n,h=u.status||500;if(typeof u.json=="function")u.json().then(f=>{const g=f?.statusCode||f?.code||h+"";a(new Qr(xm(f),h,g,o))}).catch(()=>{if(o==="vectors"){const f=h+"";a(new Qr(u.statusText||`HTTP ${h} error`,h,f,o))}else{const f=h+"";a(new Qr(u.statusText||`HTTP ${h} error`,h,f,o))}});else{const f=h+"";a(new Qr(u.statusText||`HTTP ${h} error`,h,f,o))}}else a(new Pm(xm(n),n,o))},M0=(n,a,r,o)=>{const u={method:n,headers:a?.headers||{}};return n==="GET"||n==="HEAD"||!o?ae(ae({},u),r):(C0(o)?(u.headers=ae({"Content-Type":"application/json"},a?.headers),u.body=JSON.stringify(o)):u.body=o,a?.duplex&&(u.duplex=a.duplex),ae(ae({},u),r))};async function gs(n,a,r,o,u,h,f){return new Promise((g,y)=>{n(r,M0(a,o,u,h)).then(p=>{if(!p.ok)throw p;if(o?.noResolveJson)return p;if(f==="vectors"){const b=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!b||!b.includes("application/json"))return{}}return p.json()}).then(p=>g(p)).catch(p=>B0(p,y,o,f))})}function Qm(n="storage"){return{get:async(a,r,o,u)=>gs(a,"GET",r,o,u,void 0,n),post:async(a,r,o,u,h)=>gs(a,"POST",r,u,h,o,n),put:async(a,r,o,u,h)=>gs(a,"PUT",r,u,h,o,n),head:async(a,r,o,u)=>gs(a,"HEAD",r,ae(ae({},o),{},{noResolveJson:!0}),u,void 0,n),remove:async(a,r,o,u,h)=>gs(a,"DELETE",r,u,h,o,n)}}const N0=Qm("storage"),{get:Ss,post:$t,put:Gc,head:U0,remove:Xc}=N0,Rt=Qm("vectors");var vn=class{constructor(n,a={},r,o="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=a,this.fetch=R0(r),this.namespace=o}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=ae(ae({},this.headers),{},{[n]:a}),this}async handleOperation(n){var a=this;try{return{data:await n(),error:null}}catch(r){if(a.shouldThrowOnError)throw r;if(ao(r))return{data:null,error:r};throw r}}},L0=class{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a}then(n,a){return this.execute().then(n,a)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ao(a))return{data:null,error:a};throw a}}};let Ym;Ym=Symbol.toStringTag;var H0=class{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a,this[Ym]="BlobDownloadBuilder",this.promise=null}asStream(){return new L0(this.downloadFn,this.shouldThrowOnError)}then(n,a){return this.getPromise().then(n,a)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ao(a))return{data:null,error:a};throw a}}};const I0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var W0=class extends vn{constructor(n,a={},r,o){super(n,a,o,"storage"),this.bucketId=r}async uploadOrUpdate(n,a,r,o){var u=this;return u.handleOperation(async()=>{let h;const f=ae(ae({},Sm),o);let g=ae(ae({},u.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const y=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),y&&h.append("metadata",u.encodeMetadata(y)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),y&&!h.has("metadata")&&h.append("metadata",u.encodeMetadata(y))):(h=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,y&&(g["x-metadata"]=u.toBase64(u.encodeMetadata(y))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),o?.headers&&(g=ae(ae({},g),o.headers));const p=u._removeEmptyFolders(a),b=u._getFinalPath(p),T=await(n=="PUT"?Gc:$t)(u.fetch,`${u.url}/object/${b}`,h,ae({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{path:p,id:T.Id,fullPath:T.Key}})}async upload(n,a,r){return this.uploadOrUpdate("POST",n,a,r)}async uploadToSignedUrl(n,a,r,o){var u=this;const h=u._removeEmptyFolders(n),f=u._getFinalPath(h),g=new URL(u.url+`/object/upload/sign/${f}`);return g.searchParams.set("token",a),u.handleOperation(async()=>{let y;const p=ae({upsert:Sm.upsert},o),b=ae(ae({},u.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(y=new FormData,y.append("cacheControl",p.cacheControl),y.append("",r)):typeof FormData<"u"&&r instanceof FormData?(y=r,y.append("cacheControl",p.cacheControl)):(y=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{path:h,fullPath:(await Gc(u.fetch,g.toString(),y,{headers:b})).Key}})}async createSignedUploadUrl(n,a){var r=this;return r.handleOperation(async()=>{let o=r._getFinalPath(n);const u=ae({},r.headers);a?.upsert&&(u["x-upsert"]="true");const h=await $t(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(r.url+h.url),g=f.searchParams.get("token");if(!g)throw new io("No token returned by API");return{signedUrl:f.toString(),path:n,token:g}})}async update(n,a,r){return this.uploadOrUpdate("PUT",n,a,r)}async move(n,a,r){var o=this;return o.handleOperation(async()=>await $t(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:n,destinationKey:a,destinationBucket:r?.destinationBucket},{headers:o.headers}))}async copy(n,a,r){var o=this;return o.handleOperation(async()=>({path:(await $t(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:n,destinationKey:a,destinationBucket:r?.destinationBucket},{headers:o.headers})).Key}))}async createSignedUrl(n,a,r){var o=this;return o.handleOperation(async()=>{let u=o._getFinalPath(n),h=await $t(o.fetch,`${o.url}/object/sign/${u}`,ae({expiresIn:a},r?.transform?{transform:r.transform}:{}),{headers:o.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${o.url}${h.signedURL}${f}`)}})}async createSignedUrls(n,a,r){var o=this;return o.handleOperation(async()=>{const u=await $t(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:a,paths:n},{headers:o.headers}),h=r?.download?`&download=${r.download===!0?"":r.download}`:"";return u.map(f=>ae(ae({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${h}`):null}))})}download(n,a,r){const o=typeof a?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(a?.transform||{}),h=u?`?${u}`:"",f=this._getFinalPath(n),g=()=>Ss(this.fetch,`${this.url}/${o}/${f}${h}`,{headers:this.headers,noResolveJson:!0},r);return new H0(g,this.shouldThrowOnError)}async info(n){var a=this;const r=a._getFinalPath(n);return a.handleOperation(async()=>Wc(await Ss(a.fetch,`${a.url}/object/info/${r}`,{headers:a.headers})))}async exists(n){var a=this;const r=a._getFinalPath(n);try{return await U0(a.fetch,`${a.url}/object/${r}`,{headers:a.headers}),{data:!0,error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(ao(o)&&o instanceof Pm){const u=o.originalError;if([400,404].includes(u?.status))return{data:!1,error:o}}throw o}}getPublicUrl(n,a){const r=this._getFinalPath(n),o=[],u=a?.download?`download=${a.download===!0?"":a.download}`:"";u!==""&&o.push(u);const h=typeof a?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(a?.transform||{});f!==""&&o.push(f);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${g}`)}}}async remove(n){var a=this;return a.handleOperation(async()=>await Xc(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:n},{headers:a.headers}))}async list(n,a,r){var o=this;return o.handleOperation(async()=>{const u=ae(ae(ae({},I0),a),{},{prefix:n||""});return await $t(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},r)})}async listV2(n,a){var r=this;return r.handleOperation(async()=>{const o=ae({},n);return await $t(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},a)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const a=[];return n.width&&a.push(`width=${n.width}`),n.height&&a.push(`height=${n.height}`),n.resize&&a.push(`resize=${n.resize}`),n.format&&a.push(`format=${n.format}`),n.quality&&a.push(`quality=${n.quality}`),a.join("&")}};const G0="2.98.0",As={"X-Client-Info":`storage-js/${G0}`};var V0=class extends vn{constructor(n,a={},r,o){const u=new URL(n);o?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase."));const h=u.href.replace(/\/$/,""),f=ae(ae({},As),a);super(h,f,r,"storage")}async listBuckets(n){var a=this;return a.handleOperation(async()=>{const r=a.listBucketOptionsToQueryString(n);return await Ss(a.fetch,`${a.url}/bucket${r}`,{headers:a.headers})})}async getBucket(n){var a=this;return a.handleOperation(async()=>await Ss(a.fetch,`${a.url}/bucket/${n}`,{headers:a.headers}))}async createBucket(n,a={public:!1}){var r=this;return r.handleOperation(async()=>await $t(r.fetch,`${r.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:r.headers}))}async updateBucket(n,a){var r=this;return r.handleOperation(async()=>await Gc(r.fetch,`${r.url}/bucket/${n}`,{id:n,name:n,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(n){var a=this;return a.handleOperation(async()=>await $t(a.fetch,`${a.url}/bucket/${n}/empty`,{},{headers:a.headers}))}async deleteBucket(n){var a=this;return a.handleOperation(async()=>await Xc(a.fetch,`${a.url}/bucket/${n}`,{},{headers:a.headers}))}listBucketOptionsToQueryString(n){const a={};return n&&("limit"in n&&(a.limit=String(n.limit)),"offset"in n&&(a.offset=String(n.offset)),n.search&&(a.search=n.search),n.sortColumn&&(a.sortColumn=n.sortColumn),n.sortOrder&&(a.sortOrder=n.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},$0=class extends vn{constructor(n,a={},r){const o=n.replace(/\/$/,""),u=ae(ae({},As),a);super(o,u,r,"storage")}async createBucket(n){var a=this;return a.handleOperation(async()=>await $t(a.fetch,`${a.url}/bucket`,{name:n},{headers:a.headers}))}async listBuckets(n){var a=this;return a.handleOperation(async()=>{const r=new URLSearchParams;n?.limit!==void 0&&r.set("limit",n.limit.toString()),n?.offset!==void 0&&r.set("offset",n.offset.toString()),n?.sortColumn&&r.set("sortColumn",n.sortColumn),n?.sortOrder&&r.set("sortOrder",n.sortOrder),n?.search&&r.set("search",n.search);const o=r.toString(),u=o?`${a.url}/bucket?${o}`:`${a.url}/bucket`;return await Ss(a.fetch,u,{headers:a.headers})})}async deleteBucket(n){var a=this;return a.handleOperation(async()=>await Xc(a.fetch,`${a.url}/bucket/${n}`,{},{headers:a.headers}))}from(n){var a=this;if(!D0(n))throw new io("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new E0({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(u,h){const f=u[h];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(u,g),error:null}}catch(y){if(o)throw y;return{data:null,error:y}}}}})}},F0=class extends vn{constructor(n,a={},r){const o=n.replace(/\/$/,""),u=ae(ae({},As),{},{"Content-Type":"application/json"},a);super(o,u,r,"vectors")}async createIndex(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/CreateIndex`,n,{headers:a.headers})||{})}async getIndex(n,a){var r=this;return r.handleOperation(async()=>await Rt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:n,indexName:a},{headers:r.headers}))}async listIndexes(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/ListIndexes`,n,{headers:a.headers}))}async deleteIndex(n,a){var r=this;return r.handleOperation(async()=>await Rt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:n,indexName:a},{headers:r.headers})||{})}},P0=class extends vn{constructor(n,a={},r){const o=n.replace(/\/$/,""),u=ae(ae({},As),{},{"Content-Type":"application/json"},a);super(o,u,r,"vectors")}async putVectors(n){var a=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/PutVectors`,n,{headers:a.headers})||{})}async getVectors(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/GetVectors`,n,{headers:a.headers}))}async listVectors(n){var a=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/ListVectors`,n,{headers:a.headers}))}async queryVectors(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/QueryVectors`,n,{headers:a.headers}))}async deleteVectors(n){var a=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/DeleteVectors`,n,{headers:a.headers})||{})}},Q0=class extends vn{constructor(n,a={},r){const o=n.replace(/\/$/,""),u=ae(ae({},As),{},{"Content-Type":"application/json"},a);super(o,u,r,"vectors")}async createBucket(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:a.headers})||{})}async getBucket(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:n},{headers:a.headers}))}async listBuckets(n={}){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/ListVectorBuckets`,n,{headers:a.headers}))}async deleteBucket(n){var a=this;return a.handleOperation(async()=>await Rt.post(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:a.headers})||{})}},Y0=class extends Q0{constructor(n,a={}){super(n,a.headers||{},a.fetch)}from(n){return new K0(this.url,this.headers,n,this.fetch)}async createBucket(n){var a=()=>super.createBucket,r=this;return a().call(r,n)}async getBucket(n){var a=()=>super.getBucket,r=this;return a().call(r,n)}async listBuckets(n={}){var a=()=>super.listBuckets,r=this;return a().call(r,n)}async deleteBucket(n){var a=()=>super.deleteBucket,r=this;return a().call(r,n)}},K0=class extends F0{constructor(n,a,r,o){super(n,a,o),this.vectorBucketName=r}async createIndex(n){var a=()=>super.createIndex,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(n={}){var a=()=>super.listIndexes,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(n){var a=()=>super.getIndex,r=this;return a().call(r,r.vectorBucketName,n)}async deleteIndex(n){var a=()=>super.deleteIndex,r=this;return a().call(r,r.vectorBucketName,n)}index(n){return new X0(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},X0=class extends P0{constructor(n,a,r,o,u){super(n,a,u),this.vectorBucketName=r,this.indexName=o}async putVectors(n){var a=()=>super.putVectors,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(n){var a=()=>super.getVectors,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(n={}){var a=()=>super.listVectors,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(n){var a=()=>super.queryVectors,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(n){var a=()=>super.deleteVectors,r=this;return a().call(r,ae(ae({},n),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},J0=class extends V0{constructor(n,a={},r,o){super(n,a,r,o)}from(n){return new W0(this.url,this.headers,n,this.fetch)}get vectors(){return new Y0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $0(this.url+"/iceberg",this.headers,this.fetch)}};const Km="2.98.0",dn=30*1e3,Vc=3,Oc=Vc*dn,Z0="http://localhost:9999",ev="supabase.auth.token",tv={"X-Client-Info":`gotrue-js/${Km}`},$c="X-Supabase-Api-Version",Xm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,av=600*1e3;class _s extends Error{constructor(a,r,o){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function J(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class nv extends _s{constructor(a,r,o){super(a,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function sv(n){return J(n)&&n.name==="AuthApiError"}class ya extends _s{constructor(a,r){super(a),this.name="AuthUnknownError",this.originalError=r}}class vi extends _s{constructor(a,r,o,u){super(a,o,u),this.name=r,this.status=o}}class Et extends vi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zc(n){return J(n)&&n.name==="AuthSessionMissingError"}class rn extends vi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yr extends vi{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Kr extends vi{constructor(a,r=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rv(n){return J(n)&&n.name==="AuthImplicitGrantRedirectError"}class _m extends vi{constructor(a,r=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ov extends vi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Fc extends vi{constructor(a,r){super(a,"AuthRetryableFetchError",r,void 0)}}function qc(n){return J(n)&&n.name==="AuthRetryableFetchError"}class Tm extends vi{constructor(a,r,o){super(a,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class Pc extends vi{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),km=` 	
\r=`.split(""),lv=(()=>{const n=new Array(128);for(let a=0;a<n.length;a+=1)n[a]=-1;for(let a=0;a<km.length;a+=1)n[km[a].charCodeAt(0)]=-2;for(let a=0;a<Jr.length;a+=1)n[Jr[a].charCodeAt(0)]=a;return n})();function Am(n,a,r){if(n!==null)for(a.queue=a.queue<<8|n,a.queuedBits+=8;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;r(Jr[o]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;r(Jr[o]),a.queuedBits-=6}}function Jm(n,a,r){const o=lv[n];if(o>-1)for(a.queue=a.queue<<6|o,a.queuedBits+=6;a.queuedBits>=8;)r(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function jm(n){const a=[],r=f=>{a.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},h=f=>{dv(f,o,r)};for(let f=0;f<n.length;f+=1)Jm(n.charCodeAt(f),u,h);return a.join("")}function cv(n,a){if(n<=127){a(n);return}else if(n<=2047){a(192|n>>6),a(128|n&63);return}else if(n<=65535){a(224|n>>12),a(128|n>>6&63),a(128|n&63);return}else if(n<=1114111){a(240|n>>18),a(128|n>>12&63),a(128|n>>6&63),a(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function uv(n,a){for(let r=0;r<n.length;r+=1){let o=n.charCodeAt(r);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(n.charCodeAt(r+1)-56320&65535|u)+65536,r+=1}cv(o,a)}}function dv(n,a,r){if(a.utf8seq===0){if(n<=127){r(n);return}for(let o=1;o<6;o+=1)if((n>>7-o&1)===0){a.utf8seq=o;break}if(a.utf8seq===2)a.codepoint=n&31;else if(a.utf8seq===3)a.codepoint=n&15;else if(a.utf8seq===4)a.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|n&63,a.utf8seq-=1,a.utf8seq===0&&r(a.codepoint)}}function gn(n){const a=[],r={queue:0,queuedBits:0},o=u=>{a.push(u)};for(let u=0;u<n.length;u+=1)Jm(n.charCodeAt(u),r,o);return new Uint8Array(a)}function hv(n){const a=[];return uv(n,r=>a.push(r)),new Uint8Array(a)}function pa(n){const a=[],r={queue:0,queuedBits:0},o=u=>{a.push(u)};return n.forEach(u=>Am(u,r,o)),Am(null,r,o),a.join("")}function fv(n){return Math.round(Date.now()/1e3)+n}function mv(){return Symbol("auth-callback")}const ot=()=>typeof window<"u"&&typeof document<"u",ha={tested:!1,writable:!1},Zm=()=>{if(!ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ha.tested)return ha.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ha.tested=!0,ha.writable=!0}catch{ha.tested=!0,ha.writable=!1}return ha.writable};function gv(n){const a={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((u,h)=>{a[h]=u})}catch{}return r.searchParams.forEach((o,u)=>{a[u]=o}),a}const eg=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),yv=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",hn=async(n,a,r)=>{await n.setItem(a,JSON.stringify(r))},fa=async(n,a)=>{const r=await n.getItem(a);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rt=async(n,a)=>{await n.removeItem(a)};class no{constructor(){this.promise=new no.promiseConstructor((a,r)=>{this.resolve=a,this.reject=r})}}no.promiseConstructor=Promise;function Xr(n){const a=n.split(".");if(a.length!==3)throw new Pc("Invalid JWT structure");for(let o=0;o<a.length;o++)if(!iv.test(a[o]))throw new Pc("JWT not in base64url format");return{header:JSON.parse(jm(a[0])),payload:JSON.parse(jm(a[1])),signature:gn(a[2]),raw:{header:a[0],payload:a[1]}}}async function pv(n){return await new Promise(a=>{setTimeout(()=>a(null),n)})}function vv(n,a){return new Promise((o,u)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await n(h);if(!a(h,null,f)){o(f);return}}catch(f){if(!a(h,f)){u(f);return}}})()})}function bv(n){return("0"+n.toString(16)).substr(-2)}function wv(){const a=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let u="";for(let h=0;h<56;h++)u+=r.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(a),Array.from(a,bv).join("")}async function xv(n){const r=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",r),u=new Uint8Array(o);return Array.from(u).map(h=>String.fromCharCode(h)).join("")}async function Sv(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await xv(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function on(n,a,r=!1){const o=wv();let u=o;r&&(u+="/PASSWORD_RECOVERY"),await hn(n,`${a}-code-verifier`,u);const h=await Sv(o);return[h,o===h?"plain":"s256"]}const _v=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tv(n){const a=n.headers.get($c);if(!a||!a.match(_v))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function kv(n){if(!n)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(n<=a)throw new Error("JWT has expired")}function Av(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ln(n){if(!jv.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bc(){const n={};return new Proxy(n,{get:(a,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ev(n,a){return new Proxy(n,{get:(r,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,u)}return!a.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(r,o,u)}})}function Em(n){return JSON.parse(JSON.stringify(n))}const ma=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Rv=[502,503,504];async function Rm(n){var a;if(!yv(n))throw new Fc(ma(n),0);if(Rv.includes(n.status))throw new Fc(ma(n),n.status);let r;try{r=await n.json()}catch(h){throw new ya(ma(h),h)}let o;const u=Tv(n);if(u&&u.getTime()>=Xm["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new Tm(ma(r),n.status,((a=r.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(o==="session_not_found")throw new Et}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new Tm(ma(r),n.status,r.weak_password.reasons);throw new nv(ma(r),n.status||500,o)}const Cv=(n,a,r,o)=>{const u={method:n,headers:a?.headers||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),r))};async function ne(n,a,r,o){var u;const h=Object.assign({},o?.headers);h[$c]||(h[$c]=Xm["2024-01-01"].name),o?.jwt&&(h.Authorization=`Bearer ${o.jwt}`);const f=(u=o?.query)!==null&&u!==void 0?u:{};o?.redirectTo&&(f.redirect_to=o.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",y=await Dv(n,a,r+g,{headers:h,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(y):{data:Object.assign({},y),error:null}}async function Dv(n,a,r,o,u,h){const f=Cv(a,o,u,h);let g;try{g=await n(r,Object.assign({},f))}catch(y){throw console.error(y),new Fc(ma(y),0)}if(g.ok||await Rm(g),o?.noResolveJson)return g;try{return await g.json()}catch(y){await Rm(y)}}function Vt(n){var a;let r=null;qv(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=fv(n.expires_in)));const o=(a=n.user)!==null&&a!==void 0?a:n;return{data:{session:r,user:o},error:null}}function Cm(n){const a=Vt(n);return!a.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(a.data.weak_password=n.weak_password),a}function Fi(n){var a;return{data:{user:(a=n.user)!==null&&a!==void 0?a:n},error:null}}function Ov(n){return{data:n,error:null}}function zv(n){const{action_link:a,email_otp:r,hashed_token:o,redirect_to:u,verification_type:h}=n,f=to(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:a,email_otp:r,hashed_token:o,redirect_to:u,verification_type:h},y=Object.assign({},f);return{data:{properties:g,user:y},error:null}}function Dm(n){return n}function qv(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mc=["global","local","others"];class Bv{constructor({url:a="",headers:r={},fetch:o}){this.url=a,this.headers=r,this.fetch=eg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,r=Mc[0]){if(Mc.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mc.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(o){if(J(o))return{data:null,error:o};throw o}}async inviteUserByEmail(a,r={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Fi})}catch(o){if(J(o))return{data:{user:null},error:o};throw o}}async generateLink(a){try{const{options:r}=a,o=to(a,["options"]),u=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(u.new_email=o?.newEmail,delete u.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:zv,redirectTo:r?.redirectTo})}catch(r){if(J(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(a){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Fi})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async listUsers(a){var r,o,u,h,f,g,y;try{const p={nextPage:null,lastPage:0,total:0},b=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=a?.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Dm});if(b.error)throw b.error;const T=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return k.length>0&&(k.forEach(z=>{const H=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(z.split(";")[1].split("=")[1]);p[`${q}Page`]=H}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},T),p),error:null}}catch(p){if(J(p))return{data:{users:[]},error:p};throw p}}async getUserById(a){ln(a);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Fi})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async updateUserById(a,r){ln(a);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:r,headers:this.headers,xform:Fi})}catch(o){if(J(o))return{data:{user:null},error:o};throw o}}async deleteUser(a,r=!1){ln(a);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:r},xform:Fi})}catch(o){if(J(o))return{data:{user:null},error:o};throw o}}async _listFactors(a){ln(a.userId);try{const{data:r,error:o}=await ne(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:r,error:o}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _deleteFactor(a){ln(a.userId),ln(a.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _listOAuthClients(a){var r,o,u,h,f,g,y;try{const p={nextPage:null,lastPage:0,total:0},b=await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=a?.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=a?.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Dm});if(b.error)throw b.error;const T=await b.json(),x=(f=b.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return k.length>0&&(k.forEach(z=>{const H=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(z.split(";")[1].split("=")[1]);p[`${q}Page`]=H}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},T),p),error:null}}catch(p){if(J(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(a){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _getOAuthClient(a){try{return await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}async _updateOAuthClient(a,r){try{return await ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(J(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(a){try{return await ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(a){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(J(r))return{data:null,error:r};throw r}}}function Om(n={}){return{getItem:a=>n[a]||null,setItem:(a,r)=>{n[a]=r},removeItem:a=>{delete n[a]}}}const gi={debug:!!(globalThis&&Zm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tg extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Mv extends tg{}async function Nv(n,a,r){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,a);const o=new globalThis.AbortController;a>0&&setTimeout(()=>{o.abort(),gi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},a),await Promise.resolve();try{return await globalThis.navigator.locks.request(n,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await r()}finally{gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(a===0)throw gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Mv(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(gi.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(u){if(u?.name==="AbortError"&&a>0)return gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire timeout, recovering by stealing lock",n),console.warn(`@supabase/gotrue-js: Lock "${n}" was not released within ${a}ms. This may indicate an orphaned lock from a component unmount (e.g., React Strict Mode). Forcefully acquiring the lock to recover.`),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,{mode:"exclusive",steal:!0},async h=>{if(h){gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: recovered (stolen)",n,h.name);try{return await r()}finally{gi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released (stolen)",n,h.name)}}else return console.warn("@supabase/gotrue-js: Navigator LockManager returned null lock even with steal: true"),await r()}));throw u}}function Uv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ig(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Lv(n){return parseInt(n,16)}function Hv(n){const a=new TextEncoder().encode(n);return"0x"+Array.from(a,o=>o.toString(16).padStart(2,"0")).join("")}function Iv(n){var a;const{chainId:r,domain:o,expirationTime:u,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:y,resources:p,scheme:b,uri:T,version:x}=n;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!T)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((a=n.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const k=ig(n.address),z=b?`${b}://${o}`:o,H=n.statement?`${n.statement}
`:"",q=`${z} wants you to sign in with your Ethereum account:
${k}

${H}`;let I=`URI: ${T}
Version: ${x}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(u&&(I+=`
Expiration Time: ${u.toISOString()}`),g&&(I+=`
Not Before: ${g.toISOString()}`),y&&(I+=`
Request ID: ${y}`),p){let O=`
Resources:`;for(const M of p){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);O+=`
- ${M}`}I+=O}return`${q}
${I}`}class Qe extends Error{constructor({message:a,code:r,cause:o,name:u}){var h;super(a,{cause:o}),this.__isWebAuthnError=!0,this.name=(h=u??(o instanceof Error?o.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class Zr extends Qe{constructor(a,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:a}),this.name="WebAuthnUnknownError",this.originalError=r}}function Wv({error:n,options:a}){var r,o,u;const{publicKey:h}=a;if(!h)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(a.mediation==="conditional"&&((o=h.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=h.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new Qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const f=window.location.hostname;if(ag(f)){if(h.rp.id!==f)return new Qe({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new Qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Gv({error:n,options:a}){const{publicKey:r}=a;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Qe({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(ag(o)){if(r.rpId!==o)return new Qe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Vv{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const $v=new Vv;function Fv(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:a,user:r,excludeCredentials:o}=n,u=to(n,["challenge","user","excludeCredentials"]),h=gn(a).buffer,f=Object.assign(Object.assign({},r),{id:gn(r.id).buffer}),g=Object.assign(Object.assign({},u),{challenge:h,user:f});if(o&&o.length>0){g.excludeCredentials=new Array(o.length);for(let y=0;y<o.length;y++){const p=o[y];g.excludeCredentials[y]=Object.assign(Object.assign({},p),{id:gn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function Pv(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:a,allowCredentials:r}=n,o=to(n,["challenge","allowCredentials"]),u=gn(a).buffer,h=Object.assign(Object.assign({},o),{challenge:u});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:gn(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function Qv(n){var a;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n;return{id:n.id,rawId:n.id,response:{attestationObject:pa(new Uint8Array(n.response.attestationObject)),clientDataJSON:pa(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Yv(n){var a;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n,o=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:pa(new Uint8Array(u.authenticatorData)),clientDataJSON:pa(new Uint8Array(u.clientDataJSON)),signature:pa(new Uint8Array(u.signature)),userHandle:u.userHandle?pa(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(a=r.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function ag(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function zm(){var n,a;return!!(ot()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function Kv(n){try{const a=await navigator.credentials.create(n);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Zr("Browser returned unexpected credential type",a)}:{data:null,error:new Zr("Empty credential response",a)}}catch(a){return{data:null,error:Wv({error:a,options:n})}}}async function Xv(n){try{const a=await navigator.credentials.get(n);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Zr("Browser returned unexpected credential type",a)}:{data:null,error:new Zr("Empty credential response",a)}}catch(a){return{data:null,error:Gv({error:a,options:n})}}}const Jv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Zv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function eo(...n){const a=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),r=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of n)if(u)for(const h in u){const f=u[h];if(f!==void 0)if(Array.isArray(f))o[h]=f;else if(r(f))o[h]=f;else if(a(f)){const g=o[h];a(g)?o[h]=eo(g,f):o[h]=eo(f)}else o[h]=f}return o}function eb(n,a){return eo(Jv,n,a||{})}function tb(n,a){return eo(Zv,n,a||{})}class ib{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:r,friendlyName:o,signal:u},h){var f;try{const{data:g,error:y}=await this.client.mfa.challenge({factorId:a,webauthn:r});if(!g)return{data:null,error:y};const p=u??$v.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:b}=g.webauthn.credential_options.publicKey;if(!b.name){const T=o;if(T)b.name=`${b.id}:${T}`;else{const k=(await this.client.getUser()).data.user,z=((f=k?.user_metadata)===null||f===void 0?void 0:f.name)||k?.email||k?.id||"User";b.name=`${b.id}:${z}`}}b.displayName||(b.displayName=b.name)}switch(g.webauthn.type){case"create":{const b=eb(g.webauthn.credential_options.publicKey,h?.create),{data:T,error:x}=await Kv({publicKey:b,signal:p});return T?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:T}},error:null}:{data:null,error:x}}case"request":{const b=tb(g.webauthn.credential_options.publicKey,h?.request),{data:T,error:x}=await Xv(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:b,signal:p}));return T?{data:{factorId:a,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:T}},error:null}:{data:null,error:x}}}}catch(g){return J(g)?{data:null,error:g}:{data:null,error:new ya("Unexpected error in challenge",g)}}}async _verify({challengeId:a,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:a,webauthn:o})}async _authenticate({factorId:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!r)return{data:null,error:new _s("rpId is required for WebAuthn authentication")};try{if(!zm())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:a,webauthn:{rpId:r,rpOrigins:o},signal:u},{request:h});if(!f)return{data:null,error:g};const{webauthn:y}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:o,credential_response:y.credential_response}})}catch(f){return J(f)?{data:null,error:f}:{data:null,error:new ya("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!r)return{data:null,error:new _s("rpId is required for WebAuthn registration")};try{if(!zm())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(b=>{var T;return(T=b.data)===null||T===void 0?void 0:T.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===a&&x.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b?.id}):void 0),{data:null,error:g};const{data:y,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:u},{create:h});return y?this._verify({factorId:f.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:o,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:p}}catch(f){return J(f)?{data:null,error:f}:{data:null,error:new ya("Unexpected error in register",f)}}}}Uv();const ab={url:Z0,storageKey:ev,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:5e3,skipAutoInitialize:!1};async function qm(n,a,r){return await r()}const cn={};class Ts{get jwks(){var a,r;return(r=(a=cn[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(a){cn[this.storageKey]=Object.assign(Object.assign({},cn[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,r;return(r=(a=cn[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){cn[this.storageKey]=Object.assign(Object.assign({},cn[this.storageKey]),{cachedAt:a})}constructor(a){var r,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},ab),a);if(this.storageKey=h.storageKey,this.instanceID=(r=Ts.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ts.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&ot()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new Bv({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=eg(h.fetch),this.lock=h.lock||qm,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&ot()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=Nv:this.lock=qm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ib(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:Zm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Om(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=Om(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}h.skipAutoInitialize||this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Km}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let r={},o="none";if(ot()&&(r=gv(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),ot()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:h}=await this._getSessionFromURL(r,o);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),rv(h)){const y=(a=h.details)===null||a===void 0?void 0:a.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:g}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return J(r)?this._returnResult({error:r}):this._returnResult({error:new ya("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var r,o,u;try{const h=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=a?.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=a?.options)===null||u===void 0?void 0:u.captchaToken}},xform:Vt}),{data:f,error:g}=h;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const y=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:p,session:y},error:null})}catch(h){if(J(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(a){var r,o,u;try{let h;if("email"in a){const{email:b,password:T,options:x}=a;let k=null,z=null;this.flowType==="pkce"&&([k,z]=await on(this.storage,this.storageKey)),h=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:b,password:T,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:k,code_challenge_method:z},xform:Vt})}else if("phone"in a){const{phone:b,password:T,options:x}=a;h=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:T,data:(o=x?.data)!==null&&o!==void 0?o:{},channel:(u=x?.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Vt})}else throw new Yr("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return await rt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const y=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:p,session:y},error:null})}catch(h){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(a){try{let r;if("email"in a){const{email:h,password:f,options:g}=a;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Cm})}else if("phone"in a){const{phone:h,password:f,options:g}=a;r=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:Cm})}else throw new Yr("You must provide either an email or phone number and a password");const{data:o,error:u}=r;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const h=new rn;return this._returnResult({data:{user:null,session:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(a){var r,o,u,h;return await this._handleProviderSignIn(a.provider,{redirectTo:(r=a.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=a.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=a.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(h=a.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:r}=a;switch(r){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(a){var r,o,u,h,f,g,y,p,b,T,x;let k,z;if("message"in a)k=a.message,z=a.signature;else{const{chain:H,wallet:q,statement:I,options:O}=a;let M;if(ot())if(typeof q=="object")M=q;else{const Ne=window;if("ethereum"in Ne&&typeof Ne.ethereum=="object"&&"request"in Ne.ethereum&&typeof Ne.ethereum.request=="function")M=Ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=q}const $=new URL((r=O?.url)!==null&&r!==void 0?r:window.location.href),Z=await M.request({method:"eth_requestAccounts"}).then(Ne=>Ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=ig(Z[0]);let Q=(o=O?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Q){const Ne=await M.request({method:"eth_chainId"});Q=Lv(Ne)}const Oe={domain:$.host,address:X,statement:I,uri:$.href,version:"1",chainId:Q,nonce:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(h=O?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=O?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=O?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(p=O?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=O?.signInWithEthereum)===null||b===void 0?void 0:b.resources};k=Iv(Oe),z=await M.request({method:"personal_sign",params:[Hv(k),X]})}try{const{data:H,error:q}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:z},!((T=a.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(x=a.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Vt});if(q)throw q;if(!H||!H.session||!H.user){const I=new rn;return this._returnResult({data:{user:null,session:null},error:I})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:q})}catch(H){if(J(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async signInWithSolana(a){var r,o,u,h,f,g,y,p,b,T,x,k;let z,H;if("message"in a)z=a.message,H=a.signature;else{const{chain:q,wallet:I,statement:O,options:M}=a;let $;if(ot())if(typeof I=="object")$=I;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))$=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=I}const Z=new URL((r=M?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in $&&$.signIn){const X=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),O?{statement:O}:null));let Q;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")Q=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)Q=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)z=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),H=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${Z.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(u=(o=M?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((h=M?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((f=M?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((g=M?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((y=M?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((p=M?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((T=(b=M?.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||T===void 0)&&T.length?["Resources",...M.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const X=await $.signMessage(new TextEncoder().encode(z),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");H=X}}try{const{data:q,error:I}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:pa(H)},!((x=a.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(k=a.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Vt});if(I)throw I;if(!q||!q.session||!q.user){const O=new rn;return this._returnResult({data:{user:null,session:null},error:O})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:I})}catch(q){if(J(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async _exchangeCodeForSession(a){const r=await fa(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new ov;const{data:h,error:f}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:o},xform:Vt});if(await rt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const g=new rn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:u??null}),error:f})}catch(h){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(a){try{const{options:r,provider:o,token:u,access_token:h,nonce:f}=a,g=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Vt}),{data:y,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!y||!y.session||!y.user){const b=new rn;return this._returnResult({data:{user:null,session:null},error:b})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:y,error:p})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(a){var r,o,u,h,f;try{if("email"in a){const{email:g,options:y}=a;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await on(this.storage,this.storageKey));const{error:T}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=y?.data)!==null&&r!==void 0?r:{},create_user:(o=y?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:y?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:T})}if("phone"in a){const{phone:g,options:y}=a,{data:p,error:b}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(u=y?.data)!==null&&u!==void 0?u:{},create_user:(h=y?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(f=y?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:b})}throw new Yr("You must provide either an email or phone number.")}catch(g){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(a){var r,o;try{let u,h;"options"in a&&(u=(r=a.options)===null||r===void 0?void 0:r.redirectTo,h=(o=a.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:g}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:Vt});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const y=f.session,p=f.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),this._returnResult({data:{user:p,session:y},error:null})}catch(u){if(J(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(a){var r,o,u,h,f;try{let g=null,y=null;this.flowType==="pkce"&&([g,y]=await on(this.storage,this.storageKey));const p=await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(o=(r=a.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=a?.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:y}),headers:this.headers,xform:Ov});return!((h=p.data)===null||h===void 0)&&h.url&&ot()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:r},error:o}=a;if(o)throw o;if(!r)throw new Et;const{error:u}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(a){if(J(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const r=`${this.url}/resend`;if("email"in a){const{email:o,type:u,options:h}=a,{error:f}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:o,type:u,options:h}=a,{data:f,error:g}=await ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new Yr("You must provide either an email or phone number and a type")}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(a,r){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await a(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const r=await fa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?a=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const o=a.expires_at?a.expires_at*1e3-Date.now()<Oc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",a.expires_at),!o){if(this.userStorage){const f=await fa(this.userStorage,this.storageKey+"-user");f?.user?a.user=f.user:a.user=Bc()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=Ev(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:u,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(a){try{return a?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Fi}):await this._useSession(async r=>{var o,u,h;const{data:f,error:g}=r;if(g)throw g;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Et}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0,xform:Fi})})}catch(r){if(J(r))return zc(r)&&(await this._removeSession(),await rt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(a,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(a,r))}async _updateUser(a,r={}){try{return await this._useSession(async o=>{const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new Et;const f=u.session;let g=null,y=null;this.flowType==="pkce"&&a.email!=null&&([g,y]=await on(this.storage,this.storageKey));const{data:p,error:b}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:y}),jwt:f.access_token,xform:Fi});if(b)throw b;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Et;const r=Date.now()/1e3;let o=r,u=!0,h=null;const{payload:f}=Xr(a.access_token);if(f.exp&&(o=f.exp,u=o<=r),u){const{data:g,error:y}=await this._callRefreshToken(a.refresh_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:y}=await this._getUser(a.access_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});h={access_token:a.access_token,refresh_token:a.refresh_token,user:g.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(J(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async r=>{var o;if(!a){const{data:f,error:g}=r;if(g)throw g;a=(o=f.session)!==null&&o!==void 0?o:void 0}if(!a?.refresh_token)throw new Et;const{data:u,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(J(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(a,r){try{if(!ot())throw new Kr("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Kr(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new _m("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new _m("No code detected.");const{data:O,error:M}=await this._exchangeCodeForSession(a.code);if(M)throw M;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:h,refresh_token:f,expires_in:g,expires_at:y,token_type:p}=a;if(!h||!g||!f||!p)throw new Kr("No session defined in URL");const b=Math.round(Date.now()/1e3),T=parseInt(g);let x=b+T;y&&(x=parseInt(y));const k=x-b;k*1e3<=dn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${T}s`);const z=x-T;b-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,x,b):b-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,x,b);const{data:H,error:q}=await this._getUser(h);if(q)throw q;const I={provider_token:o,provider_refresh_token:u,access_token:h,expires_in:T,expires_at:x,refresh_token:f,token_type:p,user:H.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:a.type},error:null})}catch(o){if(J(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const r=await fa(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&r)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:u,error:h}=r;if(h&&!zc(h))return this._returnResult({error:h});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:g}=await this.admin.signOut(f,a);if(g&&!(sv(g)&&(g.status===404||g.status===401||g.status===403)||zc(g)))return this._returnResult({error:g})}return a!=="others"&&(await this._removeSession(),await rt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const r=mv(),o={id:r,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(a){return await this._useSession(async r=>{var o,u;try{const{data:{session:h},error:f}=r;if(f)throw f;await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",a,"session",h)}catch(h){await((u=this.stateChangeEmitters.get(a))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",h),console.error(h)}})}async resetPasswordForEmail(a,r={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await on(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var a;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(a=r.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var r;try{const{data:o,error:u}=await this._useSession(async h=>{var f,g,y,p,b;const{data:T,error:x}=h;if(x)throw x;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=a.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=a.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",k,{headers:this.headers,jwt:(b=(p=T.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(u)throw u;return ot()&&!(!((r=a.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:a.provider,url:o?.url},error:null})}catch(o){if(J(o))return this._returnResult({data:{provider:a.provider,url:null},error:o});throw o}}async linkIdentityIdToken(a){return await this._useSession(async r=>{var o;try{const{error:u,data:{session:h}}=r;if(u)throw u;const{options:f,provider:g,token:y,access_token:p,nonce:b}=a,T=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=h?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:g,id_token:y,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Vt}),{data:x,error:k}=T;return k?this._returnResult({data:{user:null,session:null},error:k}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new rn}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:k}))}catch(u){if(await rt(this.storage,`${this.storageKey}-code-verifier`),J(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(a){try{return await this._useSession(async r=>{var o,u;const{data:h,error:f}=r;if(f)throw f;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(a){const r=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await vv(async u=>(u>0&&await pv(200*Math.pow(2,u-1)),this._debug(r,"refreshing attempt",u),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:Vt})),(u,h)=>{const f=200*Math.pow(2,u);return h&&qc(h)&&Date.now()+f-o<dn})}catch(o){if(this._debug(r,"error",o),J(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",r,"url",o),ot()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:a,url:o},error:null}}async _recoverAndRefresh(){var a,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await fa(this.storage,this.storageKey);if(u&&this.userStorage){let f=await fa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await hn(this.userStorage,this.storageKey+"-user",f)),u.user=(a=f?.user)!==null&&a!==void 0?a:Bc()}else if(u&&!u.user&&!u.user){const f=await fa(this.storage,this.storageKey+"-user");f&&f?.user?(u.user=f.user,await rt(this.storage,this.storageKey+"-user"),await hn(this.storage,this.storageKey,u)):u.user=Bc()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const h=((r=u.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Oc;if(this._debug(o,`session has${h?"":" not"} expired with margin of ${Oc}s`),h){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),qc(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(u.access_token);!g&&f?.user?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(a){var r,o;if(!a)throw new Et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new no;const{data:h,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!h.session)throw new Et;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(u,"error",h),J(h)){const f={data:null,error:h};return qc(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(h),h}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(a,r,o=!0){const u=`#_notifyAllSubscribers(${a})`;this._debug(u,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:a,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(a,r)}catch(y){h.push(y)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(u,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await rt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},a),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await hn(this.userStorage,this.storageKey+"-user",{user:r.user});const u=Object.assign({},r);delete u.user;const h=Em(u);await hn(this.storage,this.storageKey,h)}else{const u=Em(r);await hn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await rt(this.storage,this.storageKey),await rt(this.storage,this.storageKey+"-code-verifier"),await rt(this.storage,this.storageKey+"-user"),this.userStorage&&await rt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&ot()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),dn);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-a)/dn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${dn}ms, refresh threshold is ${Vc} ticks`),u<=Vc&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof tg)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(a){this._debug("#visibilityChangedCallback","error",a)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const r=`#_onVisibilityChanged(${a})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,r,o){const u=[`provider=${encodeURIComponent(r)}`];if(o?.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[h,f]=await on(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(g.toString())}if(o?.queryParams){const h=new URLSearchParams(o.queryParams);u.push(h.toString())}return o?.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${a}?${u.join("&")}`}async _unenroll(a){try{return await this._useSession(async r=>{var o;const{data:u,error:h}=r;return h?this._returnResult({data:null,error:h}):await ne(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(a){try{return await this._useSession(async r=>{var o,u;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:y,error:p}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(o=h?.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(a.factorType==="totp"&&y.type==="totp"&&(!((u=y?.totp)===null||u===void 0)&&u.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),this._returnResult({data:y,error:null}))})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _verify(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?Qv(a.webauthn.credential_response):Yv(a.webauthn.credential_response)})}:{code:a.code}),{data:g,error:y}=await ne(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return y?this._returnResult({data:null,error:y}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:y}))})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:u,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await ne(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Fv(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Pv(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(a){const{data:r,error:o}=await this._challenge({factorId:a.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:a.factorId,challengeId:r.id,code:a.code})}async _listFactors(){var a;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const h of(a=r?.factors)!==null&&a!==void 0?a:[])u.all.push(h),h.status==="verified"&&u[h.factor_type].push(h);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(a){var r,o,u,h;if(a)try{const{payload:k}=Xr(a);let z=null;k.aal&&(z=k.aal);let H=z;const{data:{user:q},error:I}=await this.getUser(a);if(I)return this._returnResult({data:null,error:I});((o=(r=q?.factors)===null||r===void 0?void 0:r.filter($=>$.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(H="aal2");const M=k.amr||[];return{data:{currentLevel:z,nextLevel:H,currentAuthenticationMethods:M},error:null}}catch(k){if(J(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:f},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:y}=Xr(f.access_token);let p=null;y.aal&&(p=y.aal);let b=p;((h=(u=f.user.factors)===null||u===void 0?void 0:u.filter(k=>k.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(b="aal2");const x=y.amr||[];return{data:{currentLevel:p,nextLevel:b,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?await ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:o.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Et})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(a,r){try{return await this._useSession(async o=>{const{data:{session:u},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Et});const f=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&ot()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(J(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(a,r){try{return await this._useSession(async o=>{const{data:{session:u},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Et});const f=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&ot()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(o){if(J(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:r},error:o}=a;return o?this._returnResult({data:null,error:o}):r?await ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Et})})}catch(a){if(J(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async r=>{const{data:{session:o},error:u}=r;return u?this._returnResult({data:null,error:u}):o?(await ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Et})})}catch(r){if(J(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(a,r={keys:[]}){let o=r.keys.find(g=>g.kid===a);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(g=>g.kid===a),o&&this.jwks_cached_at+av>u)return o;const{data:h,error:f}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,o=h.keys.find(g=>g.kid===a),!o)?null:o}async getClaims(a,r={}){try{let o=a;if(!o){const{data:k,error:z}=await this.getSession();if(z||!k.session)return this._returnResult({data:null,error:z});o=k.session.access_token}const{header:u,payload:h,signature:f,raw:{header:g,payload:y}}=Xr(o);r?.allowExpired||kv(h.exp);const p=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!p){const{error:k}=await this.getUser(o);if(k)throw k;return{data:{claims:h,header:u,signature:f},error:null}}const b=Av(u.alg),T=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,T,f,hv(`${g}.${y}`)))throw new Pc("Invalid JWT signature");return{data:{claims:h,header:u,signature:f},error:null}}catch(o){if(J(o))return this._returnResult({data:null,error:o});throw o}}}Ts.nextInstanceID={};const nb=Ts,sb="2.98.0";let ys="";typeof Deno<"u"?ys="deno":typeof document<"u"?ys="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ys="react-native":ys="node";const rb={"X-Client-Info":`supabase-js-${ys}/${sb}`},ob={headers:rb},lb={schema:"public"},cb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ub={};function ks(n){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ks(n)}function db(n,a){if(ks(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var o=r.call(n,a);if(ks(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function hb(n){var a=db(n,"string");return ks(a)=="symbol"?a:a+""}function fb(n,a,r){return(a=hb(a))in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n}function Bm(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),r.push.apply(r,o)}return r}function He(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Bm(Object(r),!0).forEach(function(o){fb(n,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Bm(Object(r)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o))})}return n}const mb=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),gb=()=>Headers,yb=(n,a,r)=>{const o=mb(r),u=gb();return async(h,f)=>{var g;const y=(g=await a())!==null&&g!==void 0?g:n;let p=new u(f?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${y}`),o(h,He(He({},f),{},{headers:p}))}};function pb(n){return n.endsWith("/")?n:n+"/"}function vb(n,a){var r,o;const{db:u,auth:h,realtime:f,global:g}=n,{db:y,auth:p,realtime:b,global:T}=a,x={db:He(He({},y),u),auth:He(He({},p),h),realtime:He(He({},b),f),storage:{},global:He(He(He({},T),g),{},{headers:He(He({},(r=T?.headers)!==null&&r!==void 0?r:{}),(o=g?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?x.accessToken=n.accessToken:delete x.accessToken,x}function bb(n){const a=n?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pb(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var wb=class extends nb{constructor(n){super(n)}},xb=class{constructor(n,a,r){var o,u;this.supabaseUrl=n,this.supabaseKey=a;const h=bb(n);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:lb,realtime:ub,auth:He(He({},cb),{},{storageKey:f}),global:ob},y=vb(r??{},g);if(this.storageKey=(o=y.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=y.global.headers)!==null&&u!==void 0?u:{},y.accessToken)this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=y.auth)!==null&&p!==void 0?p:{},this.headers,y.global.fetch)}this.fetch=yb(a,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(He({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new s0(new URL("rest/v1",h).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch,timeout:y.db.timeout,urlLengthLimit:y.db.urlLengthLimit}),this.storage=new J0(this.storageUrl.href,this.headers,this.fetch,r?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Xp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,a={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,a,r)}channel(n,a={config:{}}){return this.realtime.channel(n,a)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,a,r;if(n.accessToken)return await n.accessToken();const{data:o}=await n.auth.getSession();return(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:a,detectSessionInUrl:r,storage:o,userStorage:u,storageKey:h,flowType:f,lock:g,debug:y,throwOnError:p},b,T){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wb({url:this.authUrl.href,headers:He(He({},x),b),storageKey:h,autoRefreshToken:n,persistSession:a,detectSessionInUrl:r,storage:o,userStorage:u,flowType:f,lock:g,debug:y,throwOnError:p,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new S0(this.realtimeUrl.href,He(He({},n),{},{params:He(He({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a?.access_token)})}_handleTokenChanged(n,a,r){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Sb=(n,a,r)=>new xb(n,a,r);function _b(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const a=n.version;if(a==null)return!1;const r=a.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}_b()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Tb="https://xwhotgkmlbqcyjpdhlbt.supabase.co",kb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh3aG90Z2ttbGJxY3lqcGRobGJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwNjA5NTksImV4cCI6MjA4NzYzNjk1OX0.VI7sMUCh-IxSCSEouagYNBBIuQExbhF7uePSO0oNuXc",ng=Sb(Tb,kb);function Ab(){let n=localStorage.getItem("fluoro_device_id");return n||(n=crypto.randomUUID(),localStorage.setItem("fluoro_device_id",n)),n}const sg=Ab();async function rg(n,a){try{await ng.from(n).upsert({device_id:sg,state:a,updated_at:new Date().toISOString()},{onConflict:"device_id"})}catch(r){console.warn(`[fluoro] Cloud sync failed for ${n}:`,r.message)}}async function og(n){try{const{data:a,error:r}=await ng.from(n).select("state, updated_at").eq("device_id",sg).maybeSingle();if(r)throw r;return a?.state??null}catch(a){return console.warn(`[fluoro] Cloud restore failed for ${n}:`,a.message),null}}const lg=ue.createContext(),cg="fluoro_app_state",Mm="fluoro_app_state";function jb(){return new Date().toISOString().split("T")[0]}const yn={onboardingComplete:!1,currentDay:1,completedDays:{},streak:{current:0,longest:0,lastStudyDate:null},xp:0,rsvpWpm:300,rsvpChunk:1};function Eb(){const n=localStorage.getItem("fluoro_currentDay"),a=localStorage.getItem("fluoro_completedDays"),r=localStorage.getItem("fluoro_rsvpWpm"),o=localStorage.getItem("fluoro_rsvpChunk");if(n||a){const u={...yn,onboardingComplete:!0,currentDay:n?JSON.parse(n):1,completedDays:a?JSON.parse(a):{},rsvpWpm:r&&parseInt(r)||300,rsvpChunk:o&&parseInt(o)||1};return["fluoro_currentDay","fluoro_completedDays","fluoro_rsvpWpm","fluoro_rsvpChunk","fluoro_darkMode"].forEach(h=>localStorage.removeItem(h)),u}return null}function Nm(){try{const n=localStorage.getItem(cg);if(n)return{...yn,...JSON.parse(n)};const a=Eb();return a||yn}catch{return yn}}function Rb(n,a){return a?!n||n.xp===0?{...yn,...a}:(a.xp||0)>(n.xp||0)?{...yn,...a}:n:n}function Cb(n,a){switch(a.type){case"HYDRATE_FROM_CLOUD":return{...n,...a.state};case"SET_DAY":return{...n,currentDay:Math.max(1,Math.min(30,a.day))};case"TOGGLE_DAY":{const r=a.day,o={...n.completedDays,[r]:!n.completedDays[r]};return{...n,completedDays:o}}case"ADD_XP":{const r=n.xp+a.amount;return{...n,xp:r}}case"UPDATE_STREAK":{const r=jb();if(n.streak.lastStudyDate===r)return n;const o=new Date(Date.now()-864e5).toISOString().split("T")[0],u=n.streak.lastStudyDate===o?n.streak.current+1:1;return{...n,streak:{current:u,longest:Math.max(n.streak.longest,u),lastStudyDate:r}}}case"SET_RSVP_WPM":return{...n,rsvpWpm:a.wpm};case"SET_RSVP_CHUNK":return{...n,rsvpChunk:a.chunk};case"COMPLETE_ONBOARDING":return{...n,onboardingComplete:!0};default:return n}}function Db({children:n}){const[a,r]=ue.useReducer(Cb,null,Nm),o=ue.useRef(!1);return ue.useEffect(()=>{o.current||(o.current=!0,og(Mm).then(u=>{if(u){const h=Nm(),f=Rb(h,u);f!==h&&r({type:"HYDRATE_FROM_CLOUD",state:f})}}))},[]),ue.useEffect(()=>{try{localStorage.setItem(cg,JSON.stringify(a))}catch{}rg(Mm,a)},[a]),d.jsx(lg.Provider,{value:{state:a,dispatch:r},children:n})}function bn(){const n=ue.useContext(lg);if(!n)throw new Error("useApp must be used within AppProvider");return n}const ug=ue.createContext(),dg="fluoro_study_state",Um="fluoro_study_state",mn={quizResults:{},flaggedQuestions:[],missedQuestions:[],reviewQueue:[],totalAnswered:0,totalCorrect:0,maxWpm:300,domainsStudied:[],lateNightSessions:0,readSections:{}};function Ob(){try{const n=localStorage.getItem("fluoro_quizResults");if(n){const a=JSON.parse(n);return localStorage.removeItem("fluoro_quizResults"),a}}catch{}return null}function Lm(){try{const n=localStorage.getItem(dg);if(n)return{...mn,...JSON.parse(n)};const a=Ob();return a?{...mn,quizResults:a}:mn}catch{return mn}}function zb(n,a){if(!a)return n;if(!n||n.totalAnswered===0)return{...mn,...a};const r=(n.totalAnswered||0)+Object.keys(n.readSections||{}).length;return(a.totalAnswered||0)+Object.keys(a.readSections||{}).length>r?{...mn,...a}:n}function qb(n,a){switch(a.type){case"HYDRATE_FROM_CLOUD":return{...n,...a.state};case"RECORD_ANSWER":{const{domain:r,correct:o,questionIndex:u}=a,h=n.quizResults[r]||{correct:0,wrong:0},f={...n.quizResults,[r]:{correct:h.correct+(o?1:0),wrong:h.wrong+(o?0:1)}},g=o?n.missedQuestions:[...new Set([...n.missedQuestions,`${r}-${u}`])],y=n.domainsStudied.includes(r)?n.domainsStudied:[...n.domainsStudied,r],p=new Date().getHours();return{...n,quizResults:f,missedQuestions:g,totalAnswered:n.totalAnswered+1,totalCorrect:n.totalCorrect+(o?1:0),domainsStudied:y,lateNightSessions:p>=22?n.lateNightSessions+1:n.lateNightSessions}}case"TOGGLE_FLAG":{const r=a.questionId,o=n.flaggedQuestions.includes(r)?n.flaggedQuestions.filter(u=>u!==r):[...n.flaggedQuestions,r];return{...n,flaggedQuestions:o}}case"SET_MAX_WPM":return{...n,maxWpm:Math.max(n.maxWpm,a.wpm)};case"CLEAR_MISSED":return{...n,missedQuestions:[]};case"MARK_SECTION_READ":{const{domain:r,sectionIndex:o}=a,u=n.readSections[r]||[];return u.includes(o)?n:{...n,readSections:{...n.readSections,[r]:[...u,o].sort((h,f)=>h-f)}}}default:return n}}function Bb({children:n}){const[a,r]=ue.useReducer(qb,null,Lm),o=ue.useRef(!1);return ue.useEffect(()=>{o.current||(o.current=!0,og(Um).then(u=>{if(u){const h=Lm(),f=zb(h,u);f!==h&&r({type:"HYDRATE_FROM_CLOUD",state:f})}}))},[]),ue.useEffect(()=>{try{localStorage.setItem(dg,JSON.stringify(a))}catch{}rg(Um,a)},[a]),d.jsx(ug.Provider,{value:{study:a,studyDispatch:r},children:n})}function ba(){const n=ue.useContext(ug);if(!n)throw new Error("useStudy must be used within StudyProvider");return n}const Nc=[{id:"first-quiz",name:"First Steps",desc:"Complete your first quiz question",icon:""},{id:"ten-correct",name:"Sharp Shooter",desc:"Get 10 questions correct",icon:""},{id:"hundred-questions",name:"Centurion",desc:"Answer 100 questions",icon:""},{id:"week-streak",name:"Week Warrior",desc:"7-day study streak",icon:""},{id:"month-streak",name:"Unstoppable",desc:"30-day study streak",icon:""},{id:"domain-master",name:"Domain Master",desc:"90%+ accuracy in any domain",icon:""},{id:"all-domains",name:"Renaissance",desc:"Study all 7 domains",icon:""},{id:"speed-reader",name:"Speed Demon",desc:"Speed read at 500+ WPM",icon:""},{id:"completionist",name:"Completionist",desc:"Finish all 30 days",icon:""},{id:"night-owl",name:"Night Owl",desc:"Study after 10 PM",icon:""}],Mb={speedRead:15};function Qc(n){return Math.floor(100*Math.pow(1.5,n-1))}function hg(n){let a=1;for(;n>=Qc(a+1);)a++;return a}const fg=["","Trainee","Student","Resident","Fellow","Attending","Specialist","Expert","Master"];function Nb({onGoHome:n}){const{theme:a}=ve(),{state:r}=bn(),o=hg(r.xp);return d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 0",marginBottom:8},children:[d.jsxs("div",{onClick:n,style:{cursor:"pointer"},children:[d.jsxs("div",{style:{fontSize:22,fontWeight:700,color:a.text,letterSpacing:-.5},children:["Fluoro",d.jsx("span",{style:{color:a.primary},children:"Path"})]}),d.jsxs("div",{style:{fontSize:12,color:a.textMuted,marginTop:2},children:[fg[o]||"Trainee","  ",r.xp," XP"]})]}),d.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:r.streak.current>0&&d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:a.warningBg,padding:"6px 12px",borderRadius:20},children:[d.jsx("span",{style:{fontSize:16},children:""}),d.jsx("span",{style:{fontSize:14,fontWeight:700,color:a.warning},children:r.streak.current})]})})]})}const Ub=[{id:"home",label:"Home",icon:n=>d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),d.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})},{id:"study",label:"Study",icon:n=>d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),d.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]})},{id:"review",label:"Review",icon:n=>d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("polyline",{points:"23 4 23 10 17 10"}),d.jsx("polyline",{points:"1 20 1 14 7 14"}),d.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})},{id:"progress",label:"Progress",icon:n=>d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),d.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),d.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]})},{id:"profile",label:"Profile",icon:n=>d.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}];function Lb({activeTab:n,onTabChange:a,reviewCount:r=0}){const{theme:o}=ve();return d.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:56,background:o.tabBar,borderTop:`1px solid ${o.tabBarBorder}`,display:"flex",justifyContent:"space-around",alignItems:"center",paddingBottom:"env(safe-area-inset-bottom, 0px)",zIndex:100},children:Ub.map(u=>{const h=n===u.id,f=h?o.tabActive:o.tabInactive;return d.jsxs("button",{onClick:()=>a(u.id),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,background:"none",border:"none",cursor:"pointer",padding:"6px 0",position:"relative",minHeight:48},children:[h&&d.jsx("div",{style:{position:"absolute",top:0,left:"25%",right:"25%",height:2,borderRadius:1,background:o.tabActive}}),u.icon(f),d.jsx("span",{style:{fontSize:11,fontWeight:h?600:400,color:f,letterSpacing:.2},children:u.label}),u.id==="review"&&r>0&&d.jsx("div",{style:{position:"absolute",top:4,right:"50%",marginRight:-20,background:o.error,color:"#FFF",fontSize:10,fontWeight:700,width:18,height:18,borderRadius:9,display:"flex",alignItems:"center",justifyContent:"center"},children:r>9?"9+":r})]},u.id)})})}const et=[{id:"equipment",name:"Equipment & Physics",color:"#3B82F6",icon:"",weight:25,subtopics:["Image Intensifier (II) construction & operation","Input/output phosphors, photocathode, electron optics","Brightness gain = minification gain  flux gain","Flat Panel Detectors (FPD)  DEL, scintillator, photodiode","FPD vs II: distortion, dynamic range, spatial resolution","TV camera systems (vidicon, plumbicon)","Magnification modes & FOV","Automatic Brightness Control (ABC/ABS)","Collimation & filtration systems","X-ray generator types (single-phase, three-phase, high-frequency)","C-arm configurations (isocentric vs non-isocentric)","X-ray tube components: cathode, anode, filament, focusing cup","Characteristic vs bremsstrahlung radiation","X-ray interactions: photoelectric, Compton, pair production","Exponential attenuation (I = Ie^x) & HVL","Focal spot: nominal, measured, effective, actual & line focus principle","Scatter radiation patterns & isoexposure curves","Dead-man switch & cumulative 5-min timer","Collimator/shutter protection requirements","Barrier interlock (auto-terminate when receptor removed)","Source-to-skin distance minimums (12 / 15 / 18)","Visual physiology: rods vs cones, photopic 10 scotopic acuity","Image integration time (0.2 sec) & optimal viewing distance (1215)"],keyNumbers:["Brightness gain: 5,00020,000","Conversion factor: 100300 cdm/mRs","FPD DEL size: 200 m  1,400 m","Max spatial resolution = 1  (2  pitch)","Binning reduces resolution to 50%, data rate to 25%","Input window: ~1 mm aluminum","Output phosphor: P20 (green-emitting)","~2,000 luminescence photons per 25-keV photoelectron","HVL minimum: 2.3 mm Al at 80 kVp (fluoro)","Grid ratios for fluoro: 6:1 to 16:1","Tube housing leakage: <100 mR/hr at 1 meter","Cumulative timer: audible signal at 5 minutes","Min SSD stationary: 12 (should be 18); mobile: 12","Photoelectric effect dominates at diagnostic energies (<100 kVp)","Single-phase: 100% ripple; 3-phase 6-pulse: 13%; 12-pulse: 4%; HF: <1%","Eye integration time: 0.2 sec; optimal viewing: 1215 inches","Photopic (cone) acuity 10 scotopic (rod) acuity"]},{id:"digital",name:"Digital Fluoroscopy",color:"#8B5CF6",icon:"",weight:15,subtopics:["Binary/decimal conversion, bit depth","Pixel matrix sizes (512 to 1024)","Gray levels: 8-bit = 256 shades","ADC (analog-to-digital converter)","Last Image Hold","Gray-scale processing (window/level)","Temporal frame averaging (noise 44% with 5 frames)","Edge enhancement technique","Digital Subtraction Angiography (DSA)","Direct vs indirect conversion flat panel detectors","Detective Quantum Efficiency (DQE)","ABC vs AGC (tube output control vs video gain control)","Image lag: vidicon (more) vs plumbicon (less)","Flare/veiling glare measurement (10% lead disc)","Conversion factor degradation over time","Cine fluorography frame rates & exposure per frame","RS-170 video signal standard (1.0 V peak-to-peak)","II-specific distortions: pincushion, S, vignetting"],keyNumbers:["8-bit = 2 = 256 gray levels","4-bit = 2 = 16 gray levels","Frame averaging of 5 frames: noise to 44%","Digital fluoro matrix: 5121,024 pixels","Digital chest radiography: 1,5002,000 pixels/side","Cine: ~4 R/frame (9), ~7 R/frame (6), ~15 R/frame (23 cm)","Cine patient entrance: 50150+ rads","RS-170: 1.0 V peak-to-peak composite video","DQE: FPD > II (better image per unit dose)"]},{id:"radprotection",name:"Radiation Protection",color:"#EF4444",icon:"",weight:25,subtopics:["ALARA principle & levels (IIV)","Time, distance, shielding","Inverse square law","Collimation  reduces dose AND scatter","Personnel monitoring (film badge, TLD, pocket ionization)","Protective equipment (aprons, thyroid shields, glasses)","Lead equivalence requirements","Scatter radiation patterns","Leakage radiation limits","IRP (Interventional Reference Point)","PKA (kerma air product)  Gycm","PKA constant along source-to-receptor axis","Three radiation types operator receives: useful beam, leakage, scatter","Apron attenuation varies with kVp (96% at 75 kVp vs 91% at 100 kVp)","Lead apron covers ~80% of active bone marrow","Protective eye lenses: 0.25 mm Pb reduces 8590%","Thyroid shield requirement during fluoroscopy","Gloves required when hand in primary beam","Mechanical holding devices preferred over hand-holding","Proper apron storage (hangers  never fold)","Fluoro rooms: secondary barriers only (unless combined unit)","Scatter radiation can travel around corners","Gonad shield types: flat contact, shaped contact, shadow","Bone marrow dose: highest from barium enema, upper GI, abdominal angio","Film badge accuracy 25%; TLD accuracy 9%","Quality factor Q = 1 for x-rays (1 rad = 1 rem)"],keyNumbers:["Routine fluoro limit: 5 R/min (without auto), 10 R/min (with auto)","Boost mode: up to 20 R/min at tabletop","Exposure rate limit: 88 mGy/min","Boost rate limit: 176 mGy/min","Leakage limit: 100 mR at 1 meter","1 foot from patient: ~500 mR/hour scatter","0.25 mm Pb if 5 mR/hour","5 Gray  Substantial Radiation Dose Level alert","Dose per pulse: (ratio of pulse rates) relationship","Max mA recommendation: 2.2 R/min per mA at 80 kVp","At 75 kVp: 0.25 mm Pb = 96%, 0.5 mm Pb = 99%","At 100 kVp: 0.25 mm Pb = 91%, 0.5 mm Pb = 95.3%","Lead apron covers ~80% active bone marrow","0.25 mm Pb eye lenses: 8590% reduction","Film badge: 10 mrad  700 rads range, 25% accuracy","TLD: 9% accuracy, reusable, better low-dose sensitivity","Q factor: 1 for x-rays/gamma/beta (1 rad = 1 rem)"]},{id:"doselimits",name:"Dose Limits & Regulations",color:"#F59E0B",icon:"",weight:15,subtopics:["Occupational whole-body: 50 mSv/year","Lifetime dose: 10 mSv  age","Lens of eye: 150 mSv/year at 0.3 cm depth","Skin/extremities: 500 mSv/year","Public: 0.1 rem/year, 0.002 rem/hour","Fetal limits: 5 mSv total, 0.5 mSv/month","Radiation area vs high radiation area definitions","California reporting requirements","Equipment monitoring frequency (weekly/annual)","ALARA investigation levels (IIV fractions)","Declared pregnant woman: voluntary written notice + est. conception date","If fetal dose already 0.5 rem at declaration: 0.05 rem limit for remainder","Uniform monthly exposure rate for pregnant workers","Deep-dose equivalent measured at 1 cm tissue depth","CA: x-ray machine registration within 30 days, renewal July even years","Violation of CA radiation regs = misdemeanor","Posting: CAUTION X-RAY signs, current regs, Form RH-2364","No deliberate exposure for training without physician Rx","Occupational dose excludes personal medical/dental exposure","High-level control: continuous activation + continuous audible signal","Overexposure: report to Radiologic Health Branch","Supervisor responsibility: protection, equipment, authorized operators","Mandatory monitoring: high radiation area entrants + mobile x-ray operators","Rad protection program: develop, document, implement, review annually","CA gonad shielding: 0.5 mm Pb (stricter than federal 0.25 mm)","NVLAP / NSF Standard 16 for monitoring service certification"],keyNumbers:["Whole body occupational: 50 mSv/year","Lifetime: 10 mSv  age in years","Lens: 150 mSv/year (measured at 0.3 cm depth)","Skin/extremities: 500 mSv/year","Public annual: 1 mSv (0.1 rem)","Public hourly: 0.02 mSv (0.002 rem)","Fetal total pregnancy: 5 mSv (0.5 rem)","Fetal monthly: 0.5 mSv (0.05 rem)","If already at 0.5 rem when declared: 0.05 rem limit for remainder","Radiation area: 0.05 mSv/hr at 30 cm","High radiation area: 1 mSv/hr at 30 cm","Cataract threshold: ~750 mGy (several hundred rads)","Report immediately: 25 rem total effective","Report 24hr: 5 rem total effective","Deep-dose equivalent: measured at 1 cm (1000 mg/cm)","Eye dose: measured at 0.3 cm (300 mg/cm)","CA machine registration: within 30 days; renew July even years","CA gonad shielding: 0.5 mm Pb equivalent","High-level fluoro: 20 R/min max + audible signal required"]},{id:"radbio",name:"Radiation Biology",color:"#10B981",icon:"",weight:10,subtopics:["Direct vs indirect DNA damage","Deterministic vs stochastic effects","Linear non-threshold (LNT) model","Somatic vs genetic effects","Radiosensitivity factors (division rate, differentiation, metabolism)","Carcinogenesis (initiation  promotion  progression)","Complete vs incomplete carcinogen","Latent period: 5 yr leukemia, 220 yr solid tumors","Heritable effects (demonstrated in mice, not humans)","Genetically Significant Dose (GSD)","Cellular amplification of radiation damage","Dose-rate dependence for genetic effects","Gross cellular effects (chromosome breaks, giant cells, etc.)","Historical evidence groups (radiologists, dial painters, miners, A-bomb)","Cancer rank order: breast, thyroid, blood, lung, GI, bone","Radiation-induced life-span shortening","Mitotic delay (usually reversible)","DNA as critical target  controls enzyme synthesis & replication","Three factors: dose rate, total dose, cell type"],keyNumbers:["25 rads: no detectable injury","Temporary sterility: 30 rads (spermatogonia depleted ~50 rads)","Cataract: only disease directly linked to long-term radiation","Most frequent radiation cancers: breast, thyroid, blood, lung, GI, bone","DNA repair: ~24 hours after irradiation","Skin repopulation: occurs over weeks","Latent period: 5 yr leukemia, 220 yr solid tumors","Early radiologists: skin cancer, leukemia (historical evidence)","Radium dial painters: bone malignancies","Uranium miners: lung cancer","A-bomb survivors: leukemia + solid tumors","Mitotic delay: usually reversible","Female oocytes: cannot be replaced (permanent damage)"]},{id:"skineffects",name:"Skin Effects & Fetal Dose",color:"#EC4899",icon:"",weight:5,subtopics:["Skin dose thresholds and timelines","Erythema, desquamation, ulceration progression","Detailed skin table: 2 Gy erythema, 6 Gy epilation, 7 Gy permanent, 10 Gy necrosis","Fractionation benefit (DNA repair, stem cell repopulation)","Serial radiation timing rules","Pre-existing risk factors (diabetes, autoimmune, obesity)","Fetal dose thresholds by gestational period","Pre-implantation (02 wks): all-or-none","Organogenesis (38 wks): malformations  most sensitive to teratogenesis","Fetal growth (9 wksbirth): microcephaly, intellectual disability, growth retardation","Fetal dose calculation (2% of skin dose)","50 rads  possible spontaneous abortion","10 rads  deleterious effects in animal embryos","10-day rule / 14-day rule for scheduling exams","Termination never justified from diagnostic x-ray alone","Gonad irradiation: temp sterility 30 rads male; female oocytes irreplaceable","Cataract threshold: several hundred rads acute (~750 mGy)"],keyNumbers:["<2 Gy: no observable skin effects",">2 Gy: erythema within hours, fades 48 hrs","6 Gy: temporary epilation","7 Gy: permanent erythema",">5 Gy: second erythema ~10 days, epilation possible","10 Gy: moist desquamation, dermal necrosis possible",">15 Gy: vascular damage, ulceration, necrosis","Moist desquamation confirms >10 Gy","Serial 10 Gy: wait 46 weeks","Serial >10 Gy: wait 812 weeks","Fetal <100 mGy: no increased malformation/death","Fetal 100200 mGy: very low malformation risk","Fetal >500 mGy: significant risk CNS/growth","Fetal dose  2% of skin dose","Termination never justified from diagnostic x-ray","50 rads to fetus: possible spontaneous abortion","10 rads: deleterious effects shown in animal embryos","Temp sterility: 30 rads male; 50 rads depletes spermatogonia","Female oocytes: cannot be replaced (permanent)","Cataract: ~750 mGy (several hundred rads) acute threshold"]},{id:"qa",name:"Quality Assurance & Image Quality",color:"#06B6D4",icon:"",weight:5,subtopics:["Resolution testing and MTF","High contrast vs low contrast resolution testing","Contrast ratio measurement","Vignetting, pincushion distortion, S distortion","Veiling glare and lag","Quantum mottle","Half-value layer (HVL) determination","Phantom testing requirements","Relative sharpness = SOD/OID","Four steps of QA: acceptance, baseline, diagnosis, verification","QC test frequency: daily, weekly, semi-annual, annual","Daily QC: brightness, interlocks, protective devices, collimation","Semi-annual QC: shutters, ABC, resolution, HVL, dose rates, apron integrity","25% output increase = action level for investigation","Acceptance testing checklist (20+ items by physicist)","QC required after repair/replacement before human use","California: weekly kVp/mA monitoring","Annual physicist review (with auto exposure)","Triennial review (without auto exposure)","kVp accuracy: 5%; mAs linearity: 0.10  sum criterion","Exposure reproducibility: 5% coefficient of variation","Dose reduction factors (QA 2, collimation 1.53, gonad shield 100)","QC instrument list (penetrometer, phantom, dosimeter, etc.)","QA records: 3 years; film processor records: 1 year"],keyNumbers:["Large area contrast ratio: ~120 (10% surrounding area)","Lag: old II 3040 ms, new systems ~3 ms","Relative sharpness = SOD / OID","Weekly: monitor kVp and mA","Annually: qualified physicist review (with auto)","Every 3 years: without auto exposure","Annual: review rad protection program","25% output increase over calibrated = action level","If calibrated >4.0 R/min: test against 5 R/min ceiling","kVp accuracy: 5% (or 2 kVp at 60100 kVp)","mAs linearity: difference 0.10  sum of consecutive settings","Exposure reproducibility: 5% coefficient of variation","6 mode with grid: 23 R/min; 9 no grid: 1.52.5 R/min","Room-to-room difference >25% = investigate","QA records retention: 3 years minimum","Film processor records: 1 year minimum","Dose reduction: QA=2, collimation=1.53, rare earth=24, gonad=100","Post-repair QC required before use on humans"]}],va=[{domain:"equipment",q:"What are the two components of brightness gain?",a:"Minification gain  Flux gain. Minification gain = ratio of input to output phosphor areas. Flux gain = photons at output per photon at input.",difficulty:1},{domain:"equipment",q:"What material is the image intensifier input window made of, and why?",a:"Aluminum (~1 mm thick). Minimizes x-ray absorption and scattering while providing mechanical strength with its curved convex shape.",difficulty:1},{domain:"equipment",q:"What is the output phosphor material and what color does it emit?",a:"P20 phosphor  emits green light. Produces ~2,000 luminescence photons per accelerated 25-keV photoelectron.",difficulty:2},{domain:"equipment",q:"How does a flat panel detector (FPD) convert x-rays to a digital signal?",a:"X-rays  CsI scintillator converts to light  photodiode converts light to electronic signal  readout electronics digitize the signal. Each DEL performs this independently.",difficulty:2},{domain:"equipment",q:"What is the formula for maximum spatial resolution of an FPD?",a:"Max spatial resolution = 1  (2  pitch), where pitch = distance between DEL centers in mm.",difficulty:2},{domain:"equipment",q:"What happens to spatial resolution and data rate when you use 22 binning on an FPD?",a:"Spatial resolution decreases to 50% of unbinned value. Data rate drops to 25% (4 DELs binned to 1 pixel).",difficulty:3},{domain:"equipment",q:"List 3 advantages of FPD over image intensifiers.",a:"1) No spatial distortion (uniform resolution across field), 2) Extended dynamic range, 3) Greater stability, 4) Smaller physical size. Also: no pincushion/S distortion artifacts.",difficulty:2},{domain:"equipment",q:"What is the difference between isocentric and non-isocentric C-arm geometry?",a:"Isocentric: organ at isocenter, stays in FOV at any angle, patient skin closer to IRP. Used for cardiac/neuro. Non-isocentric: patient farther from source than isocenter, skin farther from IRP. Used for vascular.",difficulty:3},{domain:"equipment",q:"What is the minimum HVL for fluoroscopy at 80 kVp?",a:"2.3 mm Al (minimum). 3.0 mm Al is recommended.",difficulty:2},{domain:"equipment",q:"What grid ratios are typical for fluoroscopy?",a:"6:1 to 16:1. Removing the grid can reduce patient dose by approximately 50%.",difficulty:2},{domain:"digital",q:"How many gray levels does an 8-bit system encode?",a:"2 = 256 different gray levels (0255).",difficulty:1},{domain:"digital",q:"How much does temporal frame averaging of 5 frames reduce image noise?",a:"Reduces noise to 44% of original. Trade-off: increased motion blur.",difficulty:2},{domain:"digital",q:"Explain Last Image Hold.",a:"Stores the final fluoroscopy frame and displays it continuously after x-rays are turned off. Allows review without additional radiation exposure.",difficulty:1},{domain:"digital",q:"What is the edge enhancement technique in digital fluoroscopy?",a:"Subtract a blurred version of the image from the original to create an 'edge image,' then add that edge image back to the original. Enhances structural boundaries.",difficulty:2},{domain:"digital",q:"What does DSA stand for and what is the basic principle?",a:"Digital Subtraction Angiography. Subtract a pre-contrast 'mask' image from post-contrast images to isolate vascular structures by removing bone and soft tissue.",difficulty:2},{domain:"radprotection",q:"What is PKA and why is it useful?",a:"Kerma Air Product (Gycm) = air kerma  x-ray field size. Constant along the x-ray axis. Good metric for stochastic risk because it captures both beam intensity AND volume of tissue irradiated. Also reveals poor collimation habits.",difficulty:2},{domain:"radprotection",q:"Why is PKA constant along the source-to-receptor axis?",a:"As air kerma decreases with inverse square of distance, the x-ray field area increases with inverse square of distance. These cancel out, making the product constant.",difficulty:3},{domain:"radprotection",q:"What is the leakage radiation limit?",a:"100 mR at 1 meter from the x-ray tube housing.",difficulty:1},{domain:"radprotection",q:"What is the scatter radiation exposure rate 1 foot from the patient?",a:"Approximately 500 mR per hour.",difficulty:2},{domain:"radprotection",q:"What happens to patient dose and operator exposure if you double the collimator opening?",a:"Both double. Larger field = more tissue irradiated and more scatter produced.",difficulty:2},{domain:"radprotection",q:"What is the maximum exposure rate for routine fluoroscopy?",a:"Without automatic exposure: 5 R/min. With automatic exposure: 10 R/min. Recommendation: not exceed 2.2 R/min per mA at 80 kVp.",difficulty:2},{domain:"radprotection",q:"What is the dose per pulse relationship when changing pulse rates?",a:"New dose per pulse = old dose  (old rate / new rate). E.g., 15 pps  7.5 pps: dose per pulse increases by factor of 2  1.4. Lower pulse rate = higher dose per pulse.",difficulty:3},{domain:"radprotection",q:"What triggers a Substantial Radiation Dose Level alert?",a:"5 Gray at the IRP.",difficulty:1},{domain:"radprotection",q:"What are the follow-up thresholds? (Kar, PKA, fluoro time)",a:"Reference air kerma (Kar): 5,000 mGy. Kerma area product (PKA): 500 Gycm. Fluoroscopy time: 60 minutes.",difficulty:3},{domain:"doselimits",q:"What are the four ALARA investigation levels?",a:"Level I: 1/20 annual limit  interview. Level II: 1/10  exposure investigation form. Level III: 1/4  detailed interview with RSO. Level IV: 1/1 (full limit)  regulatory agency report, possible reassignment.",difficulty:3},{domain:"doselimits",q:"What is the occupational whole-body dose limit?",a:"50 mSv per year (5 rem/year).",difficulty:1},{domain:"doselimits",q:"What is the lifetime dose limit formula?",a:"10 mSv  age in years.",difficulty:1},{domain:"doselimits",q:"What are the lens dose limit and the depth at which it's measured?",a:"150 mSv/year, measured at tissue depth of 0.3 cm.",difficulty:2},{domain:"doselimits",q:"What defines a 'radiation area' vs a 'high radiation area'?",a:"Radiation area: 0.05 mSv in 1 hour at 30 cm. High radiation area: 1 mSv in 1 hour at 30 cm.",difficulty:2},{domain:"doselimits",q:"When must you report to the state department? (immediate vs 24-hour)",a:"Immediate: 25 rem total effective, 75 rem eye, 250 rem skin. 24-hour (1/5 of immediate): 5 rem total, 15 rem eye, 50 rem skin.",difficulty:3},{domain:"doselimits",q:"What are the fetal dose limits during pregnancy?",a:"Total pregnancy: 5 mSv (0.5 rem). Monthly: 0.5 mSv (0.05 rem).",difficulty:2},{domain:"radbio",q:"What is the difference between direct and indirect DNA damage from radiation?",a:"Direct: radiation directly damages DNA. Indirect: radiation creates reactive species (free radicals) which then damage DNA. Note: secondary radiation (Compton/photoelectric) is indirect ionizing radiation but causes direct DNA damage.",difficulty:2},{domain:"radbio",q:"What is a 'complete carcinogen' vs an 'incomplete carcinogen'?",a:"Complete carcinogen (like ionizing radiation): acts as both initiator (causes DNA mutation) AND promoter (stimulates cell division). Incomplete carcinogen: only acts as an initiator.",difficulty:2},{domain:"radbio",q:"What is the latent period for radiation-induced cancers?",a:"Leukemia: 5 years. Solid tumors: 220 years.",difficulty:2},{domain:"radbio",q:"What is the only disease directly linked to long-term radiation exposure?",a:"Cataracts. Threshold ~750 mGy (several hundred rads acute). All other long-term effects manifest as statistical increases in disease incidence.",difficulty:2},{domain:"radbio",q:"What is the Genetically Significant Dose (GSD)?",a:"The gonad dose that would produce the same total genetic effect as all individual doses actually received. Function of: number of future children, x-ray exam rate, mean gonad dose per exam. Does NOT include background radiation.",difficulty:3},{domain:"skineffects",q:"What are the skin dose thresholds? (<2 Gy, >2 Gy, >5 Gy, >15 Gy)",a:"<2 Gy: no observable effects. >2 Gy: erythema within hours, fades 48 hrs. >5 Gy: second erythema ~10 days, epilation possible, follow up 48 weeks. >15 Gy: vascular damage, ulceration, necrosis  needs grafting. Moist desquamation confirms >10 Gy.",difficulty:3},{domain:"skineffects",q:"Why does fractionation reduce skin injury?",a:"Two mechanisms: 1) Permits DNA repair (~24 hours after irradiation). 2) Allows stem cell repopulation (occurs over weeks). Therefore deterministic injuries are NOT fully additive between procedures separated by days/weeks.",difficulty:2},{domain:"skineffects",q:"What are the timing rules for serial radiation at the same site?",a:"10 Gy: wait 46 weeks. >10 Gy: wait 812 weeks.",difficulty:2},{domain:"skineffects",q:"What are the fetal effects by gestational period?",a:"Pre-implantation (02 wks): all-or-none (abortion). Organogenesis (38 wks): birth defects, malformations. Fetal growth (9 wksbirth): microcephaly, mental retardation, growth retardation.",difficulty:3},{domain:"skineffects",q:"How do you calculate fetal dose from a fluoroscopic exam?",a:"Fetal dose  2% of skin dose. E.g., 5 R skin exposure  5,000 mrad  0.02 = 100 mrad to fetus.",difficulty:2},{domain:"qa",q:"What causes vignetting in an image intensifier?",a:"Fall-off in brightness at periphery due to unequal light collection. Center appears brighter than edges.",difficulty:1},{domain:"qa",q:"What is pincushion distortion?",a:"Geometric, nonlinear magnification across the image caused by projection of the x-ray beam onto the curved input surface of the II. Visualized with a rectangular grid.",difficulty:2},{domain:"qa",q:"What causes S distortion?",a:"Electrons deflected by external magnetic or electrical fields, causing image distortion along flux lines. Requires shielding to minimize.",difficulty:2},{domain:"qa",q:"What is the formula for relative sharpness?",a:"Relative sharpness = SOD / OID (Source-to-Object Distance / Object-to-Image Distance).",difficulty:1},{domain:"qa",q:"How often must tube potential and current be monitored in California?",a:"Weekly.",difficulty:1},{domain:"equipment",q:"What are the three methods of x-ray attenuation, and which dominates at fluoroscopic energies?",a:"Photoelectric effect, Compton scattering, and pair production. Photoelectric effect dominates at diagnostic/fluoroscopic energies (up to ~100 kVp). Pair production requires >1.02 MeV, so it does not occur in diagnostic imaging.",difficulty:2},{domain:"equipment",q:"What is the exponential attenuation formula?",a:"I = I  e^(x), where I = intensity after absorption, I = incident intensity,  = linear attenuation coefficient, x = thickness of absorber.",difficulty:2},{domain:"equipment",q:"What is the Half-Value Layer (HVL)?",a:"The thickness of material (expressed in mm of aluminum) that reduces x-ray beam intensity to one-half. Used both to characterize beam quality AND to calculate barrier thickness requirements.",difficulty:1},{domain:"equipment",q:"What is the diagnostic x-ray tube housing leakage radiation limit?",a:"Less than 100 millirads/hour (100 mR/hr) at 1 meter from the tube housing.",difficulty:1},{domain:"equipment",q:"What are the main components of the x-ray tube cathode?",a:"Filament (tungsten coil  source of electrons via thermionic emission) and focusing cup (directs the electron stream toward the anode target).",difficulty:1},{domain:"equipment",q:"What is the difference between characteristic radiation and bremsstrahlung radiation?",a:"Characteristic: produced when an incoming electron ejects an inner-shell electron and an outer-shell electron fills the vacancy, emitting a photon of specific energy. Bremsstrahlung: produced when electrons are decelerated/deflected by the nucleus, emitting a continuous spectrum of energies. Bremsstrahlung comprises the majority of the diagnostic x-ray spectrum.",difficulty:2},{domain:"equipment",q:"What factors affect the x-ray beam spectrum?",a:"kVp (shifts peak energy and maximum energy), mA (changes number of photons but not spectrum shape), filtration (removes low-energy photons, hardens beam), and target material (affects characteristic radiation energies).",difficulty:2},{domain:"equipment",q:"What is the line focus principle?",a:"By angling the anode target face, the effective focal spot (projected onto the patient) is smaller than the actual focal spot (area bombarded by electrons). Smaller anode angles produce smaller effective focal spots but limit field coverage.",difficulty:2},{domain:"equipment",q:"What are the four types of focal spot size definitions?",a:"Nominal: manufacturer's labeled size. Measured: size determined by standard test (pinhole or star pattern). Effective: geometric projection of the actual focal spot onto the image plane. Actual: true area bombarded by electrons on the anode.",difficulty:3},{domain:"equipment",q:"What are the isoexposure curve values for scatter radiation during fluoroscopy?",a:"Contour values of approximately 20, 100, and 300 mrad/hr at various distances from the patient. Maximum scatter occurs at 120135 below the table and ~30 above. Minimum scatter at 90  which is where the operator should stand.",difficulty:3},{domain:"equipment",q:"What is the minimum source-to-skin distance for fluoroscopy?",a:"Stationary equipment: not less than 12 inches (38 cm), should be 18 inches (45 cm). Mobile C-arm: not less than 12 inches (30 cm). Some references cite 15 inches for mobile.",difficulty:2},{domain:"equipment",q:"What must the collimator/shutter provide in terms of protection?",a:"The same degree of radiation protection as the x-ray tube housing. Collimators must attenuate the beam to at or below the tube housing leakage limit.",difficulty:2},{domain:"equipment",q:"What happens when the image receptor (barrier) is removed during fluoroscopy?",a:"X-ray exposure must automatically terminate. This is required by regulation (Section 30307(a)(4)(C))  an interlock system must prevent exposure when the barrier is not in position.",difficulty:2},{domain:"equipment",q:"What is the cumulative timer requirement for fluoroscopy?",a:"A cumulative timer must sound an audible signal after 5 minutes of fluoroscopy time. The timer does not shut off the beam  it is a reminder to the operator. The operator must manually reset it.",difficulty:1},{domain:"equipment",q:"What is the dead-man switch requirement?",a:"Fluoroscopy must require continuous manual activation  the beam stops immediately when the operator releases the switch. Prevents unintended prolonged exposure.",difficulty:1},{domain:"equipment",q:"What are the differences between single-phase, three-phase, and high-frequency x-ray generators?",a:"Single-phase: 100% voltage ripple, lowest average photon energy. Three-phase (6-pulse): ~13% ripple; (12-pulse): ~4% ripple  higher average energy, more efficient. High-frequency: <1% ripple, nearly constant potential, most efficient output.",difficulty:3},{domain:"digital",q:"What is the difference between direct and indirect conversion flat panel detectors?",a:"Direct conversion: amorphous selenium converts x-rays directly to electronic signal (no light intermediary). Indirect conversion: CsI scintillator converts x-rays to light, then amorphous silicon photodiode array converts light to electronic signal. Indirect is more common in fluoroscopy.",difficulty:2},{domain:"digital",q:"What is Detective Quantum Efficiency (DQE)?",a:"A measure of how efficiently a detector converts x-ray input to a useful image signal. DQE = (SNR_out / SNR_in). Flat panel detectors have higher DQE than image intensifiers, meaning better image quality per unit dose.",difficulty:2},{domain:"digital",q:"What is the difference between Automatic Brightness Control (ABC) and Automatic Gain Control (AGC)?",a:"ABC adjusts x-ray tube output (kVp and/or mA) to maintain consistent exposure at the detector. AGC rapidly varies the gain of the video/electronic system to maintain a bright image on the monitor. ABC controls radiation; AGC controls the displayed image brightness.",difficulty:2},{domain:"digital",q:"What is image lag in a video camera system?",a:"The percent of video signal remaining after the light source is removed from the photocathode. Causes ghosting/smearing of moving structures. Vidicon cameras exhibit more lag than plumbicon cameras.",difficulty:2},{domain:"digital",q:"What is flare (veiling glare) in an image intensifier?",a:"Additional scattered and reflected light within the II tube that reduces image contrast. Measured by placing a lead disc equal to 10% of the II input surface diameter in the beam and comparing brightness behind the disc to surrounding brightness.",difficulty:2},{domain:"digital",q:"What is the conversion factor of an image intensifier, and what happens to it over time?",a:"Conversion factor = output luminance / input exposure rate (cd/m per mR/s). Typical range: 100300. It degrades over time as the phosphors and photocathode deteriorate. Declining conversion factor is an indicator the II needs replacement.",difficulty:2},{domain:"digital",q:"What is the RS-170 video signal standard?",a:"The broadcast standard for composite video signals: 1.0 volt peak-to-peak including synchronization pulses. Used in fluoroscopic TV systems to ensure compatibility between components.",difficulty:3},{domain:"digital",q:"What are typical exposure values for cine fluorography?",a:"~4 R/frame for 9-inch mode, ~7 R/frame for 6-inch mode, ~15 R/frame for 23-cm mode. Patient entrance exposure for cine can range from 50150 rads or more  significantly higher than routine fluoroscopy.",difficulty:3},{domain:"digital",q:"What types of distortion are unique to image intensifiers that FPDs do not have?",a:"Pincushion distortion (geometric magnification from curved input surface), S distortion (from external magnetic/electrical fields deflecting electrons), and vignetting (peripheral brightness fall-off from unequal light collection). FPDs have none of these.",difficulty:2},{domain:"radprotection",q:"How does lead apron attenuation change with kVp?",a:"At 75 kVp: 0.25 mm Pb eliminates 96%, 0.5 mm Pb eliminates 99%. At 100 kVp: 0.25 mm Pb eliminates only 91%, 0.5 mm Pb eliminates 95.3%. Higher kVp = more penetrating photons = reduced apron effectiveness.",difficulty:2},{domain:"radprotection",q:"What percentage of active bone marrow does a lead apron cover?",a:"Approximately 80%. The remaining ~20% is in the skull, arms, and clavicles (not covered by the apron).",difficulty:1},{domain:"radprotection",q:"When are protective lead gloves required?",a:"When any part of the hand must be placed within the primary x-ray beam during fluoroscopy. Gloves must be 0.25 mm or 0.5 mm lead equivalent.",difficulty:1},{domain:"radprotection",q:"How much do 0.25 mm lead-equivalent eye lenses reduce exposure?",a:"8590% reduction in eye radiation exposure. Required during catheterization, angiographic, and pacemaker insertion procedures where the operator is in close proximity.",difficulty:2},{domain:"radprotection",q:"What are the three types of radiation the fluoroscopy operator is exposed to?",a:"1) Useful beam (primary  should never strike operator directly). 2) Leakage radiation (from the tube housing). 3) Scatter radiation (from the patient  the dominant source of operator exposure).",difficulty:1},{domain:"radprotection",q:"Do fluoroscopy rooms require primary barriers?",a:"No  fluoroscopy rooms require only secondary barriers because the useful beam is intercepted by the image receptor. EXCEPTION: combined fluoro-radiographic units require primary barriers for the radiographic mode.",difficulty:2},{domain:"radprotection",q:"Can scatter radiation travel around corners?",a:"Yes. Radiation can be scattered around corners  a wall is not necessarily a safe shield if there is an open doorway or gap. Room design must account for scatter paths.",difficulty:1},{domain:"radprotection",q:"Should mechanical holding devices or human hands be used to hold patients during fluoroscopy?",a:"Mechanical holding devices, positioning aids, and similar accessories should always be used whenever possible. Human hand-holding should be a last resort, and the holder must wear protective gloves and apron.",difficulty:1},{domain:"radprotection",q:"How should protective lead aprons be stored?",a:"Always on proper hangers  never folded or draped over surfaces. Folding causes cracks in the lead material which compromise shielding effectiveness. Proper storage also makes aprons easier to put on.",difficulty:1},{domain:"radprotection",q:"What is the thyroid shield requirement during fluoroscopy?",a:"Thyroid shields (0.25 mm or 0.5 mm Pb) should be worn when the operator is in close proximity to the patient during fluoroscopy. The thyroid is one of the most radiosensitive organs.",difficulty:1},{domain:"doselimits",q:"What is the occupational dose limit for the skin and extremities?",a:"500 mSv/year (50 rem/year).",difficulty:1},{domain:"doselimits",q:"What is the occupational dose limit for the lens of the eye?",a:"150 mSv/year (15 rem/year), measured at tissue depth of 0.3 cm (300 mg/cm).",difficulty:1},{domain:"doselimits",q:"What is the public dose limit per hour?",a:"0.02 mSv (2 mrem) in any one hour. Annual public limit is 1 mSv (100 mrem).",difficulty:2},{domain:"doselimits",q:"What defines a 'declared pregnant woman' under radiation regulations?",a:"A woman who has voluntarily informed her employer IN WRITING of her pregnancy AND provided the estimated date of conception. The declaration must be voluntary  no employer can require it.",difficulty:2},{domain:"doselimits",q:"If the fetal dose is already at 0.5 rem when pregnancy is declared, what is the additional limit?",a:"0.05 rem (0.5 mSv) for the remainder of the pregnancy. This ensures the dose does not increase substantially once the pregnancy is known.",difficulty:3},{domain:"doselimits",q:"What does 'uniform monthly exposure rate' mean for pregnant workers?",a:"The regulation requires that the dose to the embryo/fetus be delivered at a roughly uniform rate  avoid substantial variations above ~0.05 rem/month. No large single exposures even if the total would be under 0.5 rem.",difficulty:3},{domain:"doselimits",q:"At what tissue depth is the deep-dose equivalent measured?",a:"1 cm (1,000 mg/cm). This represents whole-body dose for occupational monitoring.",difficulty:2},{domain:"doselimits",q:"What are the California x-ray machine registration requirements?",a:"Must register within 30 days of acquisition. Registration renewed during July of every even-numbered year. Changes must be reported within 30 days. The vendor must inform the receiver of the registration requirement.",difficulty:2},{domain:"doselimits",q:"What is the penalty for violating California radiation regulations?",a:"A misdemeanor under Section 115215(a) of the Health and Safety Code.",difficulty:1},{domain:"doselimits",q:"What must be posted in an x-ray facility in California?",a:"'CAUTION  X-RAY' signs at each entrance. Current radiation control regulations posted conspicuously. Form RH-2364 (Notice to Employees) posted where it can be read by employees.",difficulty:2},{domain:"doselimits",q:"Is deliberate x-ray exposure of humans for training or demonstration purposes permitted?",a:"No. Section 30305(b)(4) prohibits deliberate exposure of any individual for training or demonstration purposes without a physician's prescription for a medically indicated exam.",difficulty:1},{domain:"doselimits",q:"Does occupational dose include the worker's own medical/dental x-ray exposure?",a:"No. Radiation received for the operator's own medical or dental diagnosis/therapy is NOT counted as occupational exposure. The operator must remove their monitoring badge before personal medical procedures.",difficulty:2},{domain:"doselimits",q:"What are the requirements for high-level (boost) fluoroscopy control?",a:"May produce up to 20 R/min (or 10 R/min with AEC). Requires: (1) continuous manual activation by the fluoroscopist, AND (2) a continuous audible signal during high-level operation. Must be a separate, distinct activation from routine mode.",difficulty:2},{domain:"doselimits",q:"What overexposure must be reported to California's Radiologic Health Branch (RHB)?",a:"Any dosimeter reading indicating exposure in excess of the applicable regulatory limits. Most overexposures result from poor working practices, not equipment failure.",difficulty:2},{domain:"doselimits",q:"What are the two broad responsibilities of the x-ray supervisor regarding radiation protection?",a:"(1) Take all precautions necessary for adequate protection of patients, operators, and others. (2) Responsible for maintaining properly functioning equipment, operator performance, and use of only State-authorized operators.",difficulty:2},{domain:"doselimits",q:"Which persons must be monitored regardless of expected exposure level?",a:"(1) Any person entering a high radiation area. (2) Any person operating mobile x-ray equipment (Section 30309(b)(3)). These categories require monitoring even if expected dose is low.",difficulty:2},{domain:"doselimits",q:"What must the radiation protection program include under Section 20.1101?",a:"Each supervisor shall develop, document, and implement a radiation protection program commensurate with the scope of activities. The program must be reviewed at least annually to ensure compliance and ALARA goals are met.",difficulty:2},{domain:"doselimits",q:"What is California's gonad shielding lead equivalence requirement?",a:"0.5 mm lead equivalent  stricter than the federal recommendation of 0.25 mm. Must be used when the gonads are within or near the primary beam and shielding will not interfere with the exam.",difficulty:2},{domain:"radbio",q:"What is 'cellular amplification' of radiation damage?",a:"Initial radiation damage involves only a very small percentage of molecules. Normal cellular metabolic processes amplify this damage from molecular level  microscopic level  gross cellular malfunction. The cell's own machinery magnifies the initial insult.",difficulty:2},{domain:"radbio",q:"How does dose rate affect genetic damage from radiation?",a:"A given dose is LESS effective in producing genetic damage if it is protracted or fractionated over a long period. Cells have time for DNA repair between exposures. This is why chronic low-dose exposure is less harmful than the same total dose delivered acutely.",difficulty:2},{domain:"radbio",q:"What are the gross cellular effects of radiation? (list at least 5)",a:"Chromosome breaks, clumping of chromatin, formation of giant cells/abnormal mitoses, increased granularity of cytoplasm, nuclear disintegration, changes in motility/cytoplasmic activity, vacuolization, altered protoplasmic viscosity, changes in membrane permeability.",difficulty:3},{domain:"radbio",q:"What is the latent period in radiation biology, and what are the two categories?",a:"Time between radiation exposure and first detectable effects. Short-term effects: appear in minutes to weeks (erythema, nausea, hematologic changes). Long-term effects: appear in years to decades to generations (cancer, genetic effects, cataracts).",difficulty:2},{domain:"radbio",q:"Name four historical groups that provided evidence for radiation carcinogenesis.",a:"(1) Early radiologists/dentists  skin malignancies, leukemia. (2) Radium dial painters  bone malignancies. (3) Uranium miners  lung cancer. (4) Hiroshima/Nagasaki survivors  leukemia and other neoplasms.",difficulty:2},{domain:"radbio",q:"What are the most frequently occurring radiation-induced cancers, in rank order?",a:"Female breast, thyroid (especially women/children), hemopoietic tissue (leukemia), lungs, GI tract, bones.",difficulty:2},{domain:"radbio",q:"What is radiation-induced life-span shortening?",a:"Observed in animal experiments: irradiated animals die from the same diseases as non-irradiated controls but at an earlier age. The effect appears as premature aging. Demonstrated in animals; data for humans comes from A-bomb survivors.",difficulty:2},{domain:"radbio",q:"Is radiation-induced mitotic delay reversible?",a:"Usually yes. Mitotic delay (temporary halt in cell division after irradiation) is generally reversible  cells resume division after a delay proportional to dose. This is distinct from permanent mitotic inhibition at very high doses.",difficulty:2},{domain:"radbio",q:"What three factors influence biological effects from radiation following the LNT model?",a:"(1) Dose rate  lower rates allow more repair. (2) Total dose  higher total dose = greater effect. (3) Type of cell irradiated  radiosensitivity varies enormously (lymphocytes vs. neurons).",difficulty:2},{domain:"radbio",q:"Why is DNA the critical target of radiation damage in cells?",a:"DNA constitutes the cell's operational program: it controls all enzyme synthesis, is replicated during mitosis, and mutations can alter or eliminate essential protein production. Damage to other molecules is usually repairable; DNA damage can be permanent and heritable.",difficulty:2},{domain:"skineffects",q:"What are the detailed skin dose thresholds including 6 Gy, 7 Gy, and 10 Gy?",a:"2 Gy: early transient erythema. 6 Gy: temporary epilation (hair loss). 7 Gy: permanent erythema. 10 Gy: moist desquamation, dermal necrosis possible. >15 Gy: deep ulceration, vascular damage, may require surgical grafting.",difficulty:3},{domain:"skineffects",q:"What dose to the fetus could result in spontaneous abortion?",a:"Approximately 50 rads (0.5 Gy) during early pregnancy. During the pre-implantation period (02 weeks), this follows the 'all-or-none' rule  the embryo either survives normally or is aborted.",difficulty:2},{domain:"skineffects",q:"At what dose have deleterious effects been demonstrated in animal embryo experiments?",a:"As little as 10 rads (0.1 Gy). Effects increase significantly at 15+ rads. This is well below the human fetal dose limit of 0.5 rem (5 mSv) total pregnancy.",difficulty:2},{domain:"skineffects",q:"What are the 10-day rule and 14-day rule for scheduling x-ray exams on women of childbearing age?",a:"10-day rule (ICRP): schedule abdominal x-rays within 10 days after onset of menses (when pregnancy is unlikely). 14-day rule (NCRP): similar but allows 14 days. Current recommendation: properly indicated exams need not be postponed regardless of menstrual timing, but ask about pregnancy status.",difficulty:2},{domain:"skineffects",q:"Is interruption of pregnancy ever justified due to diagnostic x-ray exposure?",a:"No. The exposure levels from diagnostic radiology are far below the threshold for deterministic fetal effects. Termination of pregnancy is never justified on the basis of diagnostic x-ray exposure alone.",difficulty:1},{domain:"skineffects",q:"What are the specific radiation effects on the gonads?",a:"Male: spermatogonia drastically depleted by ~50 rads; temporary sterility at ~30 rads (spermatogonia can regenerate so sterility is temporary). Female: oocytes cannot be replaced  ovarian damage from radiation is permanent and irreversible.",difficulty:2},{domain:"skineffects",q:"What dose threshold causes radiation-induced cataracts?",a:"Approximately several hundred rads (750 mGy or more) of acute dose for x-rays in the diagnostic range. Cataracts are the ONLY disease directly linked to long-term low-level radiation exposure as a deterministic effect.",difficulty:2},{domain:"skineffects",q:"What are the specific fetal effects during organogenesis (weeks 38)?",a:"Morphological defects and congenital malformations  birth defects of organ systems forming at the time of exposure. This is the period of maximum sensitivity to teratogenic effects (structural abnormalities).",difficulty:2},{domain:"skineffects",q:"What are the specific fetal effects during the fetal growth period (9 weeks to birth)?",a:"CNS effects: microcephaly (small head), intellectual disability/mental retardation, impaired learning patterns. Also: growth retardation, reduced birth weight. The brain is the most sensitive organ during this period.",difficulty:2},{domain:"qa",q:"What are the four major steps of a QA program?",a:"(1) Acceptance testing of new/modified equipment. (2) Establishment of baseline performance levels. (3) Diagnosis of changes before they become fluoroscopically apparent. (4) Verification that deterioration has been corrected.",difficulty:2},{domain:"qa",q:"What QC tests are performed DAILY on fluoroscopy equipment?",a:"Brightness/contrast optimization, verification of protective devices (lead curtains, panel, Bucky slot cover), fluoroscopic tower locks and barrier interlocks, compression device inspection, and automatic collimation check.",difficulty:2},{domain:"qa",q:"What QC tests are performed SEMI-ANNUALLY on fluoroscopy equipment?",a:"Shutters, ABC tracking, AGC, high contrast resolution, low contrast resolution, 5-minute cumulative timer, fluoroscopic beam size, filtration/HVL, minimum source-to-tabletop distance, kVp accuracy, patient exposure rate, maximum exposure rate, lead apron/glove integrity, and distortion.",difficulty:3},{domain:"qa",q:"How often must a qualified physicist review fluoroscopy equipment in California?",a:"Annually for equipment with automatic exposure control. Every 3 years (triennially) for equipment without automatic exposure control.",difficulty:2},{domain:"qa",q:"What output rate increase triggers an investigation?",a:"A 25% increase over the calibrated output rate requires investigation and correction. If the calibrated output exceeds 4.0 R/min, testing must confirm the 5 R/min regulatory ceiling is not exceeded.",difficulty:2},{domain:"qa",q:"What is the difference between high contrast resolution and low contrast resolution testing?",a:"High contrast resolution: tests ability to reproduce thin lines/spaces using copper mesh or resolution patterns (at 5060 kVp). Measures spatial detail. Low contrast resolution: tests ability to resolve large objects that differ slightly in radiopacity using aluminum plates with drilled holes. Measures tissue differentiation ability.",difficulty:2},{domain:"qa",q:"What factors affect spatial resolution in fluoroscopy? (list at least 4)",a:"Focal spot size, imaging geometry (magnification, source-to-image distance), optical coupling system, image intensifier characteristics, video camera properties, TV monitor resolution, and patient motion.",difficulty:2},{domain:"qa",q:"What QC tests must be performed after repair or replacement of a major component?",a:"Collimation, ABC, AGC, resolution, phototimer, timer, mAs, kVp, dose rates, focal spot, and HVL must ALL be tested before the equipment is used on human patients.",difficulty:2},{domain:"qa",q:"What is the kVp accuracy tolerance?",a:"+/- 5% of the set value (or +/- 2 kVp in the 60100 kVp range, whichever is greater).",difficulty:2},{domain:"qa",q:"What is the acceptance criterion for mAs linearity?",a:"Ratios of exposure to mAs at any two consecutive tube current settings shall not differ by more than 0.10 times their sum. Ensures consistent output across mA stations.",difficulty:3},{domain:"qa",q:"What is the exposure reproducibility tolerance?",a:"+/- 5% coefficient of variation. The phototimer consistency must also be within +/- 5%.",difficulty:2},{domain:"qa",q:"What are typical fluoroscopic exposure rates by II mode?",a:"6-inch mode with grid: 23 R/min. 9-inch mode without grid: 1.52.5 R/min. ABC typically set at 8090 kVp. Systems with a grid produce 1.52 higher rates. Room-to-room differences >25% should be investigated.",difficulty:3},{domain:"qa",q:"List the minimum QC test equipment that should be in a QA program.",a:"Penetrometer (aluminum step wedge), homogeneous phantom, stopwatch, densitometer, sensitometer, wire mesh contact test tool, thermometer (no mercury or alcohol allowed), calibrated dosimeter, and aluminum filters for HVL testing.",difficulty:3},{domain:"qa",q:"What are the dose reduction methods and their approximate reduction factors?",a:"QA program: 2.0. Proper processing: 1.11.3. Acoustic signal (5-min timer): 1.3. Variable aperture iris/collimation: 3.0. High/low dose switches: 1.5. Beam collimation: 1.53.0. Rare earth screens: 2.04.0. Gonad shielding: up to 100.",difficulty:3},{domain:"qa",q:"How long must QA records be retained? What about film processor records?",a:"QA records: minimum 3 years. Film processor control charts and maintenance logs: minimum 1 year.",difficulty:1},{domain:"equipment",q:"What is the difference between rods and cones in visual physiology, and why does it matter for fluoroscopy?",a:"Rods: scotopic (dim light) vision, peripheral, detect gray tones only. Cones: photopic (bright light) vision, central/fovea, detect color and fine detail. Photopic acuity is 10 greater than scotopic. Modern image-intensified fluoroscopy uses photopic (cone) vision because the monitor is bright. Room lighting should be dim but not dark.",difficulty:2},{domain:"equipment",q:"What is the image integration time of the human eye?",a:"0.2 seconds. Prolonged observation of a dim fluoroscopic image will NOT improve perceived brightness or detail. If the image is too dim, the only solution is to increase exposure or use image intensification.",difficulty:2},{domain:"equipment",q:"What is the optimal viewing distance for a fluoroscopic monitor?",a:"1215 inches (3038 cm) for conventional monitors. This distance optimizes the eye's ability to resolve image detail.",difficulty:1},{domain:"radprotection",q:"What are the three types of personnel monitoring devices and how do their accuracies compare?",a:"Film badge: sensitive 10 mrad  700 rads, accuracy +/- 25%, provides permanent record on developed film. TLD (thermoluminescent dosimeter): accuracy +/- 9%, reusable, better low-dose sensitivity. Pocket ionization chamber (dosimeter): immediate readout, limited range, no permanent record. TLD is the most accurate.",difficulty:2},{domain:"radprotection",q:"What is the quality factor (Q) for diagnostic x-rays, and what does it mean?",a:"Q = 1 for x-rays, gamma rays, and beta radiation. This means 1 rad = 1 rem for diagnostic x-rays (rem = rad  Q). Quality factor accounts for the relative biological effectiveness of different radiation types. Neutrons and alpha particles have higher Q values.",difficulty:2},{domain:"radprotection",q:"What are the three types of gonad shields?",a:"Flat contact shield: placed directly on patient, simple but may not conform well. Shaped contact shield: molded to anatomy, acceptable for some fluoroscopic procedures. Shadow shield: suspended from the tube housing, casts a 'shadow' over gonads. For fluoroscopy, only shaped contact shields are practical; flat and shadow types are generally not suitable.",difficulty:2},{domain:"radprotection",q:"Which diagnostic x-ray examinations produce the highest bone marrow doses?",a:"Barium enema, upper GI series, and abdominal angiography produce the highest bone marrow doses. Bone marrow dose is the most reasonable somatic dose indicator because marrow is widely distributed and highly radiosensitive.",difficulty:2},{domain:"radprotection",q:"Calculate: A fluoroscopist stands at 100 mrad/hr for 42 minutes. What is the total exposure?",a:"100 mrad/hr  (42/60 hr) = 100  0.7 = 70 mrad. Always convert minutes to hours when the rate is given in per-hour units. (Note: some references may round differently.)",difficulty:2},{domain:"doselimits",q:"What certification should a personnel monitoring service have?",a:"NVLAP (National Voluntary Laboratory Accreditation Program, run by NIST) and/or NSF Standard No. 16 certification. These ensure the monitoring service meets accuracy and quality standards.",difficulty:2}],Hm=[{name:"Foundation",days:"17",dayRange:[1,7],color:"#3B82F6",goal:"Build mental scaffolding for all 7 domains",protocol:["20 min moderate exercise  start studying within 30 min (primes BDNF for memory)","Tap  Read above to go through today's domain material section by section","After each section: lock your phone, write down everything you remember on paper (brain dump)","Pick 23 'anchor concepts' from today's reading  the key ideas everything else connects to","Tap  Quiz above to test yourself on today's domain (142 questions across all domains)  just get familiar, don't stress","Before bed: open  Read, skim just the section titles for today's domain  mentally recall what each one covered without expanding them"],dailySchedule:[{day:1,focus:"Equipment & Physics  Image Intensifiers",domains:["equipment"]},{day:2,focus:"Equipment & Physics  Flat Panel Detectors",domains:["equipment"]},{day:3,focus:"Digital Fluoroscopy  All topics",domains:["digital"]},{day:4,focus:"Radiation Protection  ALARA, shielding, PKA",domains:["radprotection"]},{day:5,focus:"Dose Limits & Regulations",domains:["doselimits"]},{day:6,focus:"Radiation Biology  All topics",domains:["radbio","skineffects"]},{day:7,focus:"QA + Image Quality + FULL domain review",domains:["qa"]}]},{name:"Interleave & Retrieve",days:"816",dayRange:[8,16],color:"#8B5CF6",goal:"Force discrimination between related concepts via interleaved retrieval",protocol:["20 min moderate exercise  start studying within 30 min (primes BDNF for memory)","Tap  Read for each of today's domains  cycle through 3 domains in 25-min blocks","After reading each domain: lock your phone, brain dump what you remember on paper, then tap  Quiz to test yourself","Tap  Confusable Pairs  this phase is where discrimination between similar concepts matters most","For every quiz answer, ask yourself 'WHY does this make sense?' before moving on","End each session with  Number Drill  rapid-fire recall of dose limits and thresholds","Sleep TMR (optional): play the same background sound each time you study a domain, then replay it while you sleep  try mynoise.net/NoiseMachines/whiteNoiseGenerator.php for free ambient sounds"],dailySchedule:[{day:8,focus:"Equipment + Dose Limits + Skin Effects",domains:["equipment","doselimits","skineffects"]},{day:9,focus:"Digital + Rad Protection + QA",domains:["digital","radprotection","qa"]},{day:10,focus:"Rad Biology + Equipment + Dose Limits",domains:["radbio","equipment","doselimits"]},{day:11,focus:"Rad Protection + Skin Effects + Digital",domains:["radprotection","skineffects","digital"]},{day:12,focus:"QA + Rad Biology + Equipment",domains:["qa","radbio","equipment"]},{day:13,focus:"Dose Limits + Digital + Rad Protection",domains:["doselimits","digital","radprotection"]},{day:14,focus:"TEST REVIEW #1A  First 500 questions (timed)",domains:["equipment","radprotection","doselimits"]},{day:15,focus:"Skin Effects + Equipment + QA",domains:["skineffects","equipment","qa"]},{day:16,focus:"TEST REVIEW #1A  Questions 5001000 (timed)",domains:["radbio","digital","skineffects"]}]},{name:"Deep Encode",days:"1724",dayRange:[17,24],color:"#EF4444",goal:"Attack weak spots, encode critical numbers, practice under test conditions",protocol:["20 min moderate exercise  start studying within 30 min","Start each session with  Number Drill  run through all critical values before anything else","Tap  Quiz for today's domains  answer in random order, focus on weak spots","For every wrong answer: ask 'WHY?' + sketch a quick visual mnemonic on paper","Teach-back: pick 3 concepts and explain them aloud as if teaching a colleague","Dual coding: on paper, draw diagrams from memory (II cross-section, FPD schematic, dose thresholds) then check against  Read","Sleep TMR continues (optional): replay the same ambient sound from your study sessions while sleeping"],dailySchedule:[{day:17,focus:"TEST REVIEW  Questions 10001500 + weak domain drill",domains:["equipment","radprotection"]},{day:18,focus:"Critical numbers deep drill + teach-back",domains:["doselimits","skineffects","radprotection"]},{day:19,focus:"TEST REVIEW  Questions 15002000 + diagram practice",domains:["digital","equipment","qa"]},{day:20,focus:"Full interleaved retrieval  all 7 domains",domains:["equipment","digital","radprotection","doselimits","radbio","skineffects","qa"]},{day:21,focus:"Mock exam simulation (timed, full-length)",domains:["equipment","digital","radprotection","doselimits","radbio","skineffects","qa"]},{day:22,focus:"Post-mock analysis: weak spots identified  targeted drill",domains:["radprotection","doselimits"]},{day:23,focus:"Calculation practice: PKA, dose per pulse, fetal dose, brightness gain",domains:["radprotection","equipment","skineffects"]},{day:24,focus:"Mock exam #2 + error analysis",domains:["equipment","digital","radprotection","doselimits","radbio","skineffects","qa"]}]},{name:"Consolidate & Peak",days:"2530",dayRange:[25,30],color:"#10B981",goal:"Consolidate, reduce anxiety, peak on exam day",protocol:["Exercise continues but REDUCE study volume  you're tapering now","Day 2528: 2 focused sessions per day, tap  Quiz on weak domains only","Quick  Number Drill each day  keep the critical values sharp","Day 29: Light review only  skim  Read for anchor concepts, quick Number Drill, then STOP","Day 30: Exam day  morning exercise, 30-min anchor concept review, then go crush it","NO new material after Day 27","Sleep 8+ hours  confidence comes from what you KNOW, not last-minute cramming"],dailySchedule:[{day:25,focus:"Weak spots only  targeted retrieval practice",domains:["radprotection","doselimits"]},{day:26,focus:"Critical numbers final drill + teach-back",domains:["doselimits","skineffects","radprotection"]},{day:27,focus:"Final mock exam (short) + last new-info cutoff",domains:["equipment","digital","radprotection","doselimits","radbio","skineffects","qa"]},{day:28,focus:"Light review  anchor concepts + diagrams only",domains:["equipment","radprotection"]},{day:29,focus:"REST DAY  Light anchor review only, then stop studying",domains:[]},{day:30,focus:"EXAM DAY  Morning exercise, 30-min anchor review, go crush it",domains:[]}]}],pn={equipment:[{title:"The Big Picture: What Fluoroscopy Actually Is",content:`Before any detail matters, understand what you are looking at.

Fluoroscopy is a **real-time x-ray movie**. A surgeon needs to see inside a living patient while they work  guide a catheter, place a stent, reduce a fracture. A single x-ray image (radiography) is a snapshot. Fluoroscopy is the video feed.

**The entire system exists to answer one question:** "What is happening inside this patient right now?"

Everything in this domain  every tube, detector, circuit, and display  is just a link in a chain that converts invisible x-rays into a moving picture on a screen. Here is that chain:

**X-ray tube**  produces x-rays
**Filters & collimators**  clean and aim the beam
**Patient**  absorbs some x-rays, passes others (this creates the image)
**Image receptor**  catches what comes through (II or flat panel)
**Processing**  turns the signal into a viewable image
**Display**  monitor you actually look at
**Your eyes**  the final link

Every single topic in this domain is one of those links. When you learn about an image intensifier, you are learning about one link. When you learn about ABC, you are learning about the feedback loop that keeps the chain balanced. Nothing exists in isolation.

 **Analogy:** Think of the whole system like a **relay race**. The x-ray tube is the first runner, the patient is the handoff zone, the detector is the second runner, and the display is the finish line. If any single runner drops the baton, the whole race fails. Every chapter in this domain is about one runner in the relay.

**The central tradeoff of fluoroscopy:** image quality vs. radiation dose. More x-rays = better picture = more radiation to the patient. Every design decision, every operator choice, every regulation exists because of this tension. Hold onto this  it explains almost every "why" you will encounter.

 **Analogy:** It's like turning up the volume on a radio  louder is clearer, but too loud damages your ears. Every fluoro decision is balancing the "volume knob" between seeing well and keeping dose low.`},{title:"Link 1  The X-Ray Tube: Where It All Starts",content:`The x-ray tube is where radiation is born. Everything downstream depends on what this tube produces.

**What it is:** A sealed glass tube with two electrodes in a vacuum. One side (cathode) shoots electrons. The other side (anode) stops them. When fast-moving electrons slam into metal, x-rays come out. That is it.

**The cathode (negative side):**
A tungsten wire filament, heated by electric current. When hot enough, it boils off electrons  this is called **thermionic emission**. A focusing cup aims the electrons at the target. Most tubes have two filaments: a small one for fluoroscopy (fine detail, low power) and a large one for spot films (high power, short burst).

**The anode (positive side):**
A spinning tungsten disc. Tungsten because it has an extremely high melting point (3,422C) and high atomic number (Z=74, which means more x-ray production). The disc rotates so the electron beam does not melt one spot.

**The critical fact about x-ray production:**
~99% of the electron energy converts to **heat**. Only ~1% becomes x-rays. This is why heat management dominates tube design  it is not an x-ray machine that produces some heat, it is a heat machine that produces a few x-rays.

 **Analogy:** The x-ray tube is like a **car engine**  most of the fuel becomes heat, and only a small fraction becomes useful motion. Just like an engine needs a radiator, the x-ray tube needs oil cooling and a spinning anode to dump all that waste heat.

**Target angle** (1217) determines the effective focal spot size. Steeper angle = smaller effective focal spot = sharper image, but less heat tolerance.

**Tube housing** keeps leakage radiation below 100 mR/hr at 1 meter. Contains oil for cooling and insulation.

**Why this matters for the exam:** The tube is where you control x-ray quantity (mA) and quality (kVp). Understanding the tube means understanding what knobs the operator and the ABC system are turning.`},{title:"Link 1B  How X-Rays Are Actually Produced",content:`Two things happen when electrons hit the tungsten target. Both produce x-rays, but differently.

**Bremsstrahlung ("braking radiation")  the main source (~80%):**
An incoming electron passes near a tungsten nucleus and gets deflected by its positive charge. The electron slows down (loses energy), and that lost energy leaves as an x-ray photon. The closer the electron passes to the nucleus, the more it slows, the higher the x-ray energy.

This produces a **continuous spectrum**  x-rays of every energy from zero up to the maximum (set by kVp). Average photon energy is about 1/3 of the peak kVp. This is the workhorse of diagnostic x-ray production.

**Characteristic radiation  the secondary source (~20%):**
An incoming electron knocks out an inner-shell electron from a tungsten atom. An outer-shell electron drops in to fill the hole, releasing an x-ray of a **specific, fixed energy**. For tungsten, the K-shell binding energy is 69.5 keV, so characteristic x-rays only appear when kVp exceeds ~70 kV.

**What controls the beam:**
- **mA (tube current):** More electrons = more x-ray photons. Doubles the mA, doubles the output. This is a quantity control. Fluoroscopy typically uses 13 mA; spot films use 100+ mA.
- **kVp (voltage):** Higher voltage = faster electrons = more penetrating x-rays. This is a quality control. Higher kVp also means lower skin dose (more photons get through the patient), but reduced contrast.
- **Filtration:** A sheet of aluminum in the beam absorbs the low-energy ("soft") x-rays that would only burn skin without making it to the detector. Minimum total filtration: **2.5 mm aluminum equivalent** (3 mm above 125 kVp).

**The key insight:** mA controls how many. kVp controls how penetrating. Filtration removes the useless ones. These three together determine what reaches the patient.

 **Analogy:** Think of a **garden hose**. **mA** is how far you open the faucet (more water = more photons). **kVp** is the water pressure (higher pressure = more penetrating spray). **Filtration** is a nozzle screen that blocks the weak dribbles (low-energy photons) while letting the strong stream through. Together, you control how much, how hard, and how clean the spray is.`},{title:"Link 2  The Beam Meets the Patient",content:`The x-ray beam enters the patient. This is where the image is actually created  not at the detector, not at the display. Right here, inside the body.

**How the image forms:**
Different tissues absorb different amounts of x-rays. Bone absorbs a lot (high atomic number, high density). Soft tissue absorbs less. Air absorbs almost none. What comes out the other side is a **shadow pattern**  a map of what the beam passed through.

Only about **5% of incident photons** make it through the patient as useful image-forming radiation. The rest are absorbed or scattered.

**X-ray interactions with tissue (what the beam does inside the body):**
- **Photoelectric absorption:** The x-ray is completely absorbed by an atom. Dominant at low energies and in high-Z materials (bone, contrast agents). This is what creates **contrast**  the difference between bone and soft tissue on your image.
- **Compton scattering:** The x-ray bounces off an electron, changes direction, and loses some energy. The scattered photon goes in a random direction. This is the enemy  it adds **fog** to your image and is the primary source of **radiation dose to the operator**.
- **At diagnostic energies (30150 keV):** Both interactions occur. Lower kVp favors photoelectric (better contrast, more patient dose). Higher kVp favors Compton (less contrast, less patient dose). This is the tradeoff.

**Attenuation:** The beam weakens exponentially as it passes through tissue. The formula is I = I  e^(x), where  is the linear attenuation coefficient and x is thickness. **Half-value layer (HVL)** is the thickness needed to cut intensity in half. At normal fluoro voltages, minimum HVL must be at least 3.0 mm aluminum.

**Scatter radiation patterns:** The patient becomes a source of scattered radiation in all directions. At 1 foot from the patient, scatter can reach 500 mrad/hr. This is why the operator needs protection  the patient is essentially a radiation source.

 **Analogy:** Imagine shining a flashlight into a **foggy room**. The beam goes forward, but the fog scatters light in every direction  you can see the glow from the side. The patient's body is the "fog." The primary beam goes straight through, but scattered x-rays fly out in all directions. That scattered glow is what hits the operator.

 **Analogy  Photoelectric vs. Compton:** Think of throwing balls at a wall. **Photoelectric** is like a ball hitting a brick and being completely absorbed  thud, gone, all energy deposited. **Compton** is like a ball bouncing off a trampoline  it ricochets in a random direction with less energy. The bricks (bone) stop the ball; the trampolines (soft tissue) bounce it toward you.`},{title:"Link 3A  Catching the Image: The Image Intensifier (II)",content:`For decades, the image intensifier was the heart of every fluoro system. It takes the faint x-ray shadow exiting the patient and amplifies it into a bright visible image. Understanding the II is essential  many systems still use them, and the exam tests it heavily.

**The problem it solves:** The x-ray pattern exiting the patient is far too faint to see with the naked eye. Early fluoroscopy required dark-adapted eyes and produced terrible images. The II amplifies the signal by a factor of **5,00020,000**.

**How it works  four components in a vacuum tube:**

**1. Input phosphor + photocathode (the front end):**
X-rays hit a cesium iodide (CsI) crystal layer  converted to light photons  light hits a photocathode  converted to electrons. This is two conversions: x-raylightelectrons. CsI is used because its needle-like crystal structure channels light forward (less spread = better resolution, ~4 lp/mm).

**2. Electrostatic lenses (the middle):**
Charged metal rings create electric fields that focus and accelerate the electrons toward the output end. Voltage: ~25,000 V. The electrons gain energy (flux gain) AND are squeezed from a large input area down to a tiny output area (minification gain).

**3. Output phosphor (the back end):**
The accelerated, focused electrons slam into a small phosphor screen (P20, green-emitting) and produce a bright, minified visible image. Output screen is typically ~1 inch diameter.

**Brightness Gain = Minification Gain  Flux Gain**

**Minification gain** = (input diameter)  (output diameter)
Example: 9-inch input, 1-inch output  81 gain

**Flux gain** = number of light photons out per electron in. Typically 50150.

Total: 81  50 = **4,050 brightness gain** (typical)

**Conversion factor** is the modern way to express this: output brightness (cd/m) per input exposure rate (mR/s). Range: 100300.

**Critical fact:** Brightness gain degrades up to **10% per year** as phosphors age. This is why regular QA monitoring matters.

 **Analogy:** The image intensifier works like **night-vision goggles**. Your eyes can't see in the dark, so the goggles amplify the tiny amount of available light into something bright enough to see. The II does the same with the faint x-ray shadow  amplifies it thousands of times into a visible image. And just like night-vision goggles need batteries, the II needs high voltage to accelerate the electrons.`},{title:"Link 3A (continued)  II Modes, Quirks, and Problems",content:`The image intensifier is powerful but imperfect. Knowing its quirks is heavily tested.

**Magnification modes:**
By changing voltage on the electrostatic lenses, you change which portion of the input phosphor is used. A "9/6" dual-mode II can use the full 9-inch input (normal mode) or just the central 6-inch area (mag mode).

**What happens in mag mode:**
- Fewer electrons reach the output phosphor  image gets dimmer
- ABC compensates by increasing mA  **patient dose goes up**
- Dose increase = (normal size)  (mag size)  9/6 = (96) = **2.25 more dose**
- BUT resolution improves (from ~4 to ~6 lp/mm) because less area is being minified
- This is a key tradeoff: better resolution costs more dose

**The five image problems unique to IIs:**

**1. Pincushion distortion:** The curved input surface projects onto a flat output. Straight lines near the edges bow outward like a pincushion. Affects 810% of image area at periphery.

**2. S-distortion:** Caused by external magnetic fields (even Earth's) deflecting electrons. Lines appear S-shaped.

**3. Vignetting:** Brightness falls off at the edges. Center is brightest, periphery is dimmer. Best resolution is always at the center.

**4. Veiling glare:** Light scattered inside the output window reduces contrast. Like fog on a windshield.

**5. Lag/afterglow:** Phosphors continue glowing briefly after x-rays stop. Actually somewhat beneficial  it averages out quantum mottle (grain). Not caused by the II itself, but by the TV camera target.

**None of these problems exist with flat panel detectors.** This is a major reason the field is transitioning to FPDs.

 **Analogy  Mag mode:** Mag mode is like **pinch-zooming on your phone camera**. You see a smaller area in more detail, but the image gets noisier (grainier) and your battery drains faster. In fluoro, the "battery drain" is patient dose  the ABC cranks up the mA to compensate for the dimmer image, just like your phone screen uses more power to show a zoomed image.

 **Analogy  Pincushion distortion:** Imagine projecting a grid onto a **basketball**. The lines near the center look straight, but the lines near the edges bow outward because the surface is curved. The II's curved input phosphor does the same thing to the image.`},{title:"Link 3B  Catching the Image: Flat Panel Detectors (FPD)",content:`Flat panel detectors are the modern replacement for image intensifiers. They are thinner, lighter, produce better images, and have none of the geometric distortions of IIs. Nearly all new fluoro systems use FPDs.

**The fundamental difference:** An II converts x-rayslightelectronslight (multiple conversions, each losing information). An FPD converts x-rayslightelectrical signal in fewer steps, with less degradation.

**How an FPD works:**

The panel is a grid of tiny detector elements (DELs)  think of it like millions of tiny sensors arranged in rows and columns, like pixels on a screen.

**Each DEL contains:**
1. A **scintillator** (usually cesium iodide, CsI)  converts x-rays to light
2. A **photodiode** (amorphous silicon, a-Si)  converts light to electrical charge
3. A **thin-film transistor (TFT)**  acts as a switch to read out the charge

X-rays hit the CsI layer  light is produced  photodiode captures it as charge  TFT reads it out  digital signal. Done.

**DEL size** ranges from 200 m to 1,400 m (smaller = higher resolution).
**Maximum spatial resolution** = 1  (2  pixel pitch). So a 200 m pitch panel resolves up to 2.5 lp/mm.

**Binning:** Combining adjacent DELs to act as one larger pixel. 22 binning means 4 DELs become 1. This halves resolution but reduces data rate to 25% and improves signal-to-noise (less noisy image). Used in real-time fluoro where speed matters more than resolution.

**Key advantages over II:**
- **No geometric distortion**  no pincushion, no S-distortion
- **No vignetting**  uniform brightness edge to edge
- **Higher dynamic range**  better at showing both dense and thin areas simultaneously
- **Compact and lightweight**  easier to position
- **Same resolution at all field sizes**  unlike II where mag mode changes resolution
- **Digital output directly**  no analog-to-digital conversion needed

**The one FPD issue:** **Ghosting** (image lag from residual charge in the photodiodes). Minor but worth knowing for the exam.

 **Analogy:** Upgrading from an II to a flat panel is like going from a **tube TV to a flatscreen**. The tube TV (II) is bulky, has distortion at the edges, and the picture curves. The flatscreen (FPD) is thin, lightweight, sharp edge-to-edge, and gives you a perfect rectangle. Same content, dramatically better display.`},{title:"Link 4  Making It Visible: From Signal to Screen",content:`The image receptor (II or FPD) has captured the x-ray pattern. Now it needs to become something you can actually see on a monitor. This viewing chain is the final set of links.

**The old pathway (II-based systems):**

The bright image on the II output phosphor needs to get to a TV camera. A **beam-splitting mirror** diverts the light: typically 10% to the TV camera for real-time viewing, 90% to a film camera for recording (when used).

**TV camera types:**
- **Vidicon:** Most common. Electron beam scans a photoconductive target. Has lag (image persistence). Reduces contrast by a factor of 0.8.
- **Plumbicon:** Lead-oxide target. Less lag than vidicon. Better for dynamic studies.
- **CCD:** Solid-state. No electron beam. Best performance but most expensive.

**The TV system:**
- US standard: **525 scan lines**, interlaced (odd lines first, then even), **30 frames/second**
- **Kell factor** = 0.7  effective vertical resolution = 525  0.7 = **~367 lines**
- The TV system is typically the **weakest link** in the resolution chain. The II can resolve 4+ lp/mm, but the 525-line TV system limits what you actually see.

**The monitor:**
Displays the video signal. Monitor brightness and contrast settings directly affect what the physician perceives. A poorly calibrated monitor can make a good image look bad.

The monitor actually enhances contrast by a factor of ~2, partially compensating for the vidicon's 0.8 reduction.

**The modern pathway (FPD systems):**
Much simpler. The FPD produces a digital signal directly. It goes through digital processing (noise reduction, edge enhancement, contrast adjustment) and straight to a flat-panel display. No TV camera, no analog conversion, no scan lines.

**Your eyes  the final link:**
Room lighting matters. Dim the lights for fluoroscopy. Photopic (daylight) vision has **10 the acuity** of scotopic (dark-adapted) vision, so the bright II/FPD image is viewed with photopic vision, which is much sharper than the old direct-screen fluoroscopy that required dark adaptation.

Eye integration time is **~0.2 seconds**  your brain averages about 5 frames at 30 fps. Optimal viewing distance: **1215 inches**.

 **Analogy:** The old II-to-TV pathway is like the **telephone game**  the message passes through 5 people (x-ray  phosphor  photocathode  electrons  output phosphor  TV camera  monitor), and quality degrades at each step. A modern FPD system is like sending a **direct text message**  x-ray  digital signal  monitor. Fewer steps = less information lost.`},{title:"The Feedback Loop: Automatic Brightness Control (ABC)",content:`This is the concept that ties the whole chain together. ABC is the system's autopilot  it constantly adjusts the x-ray output to keep the image brightness constant regardless of what is happening.

**Why it exists:**
As the fluoroscope moves across the patient, tissue thickness and density change. A thin area lets lots of x-rays through (bright image). A thick area blocks most (dark image). Without ABC, the operator would have to manually adjust technique constantly. ABC does this automatically.

**How it works:**
ABC senses image brightness (either from the photocathode current, the TV camera signal, or a dedicated phototube). If the image is too dark  ABC increases mA and/or kVp. If too bright  decreases them.

**Why this matters for dose:**
ABC is the hidden driver of patient dose. When you do something that makes the image dimmer, ABC compensates by increasing radiation. This is why:
- **Magnification mode increases dose**  smaller area = dimmer image = ABC cranks up mA
- **Increasing patient-to-II distance increases dose**  inverse square law = dimmer image = ABC compensates
- **Thicker patient = more dose**  more absorption = dimmer image = ABC compensates
- **Removing the grid = less dose**  less scatter removed but also less signal removed = brighter image = ABC backs off (useful in pediatrics)

**Dose rate limits (critical exam numbers):**
- Without ABC: max **5 R/min** at tabletop
- With ABC: max **10 R/min**
- High-level/boost mode: max **20 R/min** (requires separate activation, audible signal)

**The four ABC circuit types** (you just need to know they exist and what they vary):
1. Variable mA, preset kVp
2. Variable mA with kVp following
3. Variable kVp, selected mA
4. Variable kVp AND variable mA

All achieve the same goal: constant image brightness = stable diagnostic quality. The cost is automatic dose adjustment that the operator may not notice.

 **Analogy:** ABC is like **cruise control on a car**. Going uphill (thick patient), the car automatically gives more gas (more mA) to maintain speed (brightness). Going downhill (thin patient), it eases off. You don't touch the pedal, but you're burning more fuel on the hills. The key insight: every time the image gets dimmer for any reason, ABC silently pushes the gas pedal  and the "fuel" is radiation dose.`},{title:"Beam Control: Collimation, Filtration, and Distance",content:`These are the tools that shape and clean the beam before it hits the patient. They are the operator's primary controls for managing dose.

**Collimation  aiming the beam:**
Collimators are adjustable lead shutters that restrict the beam to only the area of clinical interest. This is required by law.

Why it matters:
- Doubling the exposed area **doubles the integral dose** to the patient
- Reduces scatter radiation (less tissue irradiated = less scatter = better image AND less dose to operator)
- Does NOT make the image brighter  it only trims the edges
- Tight collimation is the single easiest way to reduce dose

**Filtration  cleaning the beam:**
Aluminum sheets in the beam path absorb low-energy x-rays. These soft x-rays would be absorbed by the patient's skin (adding dose) without ever reaching the detector (no image value).

- Minimum total filtration: **2.5 mm aluminum equivalent**
- Above 125 kVp: at least **3 mm aluminum**
- Additional copper filtration sometimes used for further hardening
- The tabletop itself must not exceed 1 mm Al equivalence at 100 kVp

**Distance  the geometry:**
Three distances matter, and each affects dose:

**1. Source-to-skin distance (SSD):**
Farther tube from patient = more spread beam = lower skin dose concentration.
- Fixed systems: minimum **18 inches** (shall not be less than 12")
- Mobile/C-arm: minimum **12 inches (30 cm)**
- Moving from 12" to 18" reduces skin dose by ~30%

**2. Patient-to-receptor distance:**
Keep the image receptor (II or FPD) as close to the patient as possible.
- Greater distance = image dimmer (inverse square law) = ABC increases dose
- Also magnifies the image geometrically (not electronically) = more blur

**3. Inverse square law:**
Radiation intensity drops with the square of distance. Double the distance  1/4 the intensity. Triple  1/9. This applies to scatter reaching the operator  every step back from the table matters significantly.

**The operator's mantra:** Collimate tight, keep the receptor close, stand as far back as possible.

 **Analogy  Collimation:** A collimator works like a **spotlight vs. a floodlight**. A spotlight (tight collimation) illuminates only what you need to see  less wasted energy, less glare bouncing around the room. A floodlight (wide open) lights up everything including stuff you don't need, wastes electricity, and creates glare (scatter) that blinds everyone nearby.

 **Analogy  Inverse square law:** Hold a candle 1 foot from a wall  bright circle. Move it 2 feet back  the circle is bigger but 4 dimmer. Move 3 feet back  9 dimmer. This is why every step the operator takes backward from the table makes a huge difference in scatter dose.`},{title:"The C-Arm: Putting It All Together",content:`The C-arm is the most common fluoroscopy configuration you will encounter. Understanding its geometry ties together everything above.

**What it is:** A C-shaped arm with the x-ray tube on one end and the image receptor (II or FPD) on the other. The patient goes in the middle. The whole C can rotate to get different angles.

**Two types:**
- **Isocentric:** The center of rotation stays at the same point regardless of angle. The patient stays in the field of view as you rotate. Used in angiography and interventional suites.
- **Non-isocentric:** The center of rotation shifts as you move the C-arm. Cheaper, used in mobile surgical applications. Requires repositioning the patient in the field.

**Tube position matters for dose:**
- **Tube below the table** (standard for fixed systems): Scatter goes downward and into the table. Operator exposure is lower.
- **Tube above the patient** (some mobile setups): Scatter goes upward toward the operator's face and hands. Much higher operator dose to eyes and extremities. Avoid when possible.

**The dead-man switch:**
X-rays are ONLY produced when the operator actively holds the exposure switch. Release it, x-rays stop. This is a safety design  prevents unintended exposure. Required on all fluoro equipment.

**Cumulative timer:**
Must sound an **audible alarm after 5 minutes** of total fluoroscopy time. Does NOT shut off the beam  it is a reminder. The operator must manually reset it. This exists because operators lose track of time during complex procedures.

**Barrier interlocks:**
If the image receptor is removed from the beam path, the system must automatically terminate exposure. You cannot irradiate a patient with no receptor catching the image.

 **Analogy  Dead-man switch:** It's like a **lawnmower handle**  the blade only spins while you're squeezing the handle. Let go and it stops immediately. This prevents the machine from running unattended. The fluoro pedal works the same way: x-rays only fire while your foot is on it.`},{title:"Recording Systems: Capturing What You See",content:`Sometimes you need to save the image  for documentation, review, or sharing. Different recording methods exist, and they have very different dose and quality tradeoffs.

**Last-image-hold / "sticky fluoroscopy":**
The most important development for dose reduction. The system freezes the last fluoroscopic frame on the monitor after you release the foot switch. You can study it without any additional radiation. Reported dose reductions of up to **95%**. Use it constantly.

**Spot films (cassette-based):**
A conventional film cassette is moved into the beam for a single high-dose exposure (>100 mA, short time). Best resolution of any recording method. Highest patient dose per image. Being replaced by digital.

**Photospot cameras:**
Film cameras (70 mm, 100 mm, 105 mm) that photograph the II output phosphor. Resolution between cassette spots and video. Dose is **1/2 to 1/3 of cassette spot films**  significant reduction. Up to 12 frames/sec.

**Cinefluorography (cine):**
Motion picture film (35 mm standard for cardiac). Frame rates: 7.5, 15, 30, 60, 90, 120 frames/sec. Dose is directly proportional to frame rate. Per frame, cine dose is **~10 routine fluoroscopy** at the same kVp. Used in cardiac catheterization.

**Digital recording:**
Direct capture of the digital signal. Lower dose than film-based methods. Allows post-processing, storage, network sharing (DICOM/PACS). This is the modern standard.

**Pulsed fluoroscopy:**
Short x-ray bursts (5 ms each) instead of continuous exposure, synchronized to camera readout. Can run at reduced frame rates (15, 7.5, 3.75 fps instead of 30). Major dose reduction with minimal image quality loss for many procedures.

**Resolution ranking (best to worst):**
Direct mirror viewing > cassette spot film > 105 mm photospot > 70 mm > 35 mm cine > 16 mm cine > digital > real-time video > videotape

**Dose ranking (highest to lowest per image):**
Cassette spot films > cine > routine fluoro > photospot/digital > video disc/tape

 **Analogy  Last-image-hold:** It's like taking a **screenshot** on your phone instead of keeping the camera app running. You capture the moment, then study it at your leisure without the camera burning battery (radiation). This single feature can cut dose by up to 95%.

 **Analogy  Pulsed fluoro:** Instead of leaving a **strobe light on continuously**, you flash it at intervals  15 or 7.5 times per second instead of 30. Between flashes, your brain fills in the gaps. You see essentially the same movie with half (or less) the electricity (radiation).`}],digital:[{title:"The Big Picture: Why Digital Changed Everything",content:`Analog fluoroscopy is like watching a live broadcast with no recording, no rewind, no enhancement. Whatever the camera sees, you see  noise, blur, and all.

Digital fluoroscopy changed the game by converting the image into **numbers**. Once an image is numbers, you can do math on it. You can subtract backgrounds, reduce noise, enhance edges, adjust contrast after the fact, store it, send it, and process it in ways that were impossible with analog.

**The core idea:** An analog-to-digital converter (ADC) turns the continuous video signal into a matrix of pixel values. Each pixel gets a number representing its brightness. Now a computer can manipulate every pixel. After processing, a digital-to-analog converter (DAC) turns it back into a viewable image on the monitor.

With FPD systems, the signal is digital from the start  no ADC needed. The x-ray hits the detector, becomes a number immediately.

**Why this matters for you:**
Digital processing is what makes modern fluoro dramatically better than old systems. It is the reason dose can be lower (digital noise reduction means you can use fewer x-rays), images can be cleaner (frame averaging), and diagnoses can be more accurate (subtraction techniques remove clutter).

Everything in this domain is about what happens to the image between capture and display  the processing pipeline.

 **Analogy:** Going from analog to digital fluoroscopy is like going from **vinyl records to digital music (MP3)**. Vinyl captures the sound as a continuous groove  whatever imperfection is in the recording, you hear it. Digital converts the sound to numbers, and once it's numbers, you can remove noise, adjust the bass, share it instantly, and store thousands of songs on a tiny device. Same transformation happened with x-ray images.`},{title:"The Digital Image: Pixels, Matrices, and Bit Depth",content:`A digital fluoroscopic image is a grid of numbers. Understanding this grid is essential to understanding everything else in digital imaging.

**The matrix:**
The image is divided into rows and columns of tiny squares called **pixels** (picture elements). Common matrix sizes: 512512, 10241024, 20482048. More pixels = finer detail = larger file.

**Bit depth:**
Each pixel stores a brightness value. The number of bits determines how many shades of gray are possible:
- 8-bit = 256 gray levels (2)
- 10-bit = 1,024 gray levels
- 12-bit = 4,096 gray levels
- 14-bit = 16,384 gray levels

More bits = finer gradations between dark and light = better contrast resolution. Modern fluoro systems typically use 1214 bits.

**Pixel size and resolution:**
Spatial resolution depends on pixel size. Smaller pixels = finer detail. For an FPD with 200 m pixel pitch, the maximum resolution is 1/(2  0.2 mm) = 2.5 line pairs per mm.

**Field of view and pixel size are linked:** For a given matrix size, a larger field of view means each pixel covers more area (lower resolution). Zooming in (smaller FOV with same matrix) increases resolution but shows less anatomy.

**File size:**
Matrix  matrix  bit depth = file size in bits.
Example: 1024  1024  12 bits = 12.6 million bits = ~1.5 MB per frame. At 30 frames/sec, that is ~45 MB/sec of data. This is why data management matters.

 **Analogy  Pixels:** A digital image is like a **mosaic on a wall**. Each tile (pixel) is one solid color. Step close and you see individual tiles. Step back and you see a smooth picture. More tiles (higher matrix) = smoother, more detailed picture, but also more tiles to buy and install (bigger file size). Bit depth is like how many **paint colors** are available for each tile  256 shades (8-bit) vs. 4,096 shades (12-bit) makes subtle gradients much smoother.`},{title:"Image Processing: What the Computer Does to Your Image",content:`Raw digital images look mediocre. Processing is what makes them diagnostic. These are the tools the system applies automatically or on demand.

**Windowing (brightness and contrast adjustment):**
The most basic and most important processing tool. The full range of pixel values (say 04095 for 12-bit) is mapped to the display range your monitor can show.
- **Window width** controls contrast: narrow window = high contrast (small range of values spread across the display). Wide window = low contrast (everything visible but flat).
- **Window level** controls brightness: shifting the center of the window up or down brightens or darkens the image.

This is the digital equivalent of adjusting brightness and contrast knobs, but with far more precision.

**Frame averaging (temporal filtering):**
Multiple consecutive frames are averaged together. This dramatically reduces quantum mottle (noise/grain) because noise is random and averages out, while the real anatomy stays consistent.

The tradeoff: averaging introduces **motion blur**. If the patient or catheter moves between frames, the averaged image is blurry. This is why frame averaging is reduced or turned off during dynamic procedures.

Recursive filtering is a variation where each new frame is blended with the running average. The weight given to the newest frame controls the balance between noise reduction and motion sharpness.

**Edge enhancement (spatial filtering):**
Mathematical sharpening that amplifies boundaries between structures. Makes edges appear crisper. Can also amplify noise, so it is used carefully.

**Flat-field correction:**
Compensates for non-uniform sensitivity across the detector. Without it, some areas would appear brighter or darker due to detector variations, not anatomy.

**These processes happen in real time**, every frame, 30 times per second. The image you see on the monitor has already been processed.

 **Analogy  Windowing:** Imagine you're in a room with a huge window looking at a mountain range. **Window width** is like adjusting your binoculars' zoom  narrow view shows fine detail of one peak (high contrast), wide view shows the whole range but less detail (low contrast). **Window level** is like tilting the binoculars up or down  same zoom, different center point (brighter or darker).

 **Analogy  Frame averaging:** Like taking **multiple photos of the same scene and stacking them** in Photoshop. Random noise (grain) is different in each photo and averages out, but the actual scenery stays sharp. The more photos you stack, the cleaner the result  but if anything moved between shots, it blurs.`},{title:"Digital Subtraction Angiography (DSA)",content:`DSA is the most powerful application of digital processing in fluoroscopy. It removes everything except the blood vessels from the image.

**The problem it solves:** When contrast agent is injected into a vessel, the vessel becomes visible on fluoroscopy  but so is everything else (bone, soft tissue, gas, etc.). The vessel of interest is buried in clutter.

**The solution  mask-mode subtraction:**
1. Take a **mask image** (before contrast injection)  this captures all the background anatomy
2. Inject contrast agent
3. Take a **live image** (with contrast)  this has background PLUS vessels
4. **Subtract:** Live image  Mask image = vessels only (background cancels out)

The result is a clean image showing only the contrast-filled vessels against a uniform background. Bone, soft tissue, everything stationary disappears.

**Why it works:** Subtraction is pixel-by-pixel. If pixel (100,200) had a value of 2000 in the mask and 2500 in the live image, the difference is 500  that 500 is pure contrast agent signal.

**The weakness  motion:**
If the patient moves between the mask and the live image, the background does not line up. Instead of canceling, it creates artifacts (misregistration). Patient cooperation and fast acquisition are critical.

**Pixel shifting (re-registration):** The computer can shift the mask image a few pixels to realign with the live image. Helps with small movements but cannot fix large ones.

**Other subtraction techniques:**
- **K-edge subtraction:** Uses two different x-ray energies, one just above and one just below the K-edge of the contrast agent. Subtracting removes everything except the contrast material. Elegant but technically demanding.
- **Time-interval difference (TID):** Subtracts sequential frames from each other rather than from a pre-contrast mask. Shows only what changed between frames  useful for tracking bolus movement.

**Road mapping:** A subtracted image of the vessels is overlaid on the live fluoroscopic image. The physician can see the vessel map while guiding a catheter in real time. Extremely useful for interventional procedures.

 **Analogy  DSA:** It's exactly like a **green screen in movies**. First you film the empty green screen (the mask). Then the actor performs in front of it (contrast injection). Subtract the background  only the actor (blood vessels) remains. If the green screen moves between shots (patient motion), you get ugly artifacts  same problem, same reason.

 **Analogy  Road mapping:** Like using **GPS navigation overlaid on your car's windshield**. You see the real road ahead (live fluoro) with the map (vessel image) drawn on top, so you know exactly where the turns (vessels) are while driving (guiding the catheter).`},{title:"Pulsed Fluoroscopy and Dose Reduction",content:`Pulsed fluoroscopy is the single most impactful dose-reduction technology in digital fluoroscopy. It replaces continuous x-ray exposure with short bursts.

**How it works:**
Instead of a constant x-ray beam at 30 frames/sec, the tube fires short pulses (~5 ms or less) at a reduced frame rate: 15, 7.5, or even 3.75 pulses per second. Between pulses, the last captured frame is displayed (last-image-hold).

**Dose reduction:**
Going from 30 fps to 15 fps cuts dose roughly in half. Going to 7.5 fps cuts it to about a quarter. For many procedures (GI studies, line placements), the lower frame rate is perfectly adequate.

**The tradeoff:**
Lower frame rates = less smooth motion. At 7.5 fps, fast-moving objects (catheter tips, contrast bolus) appear jerky. For cardiac work, 1530 fps is usually needed. For static or slow-moving anatomy, 7.5 fps is fine.

**Grid removal in pediatrics:**
For small patients (infants, young children), removing the anti-scatter grid significantly reduces dose. The grid normally absorbs scatter radiation to improve contrast, but also absorbs some useful primary radiation. In small patients, there is less scatter to begin with, so the grid does more harm than good. ABC responds to the brighter image by reducing mA.

**Combined strategies:**
Modern fluoro uses multiple dose-reduction tools simultaneously:
- Pulsed mode (reduced frame rate)
- Last-image-hold (no radiation while studying the frozen frame)
- Tight collimation (less tissue irradiated)
- Copper filtration (hardens beam further)
- Proper positioning (receptor close to patient)
- Lowest acceptable frame rate for the clinical task

The cumulative effect of all these measures can reduce dose by 8090% compared to continuous, unoptimized fluoroscopy.

 **Analogy  Grid removal in pediatrics:** The anti-scatter grid is like a **window screen** on your house. It blocks bugs (scatter) but also blocks some breeze (useful radiation). For a big house with lots of bugs (adult patient with lots of scatter), the screen is essential. But for a tiny dollhouse (infant), there are almost no bugs  the screen just blocks the breeze and makes the ABC turn up the fan (dose) to compensate. Take the screen off the dollhouse and everyone benefits.`},{title:"DICOM, PACS, and the Digital Workflow",content:`Once images are digital, they need to be stored, shared, and managed. This is the infrastructure that makes digital imaging practical.

**DICOM (Digital Imaging and Communications in Medicine):**
The universal standard format for medical images. Every manufacturer's equipment speaks DICOM, so images from any system can be stored, viewed, and shared. A DICOM file contains both the image data AND metadata (patient name, date, acquisition parameters, etc.).

**PACS (Picture Archiving and Communication System):**
A network for storing and distributing medical images. Images acquired at the fluoro unit are sent to the PACS server, where they are archived and made available to any authorized workstation in the hospital.

**Benefits of the digital workflow:**
- No physical film to develop, store, or lose
- Images available instantly from anywhere on the network
- Post-processing can be applied at any workstation (window/level, measurements, annotations)
- Side-by-side comparison with prior studies is trivial
- Long-term storage is cheaper than film archives

**Display monitors:**
Medical-grade monitors must meet specific standards for brightness, uniformity, and calibration. Diagnostic monitors typically have higher resolution and brightness than the monitors on the fluoro unit itself. The AAPM TG18 guidelines specify quality control procedures for displays.

**The practical takeaway:** The digital workflow means the image you capture at the fluoro unit is immediately available to the radiologist at their workstation, to the referring physician on their desktop, and in the permanent medical record  all within seconds of acquisition.`}],radprotection:[{title:"The Big Picture: One Rule Governs Everything",content:`Every regulation, every piece of lead, every technique choice in radiation protection comes back to one idea:

**Any radiation dose, no matter how small, carries some risk. Therefore, keep all doses as low as reasonably achievable (ALARA).**

This is the **linear, no-threshold (LNT) model**  the assumption that there is no "safe" dose. Even 1 mR carries a tiny probability of causing harm. The probability increases linearly with dose. There is no threshold below which risk is zero.

Whether this model is perfectly accurate is debated in science. But for regulation and practice, it is the law. You act as if every photon matters.

**From this single principle, everything else follows:**
- Dose limits exist (because some risk is accepted, but capped)
- ALARA exists (because you should go below limits, not just meet them)
- Shielding exists (to block unnecessary photons)
- Collimation is required (to limit exposed area)
- Personnel monitoring exists (to track cumulative dose)
- Protective apparel exists (to shield the operator)
- Distance recommendations exist (inverse square law reduces exposure)

**The three tools of radiation protection  Time, Distance, Shielding:**
1. **Time:** Minimize beam-on time. Every second of fluoroscopy adds dose. Use last-image-hold. Use short "looks" rather than continuous fluoro.
2. **Distance:** Maximize distance from the source. The patient is the primary scatter source to the operator. Every step back matters (inverse square law).
3. **Shielding:** Put material between the radiation source and people. Lead aprons, thyroid shields, lead glasses, room barriers, table-side drapes.

Everything you learn in this domain is an application of these three tools.

 **Analogy  Time, Distance, Shielding:** These three are like your defenses against rain. **Time** = spend less time outside (less beam-on time). **Distance** = the farther you are from the storm, the drier you stay (inverse square law). **Shielding** = carry an umbrella (lead apron). Use all three together and you stay dry. Rely on only one and you might still get soaked.`},{title:"The Operator's Exposure: Where It Comes From",content:`To protect yourself, you first need to understand where your dose comes from.

**The patient is your primary radiation source.** Not the tube. The x-ray tube is usually under the table or behind the patient. The primary beam is aimed at the detector. You are not standing in the primary beam (if you are, something has gone very wrong).

Your exposure comes from **scatter radiation**  x-rays that bounce off the patient in all directions. The patient is essentially a radiation source sitting right in front of you.

**Scatter intensity depends on:**
- **Patient dose** (more radiation into the patient = more scatter out)  this is why every technique that reduces patient dose also reduces operator dose
- **Field size** (larger collimation = more tissue irradiated = more scatter)
- **Your distance from the patient** (inverse square law)
- **Whether the tube is above or below the patient**  tube below (standard) directs scatter downward; tube above sends scatter toward your face

**Typical scatter levels:**
At 1 foot from the patient, scatter can reach **500 mrad/hr** during fluoroscopy. At 3 feet, it drops to ~55 mrad/hr (inverse square law). At 6 feet, ~14 mrad/hr.

**Where dose accumulates on the operator:**
Without protection, the highest doses go to:
1. Hands (closest to the beam, especially during interventional procedures)
2. Eyes (unshielded, at table height for some geometries)
3. Thyroid (exposed if no thyroid shield)
4. Legs below the apron

**The practical hierarchy:**
1. Reduce the patient's dose (this automatically reduces yours)
2. Stand as far from the patient as possible
3. Wear your lead
4. Use all available shielding (table-side drapes, ceiling-mounted shields, mobile barriers)

 **Analogy:** Think of the patient as a **bare light bulb**. The x-ray tube shines a focused beam at them, but the patient scatters radiation in all directions like the bulb scatters light. You're standing next to this light bulb all day. Reducing the bulb's wattage (lower dose to patient) automatically reduces the light hitting you. Standing farther away means less light reaches you (inverse square law). Wearing lead is like putting up a room divider  it blocks the light coming your way.`},{title:"Protective Equipment: Your Radiation Armor",content:`Lead-equivalent shielding is your primary personal defense. Know what each piece does and how effective it is.

**Lead aprons:**
- **0.25 mm lead equivalent:** Attenuates ~97% of scatter radiation at diagnostic energies
- **0.5 mm lead equivalent:** Attenuates ~99.9%
- Covers approximately **80% of active bone marrow** when properly fitted
- Must be worn by anyone who might receive 5 mrad/hr or more
- Front-only aprons are lighter but leave the back exposed  wraparound styles provide better protection during rotation
- **Never fold a lead apron**  this cracks the lead and creates gaps. Hang on a proper rack.

**Thyroid shields:**
- 0.5 mm lead equivalent collar
- Protects the thyroid gland, one of the most radiosensitive organs
- Should be worn routinely during fluoroscopy

**Protective eyewear:**
- 0.25 mm lead equivalent lenses
- Reduces eye dose by **8590%**
- Important because the lens of the eye is one of the organs with a recognized threshold for deterministic effects (cataracts)
- Side shields recommended (scatter comes from multiple angles)

**Lead gloves:**
- 0.25 mm lead equivalent
- Cumbersome but necessary when hands are frequently near the beam
- Reduce dexterity  some operators prefer careful hand positioning over gloves

**Fixed room shielding:**
- **Table-side lead drapes/curtains:** At least 0.25 mm Pb equivalent. Hang from the table and block scatter from the patient's body toward the operator's legs
- **Bucky slot cover:** At least 0.25 mm Pb. Covers the slot where the cassette tray slides in
- **Ceiling-mounted lead acrylic shields:** Transparent leaded glass/acrylic that protects the head and neck while allowing vision
- **Room walls:** Structural shielding calculated by a physicist based on workload, occupancy, and distance. Primary barriers (facing the beam): 1/16" lead. Secondary barriers: may be less.

**Gonad shielding for patients:**
California requires **0.5 mm lead equivalent** gonad shielding when gonads are within the useful beam or within 5 cm of the field edge, unless it interferes with the diagnostic objective. Reduces gonad dose by ~92%.

 **Analogy  Lead apron:** Your lead apron is like a **knight's armor**. A 0.25 mm apron blocks 97% of scatter  like armor that stops 97 out of 100 arrows. A 0.5 mm apron blocks 99.9%  nearly impenetrable. But armor only works where it covers you. Your uncovered head, neck, and hands are still exposed, which is why you add a thyroid collar (neck guard) and lead glasses (visor).

 **Important:** Never fold a lead apron  it's like bending a credit card back and forth. The lead inside cracks, creating invisible gaps that let radiation through. Always hang aprons on proper racks.`},{title:"Dose Measurement: PKA, Air Kerma, and What the Numbers Mean",content:`Modern fluoro systems display dose information. You need to know what these numbers mean and why they matter.

**Air Kerma (Ka):**
Measured in Gray (Gy) or milliGray (mGy). This is the radiation intensity at a specific point  usually the interventional reference point (IRP), defined as 15 cm from the isocenter toward the x-ray tube. It correlates with **skin dose**.

Think of air kerma as "how intense is the beam at the patient's skin?" High air kerma = risk of skin injury.

**Kerma-Area Product (KAP or PKA):**
Measured in Gycm. This is air kerma multiplied by the cross-sectional area of the beam. It correlates with **total energy deposited in the patient**  the stochastic (cancer) risk indicator.

Key property: PKA is **constant along the beam axis**. Whether you measure it at the tube or at the patient, the product of intensity  area stays the same (as the beam spreads, intensity drops but area increases proportionally). This means a single sensor near the tube can estimate patient dose.

**Why both matter:**
- High air kerma + small field = risk of **skin burn** (concentrated dose)
- High PKA + large field = risk of **stochastic effects** (cancer) from large volume of tissue irradiated
- You can have high PKA with low peak skin dose (large field, moderate technique)
- You can have high skin dose with relatively low PKA (small field, long procedure time on one spot)

**Fluoroscopy time:**
Displayed on every system. While not a direct dose measurement, it is a rough proxy. Typical dose rates: 15 R/min for an average patient. The cumulative timer alarm at 5 minutes is a reminder, not a limit.

**Sentinel events / dose thresholds for follow-up:**
- The Joint Commission requires tracking when cumulative air kerma exceeds certain levels
- Peak skin dose >3 Gy may warrant clinical follow-up for skin effects
- These are monitoring thresholds, not "safe/unsafe" cutoffs

 **Analogy  Air Kerma vs. KAP:** Think of a watering hose. **Air kerma** is like the **water pressure at one spot**  how hard the water hits one point on the lawn (= skin dose). **KAP** is like the **total amount of water on the whole lawn**  pressure  area covered (= total energy deposited in the patient). You can have high pressure on a tiny spot (risk of burning the grass/skin) or low pressure spread over the whole yard (risk of flooding/stochastic effects). Both matter, for different reasons.`},{title:"Personnel Monitoring: Tracking Your Dose",content:`You cannot manage what you do not measure. Personnel monitoring devices track cumulative radiation exposure over time.

**Film badges:**
- Oldest technology, still used in some settings
- A piece of photographic film in a holder with metal filters
- When developed, the darkening indicates dose
- Range: **10 mrad to 700 rads**
- Accuracy: **25%** (not very precise)
- Exchanged monthly
- Provides a permanent record
- Filters allow separation of different radiation types and energies

**Thermoluminescent dosimeters (TLDs):**
- Lithium fluoride crystals that trap energy when irradiated
- When heated, they release the stored energy as light  the light output is proportional to dose
- Accuracy: **9%** (much better than film)
- Not rereadable  once heated, the stored dose information is gone
- More sensitive and accurate than film badges for the lower doses typical in fluoroscopy

**Optically stimulated luminescence (OSL) dosimeters:**
- Similar principle to TLD but read with light instead of heat
- Can be re-read multiple times
- Most commonly used type today (Luxel badges)

**Pocket ionization chambers:**
- Small, pen-like devices that give an **immediate reading**
- No permanent record
- Used when real-time dose awareness is needed

**Where to wear your badge:**
- At the collar, **outside** the lead apron
- This measures the dose to unshielded areas (head, neck, eyes)
- Some facilities issue a second badge under the apron to estimate shielded body dose
- The collar badge represents a conservative (high) estimate of effective dose

**Ring badges:**
- Worn on the hand closest to the beam during interventional procedures
- Measures extremity dose, which has a separate (higher) regulatory limit

 **Analogy:** Your dosimeter badge is like a **rain gauge** in your garden. It doesn't stop the rain  it just measures how much fell over time. When you check it (monthly or quarterly), you learn your cumulative "rainfall" (dose). If the gauge fills up faster than expected, you know something changed  maybe the sprinklers are on too much, or there's a leak. Same idea: if your badge reading spikes, investigate why before assuming you got that much dose.`},{title:"Practical Dose Reduction: The Operator's Checklist",content:`This is the actionable summary. Everything above reduces to a set of decisions you make during every procedure.

**Before the procedure:**
- Select the lowest frame rate acceptable for the clinical task (pulsed at 7.5 or 15 fps vs. continuous 30)
- Position the image receptor as close to the patient as possible
- Wear full protective equipment: lead apron, thyroid shield, glasses
- Ensure table-side drapes and ceiling shields are in place
- For pediatric patients: consider removing the grid

**During the procedure:**
- **Collimate tightly**  only expose the anatomy you need to see
- Use **last-image-hold**  study the frozen frame, not live fluoro
- Use short "looks"  tap the pedal in brief bursts, do not hold it down
- Keep your **hands out of the primary beam** at all times
- Stand as **far from the table** as practical
- Monitor cumulative fluoroscopy time
- If the tube is above the table (some C-arm orientations): extra caution for eye and hand dose

**After the procedure:**
- Record the fluoroscopy time and dose indicators (KAP, air kerma) in the patient record
- Review your personnel dosimeter readings periodically
- If peak skin dose may have exceeded thresholds, flag the case for follow-up

**The hierarchy that works every time:**
1. Do you need fluoro right now? (If not, do not step on the pedal)
2. Is the collimation as tight as possible?
3. Is the receptor as close to the patient as possible?
4. Are you as far from the patient as possible?
5. Is your lead on?

If you consistently apply these five questions, your doses  and your patients' doses  will stay well below limits.

 **Analogy  The five questions:** Think of this checklist like checking before you leave the house: **Keys? Phone? Wallet? Stove off? Door locked?** In fluoro: **Need the beam on? Collimated tight? Receptor close? Standing far? Lead on?** Make it automatic and you'll never have a "bad dose day."`}],doselimits:[{title:"The Big Picture: Why Limits Exist and How They Work",content:`Dose limits are the regulatory ceiling  the maximum radiation dose that any person should receive. They exist because radiation carries risk, and society has decided on acceptable risk levels for different populations.

**The framework has three tiers:**

**Tier 1  Occupational workers (you):**
People who work with radiation accept a higher limit because it is part of their job and they have training, monitoring, and protective equipment. But "higher" still means carefully controlled.

**Tier 2  The public:**
Members of the public who are near radiation sources (visitors, people in adjacent rooms) should receive very little dose. Their limits are 10 lower than occupational limits.

**Tier 3  Embryo/fetus:**
The most restrictive limits. A developing fetus is extremely radiosensitive. Once a pregnancy is declared, strict monthly limits apply.

**The units:**
- **Rem** (Roentgen Equivalent Man)  the traditional unit of dose equivalent. Accounts for both the absorbed dose AND the type of radiation.
- **Sievert (Sv)**  the SI unit. 1 Sv = 100 rem.
- For x-rays, the quality factor is 1, so 1 rad = 1 rem = 10 mSv = 10 mGy.
- You will see both rem and Sv on the exam. Know the conversions cold.

**ALARA vs. limits:**
Dose limits are NOT targets. They are ceilings. The ALARA principle says you should be as far below the limit as reasonably achievable. A worker at 4.9 rem/year is technically legal but represents a failure of ALARA. Most fluoroscopy workers accumulate well under 1 rem/year with proper protection.

 **Analogy:** Dose limits are like **speed limits** on a highway. The speed limit is 65 mph (5 rem/year), but you don't aim for 64. You drive at whatever safe speed is appropriate for conditions  maybe 55. That's ALARA. Someone doing 64 in a school zone isn't technically speeding, but they're clearly not driving as safely as reasonably achievable.`},{title:"Occupational Dose Limits: The Numbers You Must Know",content:`These are the annual limits for radiation workers. Memorize them  they are among the most frequently tested numbers.

**Annual occupational limits:**
- **Whole body (TEDE):** 5 rem (50 mSv) per year
- **Skin and extremities:** 50 rem (500 mSv) per year
- **Lens of the eye:** 15 rem (150 mSv) per year
- **Any individual organ:** 50 rem (500 mSv) per year

**For workers under 18:**
10% of adult limits across the board. So whole body = 0.5 rem (5 mSv).

**Cumulative lifetime limit:**
1 rem  age in years. A 30-year-old worker should not have accumulated more than 30 rem total lifetime occupational dose.

**The pattern to remember:**
- Whole body is the most restrictive: **5 rem**
- Eye lens is 3 higher: **15 rem**
- Skin and extremities are 10 higher: **50 rem**
- The 5-15-50 pattern is easy to memorize

**Why extremities get a higher limit:**
Hands and feet have less sensitive tissue (mostly skin, bone, connective tissue). The critical organs (bone marrow, gonads, lens) are in the trunk and head, which are protected by the apron and have the lower limit.

**TEDE explained:**
Total Effective Dose Equivalent. It accounts for the fact that different organs have different radiation sensitivities. A weighted sum of doses to individual organs gives the "effective" whole-body dose. This single number represents the overall stochastic risk.

 **Memory trick  5/15/50:** Think of it as a **slot machine**: 5  15  50. Whole body (most important) gets the tightest limit: **5 rem**. Eyes get 3 that: **15 rem**. Skin/extremities get 10 the base: **50 rem**. The pattern makes sense because your trunk houses the most critical organs (bone marrow, gonads), your eyes are moderately sensitive, and your extremities are the least sensitive.`},{title:"Fetal, Public, and Special Population Limits",content:`These populations get their own  more restrictive  limits because they are either more sensitive or did not choose to be near radiation.

**Declared pregnant worker:**
Once a worker officially declares pregnancy (in writing), the fetus gets its own limits:
- **Entire pregnancy:** 0.5 rem (5 mSv) total
- **Monthly (after declaration):** 0.05 rem (0.5 mSv)

The monthly limit is the more restrictive one in practice. It means the employer must ensure that the fetal dose does not exceed 50 mrem in any single month.

Declaration is voluntary  the worker is not required to declare. But once declared, the employer must implement dose management measures (possibly reassignment to lower-dose duties, additional monitoring badge at waist level under the apron).

**Members of the public:**
- **Annual limit:** 0.1 rem (1 mSv) per year
- **Hourly limit:** 2 mrem (0.02 mSv) in any one hour

These apply to anyone not classified as a radiation worker: patients' families, janitorial staff, people in adjacent rooms. This is why room shielding calculations are done by a physicist  to ensure that radiation levels in unrestricted areas stay below public limits.

**Area designations:**
- **Radiation area:** >5 mrem/hr (0.05 mSv/hr) at 30 cm from the source
- **High radiation area:** >100 mrem/hr (1 mSv/hr) at 30 cm from the source

These designations trigger specific posting and access control requirements. A fluoroscopy room during operation would typically be a radiation area. The area immediately around an interventional table could be a high radiation area.

 **Analogy  Fetal limits:** Think of fetal dose limits like **school zone speed limits**. Regular roads (occupational workers) have one limit, but when you enter a school zone (pregnant worker), the limit drops dramatically  not because driving is inherently more dangerous, but because the people you could hurt are much more vulnerable. The 0.5 rem pregnancy limit vs. the 5 rem occupational limit is the radiation equivalent of 15 mph vs. 65 mph.`},{title:"Notification and Reporting Requirements",content:`When dose limits are exceeded or nearly exceeded, specific reporting actions are required. These are regulatory requirements  failing to report is a violation.

**24-hour reporting thresholds (must report to regulatory authority within 24 hours):**
- Whole body (TEDE): **5 rem** (the annual limit itself)
- Lens of eye: **15 rem**
- Skin/extremities: **50 rem**

In other words, if someone receives their entire annual limit in a short period (suggesting an accident or incident), you must report within 24 hours.

**Immediate notification thresholds (must report immediately):**
- Whole body (TEDE): **25 rem** (5 the annual limit)
- Lens of eye: **75 rem** (5 the annual limit)
- Skin/extremities: **250 rem** (5 the annual limit)

These represent serious radiation incidents. The 5 pattern makes them easy to remember  multiply the 24-hour threshold by 5.

**Record-keeping requirements:**
- Personnel monitoring records must be maintained for the **duration of the license** (essentially permanently for most institutions)
- Workers have the right to see their own dose records
- Employers must provide an annual dose report to each monitored worker
- Records must include: name, identification, dates of monitoring, dose values, type of radiation

**The practical takeaway:** Normal fluoroscopy work should never come close to these thresholds. If someone's badge reads anywhere near the limits, something went wrong  equipment malfunction, improper technique, or lost/contaminated badge. Investigate before assuming the dose is real.

 **Memory trick  Reporting thresholds:** The 24-hour thresholds are the same as the annual limits (5/15/50). The immediate thresholds are **5 those** (25/75/250). Think of it as: "Hitting your annual limit in one incident = report within 24 hours. Hitting 5 your annual limit = call immediately."`},{title:"Dose Rate Limits for Equipment",content:`Separate from personnel dose limits, there are limits on how much radiation the fluoroscopic equipment itself can deliver. These are engineering controls built into the machine.

**Fluoroscopic exposure rate limits at the tabletop:**
- Standard fluoroscopy (without ABC): **5 R/min maximum**
- With automatic brightness control (ABC): **10 R/min maximum**
- High-level/boost mode (without recording): **20 R/min maximum**

**High-level mode requirements:**
- Requires a separate, deliberate activation (not the standard foot switch)
- Must have an **audible alarm** that sounds continuously during use
- Only permitted for specific clinical indications requiring higher dose rates
- Operator must be specially trained for its use

**The 5-10-20 pattern:** Standard / ABC / Boost. Each step doubles. Easy to remember.

**At 80 kVp specifically:** Maximum 2.2 R/min per mA at the tabletop. This is a manufacturer specification.

**Mobile equipment (C-arm):**
- Maximum dose rate: **5 R/min at 30 cm** from the input surface
- Source-to-skin distance minimum: **12 inches (30 cm)**
- Image intensification required (no direct fluoroscopy screens)

**Standard range for an average patient:**
During routine fluoroscopy of a 70 kg patient, typical dose rates are **15 R/min** at the tabletop. The actual rate depends on patient size, technique factors, and field size.

**Testing requirements:**
- With ABC: physicist measurement at least **annually**
- Without ABC: at least every **3 years**
- ABC performance monitoring: **weekly** with a phantom (checking that brightness stays consistent)

 **Memory trick  5-10-20:** Standard mode (without ABC): **5** R/min. With ABC: **10** R/min. Boost/high-level: **20** R/min. Each step doubles. Think of it like gears on a bike: 1st gear = 5, 2nd gear = 10, 3rd gear (turbo) = 20. Each gear requires more deliberate effort to engage and gives you more power  and more responsibility.`},{title:"Units and Conversions: The Language of Dose",content:`Radiation dose has a confusing set of overlapping units  traditional and SI. You need to be fluent in both because the exam uses both and regulations reference both.

**Absorbed dose (how much energy was deposited):**
- **Rad** (traditional) = 100 ergs per gram of tissue
- **Gray (Gy)** (SI) = 1 joule per kilogram
- **1 Gy = 100 rads**  **1 rad = 10 mGy**

**Dose equivalent (absorbed dose adjusted for radiation type):**
- **Rem** (traditional) = rad  quality factor (Q)
- **Sievert (Sv)** (SI) = gray  quality factor
- **1 Sv = 100 rem**  **1 rem = 10 mSv**

**Quality factor (Q):**
For x-rays and gamma rays: **Q = 1**
This means for diagnostic x-rays, 1 rad = 1 rem. This simplifies things enormously  in fluoroscopy, absorbed dose and dose equivalent are numerically equal.

For alpha particles Q = 20, for neutrons Q = 10. These are not relevant to fluoroscopy but may appear on the exam as distractors.

**Exposure (how much ionization in air):**
- **Roentgen (R)**  only defined for x-rays and gamma rays in air
- Not a tissue dose, but a measurable quantity
- At diagnostic energies, 1 R  1 rad in soft tissue (approximately)

**Quick conversion table:**
| Traditional | SI | Relationship |
|---|---|---|
| 1 rad | 10 mGy | Absorbed dose |
| 1 rem | 10 mSv | Dose equivalent |
| 100 rad | 1 Gy | |
| 100 rem | 1 Sv | |
| 1 mrad | 10 Gy | |
| 1 mrem | 10 Sv | |

**The exam trick:** When they give you a limit in rem and ask for mSv, multiply by 10. When they give mSv and ask for rem, divide by 10. Example: 5 rem annual limit = 50 mSv.

 **Analogy  Units:** Traditional vs. SI units are like **miles vs. kilometers**  same distance, different number. 1 Gy = 100 rad (like 1 km  0.6 miles). The conversion factor for dose equivalent is identical: 1 Sv = 100 rem. The good news for fluoroscopy: since x-rays have a quality factor of 1, rads and rems are equal, just like in a world where miles and kilometers happened to be the same length. So **1 rad = 1 rem = 10 mGy = 10 mSv** for x-rays.`}],radbio:[{title:"The Big Picture: What Radiation Actually Does to Your Body",content:`Radiation biology explains the WHY behind every protection measure. If you understand what radiation does to cells, every dose limit, every piece of shielding, every ALARA decision makes intuitive sense instead of being an arbitrary rule.

**The chain of events:**

**Radiation photon** enters your body 
**Ionization:** knocks electrons off atoms in your tissue (this is why it is called "ionizing radiation") 
**Chemical damage:** broken atoms create free radicals (especially from water molecules  hydroxyl radicals) 
**DNA damage:** free radicals and direct hits break DNA strands 
**Cell response:** the cell tries to repair the damage 
**Outcome:** repair succeeds (no harm)  or repair fails  cell death, mutation, or uncontrolled growth (cancer)

**The two outcomes that matter:**

**1. Cell death**  If enough cells die, you get tissue damage: skin burns, cataracts, bone marrow suppression. These are **deterministic effects**. They have a threshold dose (below which they do not happen) and get worse with increasing dose.

**2. Cell mutation**  If the DNA is misrepaired rather than destroyed, the cell survives with altered instructions. It may become cancerous years or decades later. These are **stochastic effects**. No proven threshold  any dose carries some probability. The probability (not severity) increases with dose.

**This distinction is fundamental:**
- Deterministic effects  threshold, severity proportional to dose  skin burns, cataracts
- Stochastic effects  no threshold, probability proportional to dose  cancer, genetic effects

Every protection measure aims to prevent deterministic effects entirely (stay below thresholds) and minimize stochastic effects (ALARA  reduce probability as much as possible).

 **Analogy  The chain of events:** Radiation damage is like a **bullet hitting a window** in a building. Bullet hits glass (ionization)  glass shatters  shards damage furniture and plumbing (chemical damage/free radicals)  water pipe breaks  water damages the foundation over time (DNA damage). The building might repair itself (patch the pipe, replace the glass). Or the damage might weaken the foundation permanently (mutation  cancer).

 **Analogy  Deterministic vs. Stochastic:** **Deterministic** effects are like **sunburn**  there's a threshold of sun exposure below which you don't burn, and once you pass it, the worse it gets the more sun you get. **Stochastic** effects are like **lottery tickets**  each ticket (dose) gives you a tiny chance of "winning" (cancer). Buying more tickets increases your odds, but you could win with one ticket or lose with a hundred. The prize (cancer) is the same regardless of how many tickets you bought.`},{title:"How Cells Respond to Radiation Damage",content:`Understanding cellular response explains why some tissues are more sensitive than others and why timing and dose rate matter.

**DNA damage types:**
- **Single-strand break (SSB):** One rail of the DNA ladder breaks. Usually repaired quickly and accurately using the other strand as a template. Most common type of damage.
- **Double-strand break (DSB):** Both rails break at the same location. Much harder to repair. More likely to result in cell death or mutation. This is the critical damage.
- **Base damage:** Individual DNA bases are altered. Can lead to point mutations if not repaired before replication.

**The Law of Bergoni and Tribondeau (1906):**
Cells are most radiosensitive when they are:
1. **Undifferentiated** (unspecialized  stem cells)
2. **Rapidly dividing** (high mitotic rate)
3. **Have a long mitotic future** (many divisions ahead)

This law explains the radiosensitivity ranking:

**Most sensitive  Least sensitive:**
Lymphocytes  Erythroblasts  Intestinal epithelium  Reproductive cells  Endothelial cells  Connective tissue  Bone  Nerve  Brain  Muscle

**Why lymphocytes are the exception:** They are highly differentiated and do not divide rapidly, yet they are the MOST radiosensitive cells. They undergo **interphase death**  they die without attempting to divide. This is the one major exception to the Bergoni and Tribondeau law.

**Repair and recovery:**
- Cells can repair sublethal damage given time (hours)
- This is why **fractionation** (spreading dose over time) is less harmful than the same dose all at once
- Higher dose rates are more damaging because cells have less time to repair between hits
- **Oxygen effect:** Well-oxygenated cells are ~3 more sensitive than hypoxic cells (the oxygen enhancement ratio, OER  2.53.0). Oxygen "fixes" free radical damage, making it permanent.

 **Analogy  DNA repair:** Your cells have a built-in **spellcheck system**. When radiation breaks a DNA strand, repair enzymes scan the damage and try to fix it  like autocorrect fixing a typo. Single-strand breaks are like a typo where the other strand provides the correct spelling (easy fix). Double-strand breaks are like both copies of a word being corrupted  the spellchecker has to guess, and sometimes it guesses wrong (mutation).

 **Analogy  Bergoni & Tribondeau:** Think of a **construction site** vs. a **finished building**. A building under construction (rapidly dividing, undifferentiated cells) is vulnerable to damage  knock out one beam and the whole floor might collapse. A finished building (mature, non-dividing cells like muscle or nerve) can take more hits because the structure is complete and reinforced. This is why stem cells and embryos are most sensitive  they're under construction.`},{title:"Deterministic Effects: Threshold Doses and What Happens",content:`Deterministic effects (also called non-stochastic or tissue reactions) are the "predictable" consequences. Above a threshold dose, damage is certain. Below it, the effect does not occur. Severity increases with dose.

**Why thresholds exist:** These effects require a minimum number of cells to be killed before the tissue shows visible damage. Below the threshold, enough cells survive to maintain normal function.

**Key deterministic effects and approximate thresholds:**

**Skin effects (detailed in Skin Effects domain):**
- Early transient erythema: ~2 Gy (200 rad)
- Main erythema: ~6 Gy
- Temporary hair loss: ~3 Gy
- Permanent hair loss: ~7 Gy
- Dry desquamation: ~14 Gy
- Moist desquamation: ~18 Gy
- Ulceration/necrosis: ~24 Gy

**Cataracts (lens of the eye):**
- Threshold: several hundred rads for acute exposure
- For chronic/protracted exposure, higher total doses needed
- Latent period: months to years
- This is why eye lens has its own dose limit (15 rem/year) and why lead glasses matter

**Bone marrow suppression:**
- Detectable depression: ~25 rad (0.25 Gy)
- Significant clinical effect: ~1 Gy
- Lethal without treatment (LD 50/30  dose lethal to 50% in 30 days): ~3.54.5 Gy whole body

**Temporary sterility:**
- Males: ~15 rad to testes (spermatogonia depletion ~3050 rad acute)
- Females: higher threshold, ~250 rad for temporary sterility

**The key concept:** In fluoroscopy, the main deterministic risk is **skin injury** from prolonged procedures. Other deterministic effects require doses that should never occur in diagnostic imaging.

 **Analogy  Thresholds:** A threshold works like a **dam**. Below the dam's capacity, water is contained safely  no flood damage (no clinical effect). Once the water rises above the dam (threshold dose), flooding begins and gets worse the more water you add. For skin burns, the dam is at ~2 Gy. For cataracts, it's higher. Stay below the dam line and the effect simply doesn't happen.`},{title:"Stochastic Effects: Cancer and Genetic Risk",content:`Stochastic effects are the long-game consequences. They may never happen, but the probability increases with every dose increment. This is the risk that ALARA exists to minimize.

**Cancer induction:**
- No proven threshold (the LNT model assumes risk from any dose)
- **Probability** increases with dose; **severity** does not (cancer is cancer regardless of the dose that caused it)
- Latent period: years to decades (minimum ~2 years for leukemia, ~10 years for solid tumors)
- Risk estimate: approximately **5% per Sievert** (5 in 100 will develop fatal cancer per Sv of effective dose). This is for an average population.

**Most radiation-susceptible cancers (descending order):**
Female breast  thyroid  hemopoietic tissue (leukemia)  lungs  GI tract  bone

**Genetic effects:**
- Mutations in germ cells (sperm and eggs) that can be passed to offspring
- Never conclusively demonstrated in humans (even Hiroshima/Nagasaki survivor studies)
- Demonstrated in animal studies
- The risk is assumed to exist, which is why gonad shielding and fetal protection matter
- Genetic effects are **stochastic**  probability increases with dose, no threshold assumed

**The Genetically Significant Dose (GSD):**
A population-level measure. It is the gonad dose that, if received by every member of the population, would produce the same total genetic burden as the actual uneven distribution of doses. It accounts for age, reproductive potential, and dose variation. Used for public health planning, not individual decisions.

**Somatic vs. Genetic:**
- **Somatic effects** = damage to the person irradiated (cancer, cataracts, skin burns)
- **Genetic effects** = damage passed to future offspring (mutations in germ cells)
- Both can be stochastic. Only somatic effects can be deterministic.`},{title:"Dose-Response Models: How Risk Relates to Dose",content:`The relationship between radiation dose and biological effect is described by dose-response curves. Different effects follow different curves.

**Linear, no-threshold (LNT):**
- Risk increases linearly with dose. No safe dose.
- Used for **stochastic effects** (cancer, genetic)
- Basis of all current radiation protection regulations
- Controversial  some scientists argue low doses may have a threshold or even be beneficial (hormesis). But for regulatory purposes, LNT is the standard.

**Linear-quadratic:**
- At low doses, response is linear. At high doses, it curves upward (accelerating)
- Better describes acute effects on cells and tissues
- The "quadratic" component reflects that two independent damage events can combine

**Threshold:**
- No effect below a certain dose. Above the threshold, severity increases with dose.
- Describes **deterministic effects** (skin burns, cataracts, sterility)
- The threshold is the minimum dose to kill enough cells to show clinical effect

**Why this matters for the exam:**
You will be asked which model applies to which effect:
- Cancer/genetic effects  **linear, no-threshold** (probability model)
- Skin burns/cataracts  **threshold** (severity model)

**Relative vs. absolute risk models:**
- **Absolute risk:** Radiation adds a fixed number of extra cancers per year per unit dose, independent of baseline rate
- **Relative risk:** Radiation multiplies the baseline cancer rate by a factor that depends on dose
- Current data better supports the relative risk model for most solid cancers

**Practical implication:** Even with the LNT model, the risk from diagnostic fluoroscopy doses is very small. A typical fluoroscopic exam delivers 110 mSv. The additional cancer risk from 10 mSv is approximately 0.05%  real but very small compared to the baseline ~25% lifetime cancer risk.

 **Analogy  LNT model:** The linear no-threshold model treats radiation risk like **alcohol and driving**. Even one drink slightly impairs you (no truly "safe" amount). More drinks = more impairment (linearly). Regulations are based on this assumption  even if one drink probably won't cause an accident, we still set legal limits well below dangerous levels. Whether that first drink truly impairs you is debatable, but for safety purposes, we act as if it does.`},{title:"Acute Radiation Syndrome: When Everything Goes Wrong",content:`Acute Radiation Syndrome (ARS) requires whole-body doses far beyond anything in diagnostic imaging. You will not cause ARS with a fluoroscope. But it is tested because it illustrates dose-response principles.

**ARS occurs after a large, acute, whole-body dose (>1 Gy delivered in a short time).**

**The three sub-syndromes, in order of dose:**

**1. Hematopoietic syndrome (110 Gy):**
- Bone marrow cells die (they are radiosensitive per Bergoni and Tribondeau)
- White blood cell and platelet counts drop
- Onset: days to weeks
- LD 50/30 (dose lethal to 50% within 30 days)  3.54.5 Gy without treatment
- Potentially survivable with medical support (transfusions, antibiotics, growth factors)

**2. Gastrointestinal syndrome (1050 Gy):**
- GI epithelial lining destroyed (rapidly dividing cells)
- Severe nausea, vomiting, diarrhea, fluid loss
- Onset: days
- Almost uniformly fatal (no functional GI tract to absorb nutrients or drugs)

**3. Cerebrovascular syndrome (>50 Gy):**
- Central nervous system damage
- Confusion, seizures, coma
- Onset: hours
- Always fatal, rapidly

**The four phases of ARS:**
1. **Prodromal phase**  nausea, vomiting (onset and severity correlate with dose)
2. **Latent phase**  temporary improvement (false sense of recovery)
3. **Manifest illness**  the syndrome-specific damage appears
4. **Recovery or death**

**Relevance to fluoroscopy:**
ARS cannot happen from fluoroscopy. But understanding it reinforces why dose limits exist and why acute accidental exposures are treated as emergencies. The threshold for detectable clinical effects from acute whole-body exposure is approximately **25 rads (0.25 Gy)**.

 **Analogy  ARS syndromes:** Think of ARS like floors in a burning building. **Floor 1 (hematopoietic, 1-10 Gy):** The smoke alarms go off, sprinklers activate  survivable with help. **Floor 2 (GI, 10-50 Gy):** The floor starts to collapse  the building might not be salvageable. **Floor 3 (cerebrovascular, >50 Gy):** The foundation gives way  collapse is certain and rapid. Higher dose = higher floor = worse prognosis. In fluoroscopy, you're never even in the lobby of this building.`}],skineffects:[{title:"The Big Picture: Why Skin Effects Are the #1 Clinical Risk in Fluoroscopy",content:`Of all the biological effects of radiation, **skin injury is the one most likely to actually happen during a fluoroscopic procedure.** Not cancer (stochastic, low probability). Not genetic effects (never demonstrated in humans). Skin burns  real, visible, sometimes severe tissue damage.

**Why the skin is vulnerable:**
The skin is the first tissue the x-ray beam hits. In fluoroscopy, the beam enters through a relatively small area of skin and stays there for the duration of the procedure. Long interventional procedures can deliver cumulative skin doses of 1020+ Gy to a single area  well above the threshold for serious injury.

**Why this matters NOW:**
With the rise of complex interventional procedures (cardiac catheterization, coronary angioplasty, neurological interventions, hepatic embolization), fluoroscopy times have increased dramatically. Procedures that take 13 hours deliver skin doses that were unimaginable when fluoroscopy was only used for quick GI studies.

**The FDA has issued specific alerts** about radiation-induced skin injuries from fluoroscopy. This is not theoretical.

**The tricky part about skin injury:**
Radiation skin damage has a **delayed onset**. The patient leaves the procedure feeling fine. The burn appears days to weeks later. If the physician does not recognize it as radiation-induced, it may be misdiagnosed and mistreated. The latent period is what makes fluoroscopic skin injury dangerous  no one connects the procedure to the injury unless they know to look.

 **Analogy:** Fluoroscopic skin injury is like a **severe sunburn that happens from the inside**. You can't feel it happening during the procedure, just like you can't feel UV damage building up at the beach. The burn appears hours to weeks later, and the patient (and sometimes the doctor) doesn't connect it to the procedure. The difference from sunburn: x-ray skin damage can go much deeper, affecting layers you can't see from the surface.`},{title:"Skin Dose Thresholds: What Happens at Each Level",content:`Skin effects follow a clear dose-response pattern. Each effect has a threshold and a characteristic time course. These numbers are important for the exam and for clinical practice.

**Progressive skin effects (single-site cumulative dose):**

**2 Gy (200 rad)  Early transient erythema:**
- Faint redness that appears within hours
- Fades within days
- Often not noticed by patient or physician
- First warning sign

**3 Gy (300 rad)  Temporary epilation (hair loss):**
- Hair falls out in the irradiated area
- Appears 23 weeks after exposure
- Usually temporary  hair regrows in weeks to months

**6 Gy (600 rad)  Main erythema:**
- Definite redness, like a sunburn
- Appears ~10 days to 2 weeks after exposure
- May be accompanied by edema (swelling)
- This is the dose level where the patient will notice something is wrong

**7 Gy (700 rad)  Permanent epilation:**
- Hair follicles permanently destroyed
- Hair will not regrow in the affected area

**14 Gy (1,400 rad)  Dry desquamation:**
- Skin peels, like a severe sunburn
- Flaky, dry, itchy
- Heals but may leave pigmentation changes

**18 Gy (1,800 rad)  Moist desquamation:**
- Skin blisters and weeps
- Painful
- Risk of infection
- Slow healing (weeks to months)

**24+ Gy (2,400+ rad)  Ulceration and necrosis:**
- Full-thickness skin destruction
- May require surgical intervention (skin grafts)
- Can take months to heal, or may not heal
- In severe cases, can lead to secondary necrosis affecting deeper tissues

**The progression is cumulative.** A procedure delivering 3 Gy in the first hour followed by another 3 Gy in the second hour = 6 Gy total to that skin site. The tissue does not "reset" between fractions in the short term.

 **Analogy  Dose thresholds:** Think of it like **holding your hand over a stove burner**. At low heat (2 Gy), your skin turns pink  transient redness, goes away. Turn the heat up (6 Gy)  a definite red mark, like a real burn. Higher (14 Gy)  the skin peels. Higher still (18 Gy)  blisters and weeping. At extreme heat (24+ Gy)  tissue destruction requiring medical intervention. The key: the heat accumulates. Two hours at medium is the same as one hour at high.`},{title:"Clinical Scenarios: When Skin Injury Happens",content:`Knowing which procedures carry the highest risk helps you apply extra vigilance when it matters most.

**Highest-risk procedures:**
1. **Coronary angioplasty and stenting**  long procedures, beam on one area, steep angulation increases skin dose
2. **Cardiac electrophysiology (ablation)**  can last 26+ hours
3. **Hepatic embolization**  large patient, high technique, long fluoro time
4. **Neurological interventions**  long procedures in complex anatomy
5. **Peripheral vascular interventions**  long procedures, sometimes repeated

**Risk factors that increase skin dose:**
- **Long fluoroscopy time**  the most obvious factor
- **High dose-rate mode** (cine, DSA, boost mode)  much higher dose per second than routine fluoro
- **Steep beam angulation**  the beam passes through more tissue, ABC increases technique, AND the entrance spot on the skin becomes smaller (concentrating dose)
- **Large patient**  more attenuation requires higher technique factors
- **Table height**  patient closer to the tube = higher skin dose (inverse square law)
- **Repeated procedures**  if the same skin area is irradiated in procedures separated by days or weeks, cumulative dose adds up. Repair between fractions provides some protection, but not complete.

**What operators should do:**
- Monitor cumulative dose indicators during the procedure
- Change beam angle periodically to distribute skin dose across a larger area
- Remove table padding (which acts like additional patient thickness) when possible
- Document the maximum skin dose estimate in the procedure note
- Inform the patient if cumulative skin dose exceeds ~3 Gy and advise them to watch for skin changes

 **Analogy  Beam angulation:** Steep beam angles are like holding a **magnifying glass at an angle in sunlight**. Tilting the glass concentrates the light into a smaller, more intense spot. Similarly, steep tube angulation makes the beam travel through more tissue (ABC increases dose) AND concentrates the entrance dose on a smaller skin area. Double penalty.`},{title:"Fetal Dose: Protecting the Most Vulnerable Patient",content:`The developing embryo and fetus are extremely radiosensitive. Radiation effects on the unborn child depend heavily on the gestational age at the time of exposure.

**Why the fetus is vulnerable:**
The fetus is made up of rapidly dividing, undifferentiated cells  exactly the type most sensitive to radiation per the Law of Bergoni and Tribondeau. Different stages of development have different vulnerabilities.

**Effects by gestational stage:**

**02 weeks (pre-implantation):**
- All-or-nothing response
- High doses cause embryonic death (spontaneous abortion), threshold ~50 rad (0.5 Gy)
- If the embryo survives, it develops normally (damaged cells are replaced since all cells are still totipotent)
- No malformations at this stage

**28 weeks (organogenesis):**
- The most dangerous period  organs are forming
- Radiation can cause **congenital malformations** (structural birth defects)
- Central nervous system, limbs, eyes are all vulnerable
- As little as 10 rad (0.1 Gy) may cause effects in animal studies
- This is why the first trimester is considered highest risk

**815 weeks (critical brain development):**
- Highest risk for **intellectual disability/microcephaly**
- Brain neurons are migrating and organizing
- This narrow window is uniquely sensitive

**1525 weeks:**
- Reduced but still elevated risk for intellectual effects
- Overall sensitivity declining as organs mature

**After 25 weeks:**
- Similar sensitivity to a newborn
- Stochastic risk (childhood cancer) remains

**Fetal dose limits (regulatory):**
- Entire pregnancy: **0.5 rem (5 mSv)**
- Monthly after declaration: **0.05 rem (0.5 mSv)**

**The 10-day rule vs. the practical approach:**
Historically, non-urgent abdominal x-ray exams were limited to the first 10 days of the menstrual cycle (before possible implantation). Today, the approach is more nuanced  the benefit of the procedure is weighed against the risk, and fetal dose is estimated. If the exam is clinically necessary, it is performed with dose optimization.

**Fetal dose estimation:**
For most diagnostic fluoroscopy, fetal dose is very low unless the beam directly includes the pelvis. Scatter dose to the uterus from above-diaphragm procedures is typically <1 mGy  well below any threshold for concern.

 **Analogy  Fetal development stages:** Think of building a **house**. During the first 2 weeks (foundation/pre-implantation)  damage either destroys the foundation completely (miscarriage) or the foundation is rebuilt perfectly (all-or-nothing). During weeks 2-8 (framing/organogenesis)  knocking out a support beam deforms the whole structure (birth defects). During weeks 8-15 (wiring/brain development)  damaging the electrical system leaves permanent functional problems (intellectual effects). After 25 weeks (finishing touches)  damage is cosmetic, not structural (similar to newborn sensitivity).`}],qa:[{title:"The Big Picture: Why QA Exists and What It Protects",content:`Quality assurance is the system that ensures everything keeps working the way it should. It is not glamorous, but it is the safety net that catches problems before they become patient injuries.

**The core idea:** Fluoroscopic equipment degrades over time. Phosphors age, detectors drift, calibrations shift, mechanical parts wear. Without regular testing, a system could be delivering twice the expected dose or producing images too poor for diagnosis  and no one would know until something goes wrong.

**QA protects two things simultaneously:**
1. **Image quality**  can you see what you need to see?
2. **Radiation dose**  is the patient getting more radiation than necessary?

These two are always in tension. A system that produces great images at 5 normal dose is failing QA. A system that gives very low dose but undiagnostic images is also failing QA. The goal is optimal balance.

**Who does QA:**
- **Medical physicist:** Annual comprehensive testing (dose rates, HVL, spatial resolution, image quality metrics). Required by regulation.
- **Technologist/operator:** Routine daily/weekly checks (image quality phantom, monitor calibration, exposure indicators).
- **Service engineer:** Repairs and recalibrations after QA identifies problems.

**When QA is required:**
- At installation (acceptance testing  does the new equipment meet specifications?)
- Annually (physicist survey  is it still performing correctly?)
- After any repair or modification that could affect image quality or dose
- Routinely (daily/weekly operational checks)

**The practical reality:** QA often feels like paperwork and busywork until it catches something. A system slowly degrading over months might be caught at the annual survey. A sudden failure (tube change, software update gone wrong) should be caught by routine checks. The QA schedule is designed to catch both.

 **Analogy:** QA is like **car maintenance**. You check tire pressure regularly (daily image checks), get oil changes every few months (weekly ABC checks), and have an annual full inspection (physicist survey). Skip maintenance and the car still runs  until the day it doesn't, and the failure might be catastrophic (undiagnosed dose problem or invisible image quality loss). Nobody loves maintenance, but everyone loves a car that works.`},{title:"What Gets Tested: The Key QA Measurements",content:`Each QA test evaluates a specific aspect of system performance. Understanding what each test measures helps you know what can go wrong.

**Dose measurements:**

**Exposure rate at the tabletop:**
The most critical safety measurement. Is the system staying within the 5/10/20 R/min limits? Measured with an ionization chamber at the tabletop surface.
- Tested at typical clinical kVp and automatic settings
- If the system exceeds limits, it must be taken out of service until repaired

**Half-value layer (HVL):**
Measures beam quality (how well the beam is filtered). Aluminum sheets are placed in the beam until the measured dose drops to half. Must be at least **3.0 mm Al** at normal operating voltages. Low HVL means insufficient filtration  unnecessary skin dose.

**Dose per frame (for digital acquisition):**
Each recorded image (spot, cine, DSA frame) delivers a specific dose. This should be consistent and within acceptable ranges.

**Image quality measurements:**

**Spatial resolution:**
Measured with a resolution test pattern (bar phantom). How fine a detail can the system distinguish? Reported in line pairs per mm (lp/mm). Typical values: ~4 lp/mm for II systems, ~2.53.5 lp/mm for FPD depending on binning mode.

**Contrast resolution (low-contrast detectability):**
Can the system distinguish objects that are only slightly different in density from their background? This is arguably more clinically important than spatial resolution  finding a subtle lesion requires contrast resolution.

**Uniformity:**
Is the image evenly bright from center to edge? Non-uniformity can indicate detector degradation, optical misalignment, or field non-uniformity.

**Distortion:**
For II systems: is pincushion distortion within acceptable limits? A grid pattern should appear as a grid.

**Automatic brightness control (ABC):**
Does it maintain consistent brightness as phantom thickness changes? Tested weekly with a standard phantom. ABC drift means either image quality or dose (or both) are changing without the operator knowing.`},{title:"Testing Schedule and Record-Keeping",content:`Different tests happen at different intervals. The schedule is designed to catch different types of problems.

**Daily/each use:**
- Visual check of image quality (does the image look normal?)
- Monitor brightness and contrast (are the displays properly calibrated?)
- Cumulative timer function (does the alarm sound at 5 minutes?)
- Dead-man switch function (do x-rays stop when you release the switch?)

These are operational checks  quick, simple, catch catastrophic failures.

**Weekly:**
- ABC performance with standard phantom
- Image quality phantom review (resolution, contrast)
- Check for artifacts (unexpected marks or patterns in the image)

These catch gradual drift. If the phantom image looks different this week than last week, something changed.

**Annually (physicist survey):**
- Complete dose measurements (tabletop rates, HVL, dose per frame)
- Spatial resolution quantification
- Low-contrast resolution
- Image uniformity
- Distortion evaluation
- Collimation accuracy (does the light field match the x-ray field?)
- Automatic collimation function
- Fluoroscopic timer accuracy
- Display monitor calibration
- Protective equipment integrity (lead aprons fluoroscoped for cracks)

**After service/repair:**
Any repair that could affect dose or image quality triggers a physics check before the system returns to clinical use.

**Record-keeping requirements:**
- QA records must be maintained for at least **3 years**
- Film processor control charts/logs: at least **1 year**
- Records should include: date, test performed, result, action taken if out of specification
- Physicist reports typically kept for the life of the equipment
- Personnel dosimetry records: maintained for the duration of the license

**The exam angle:** Know the testing frequencies and the 3-year/1-year record retention distinction. Also know that ABC is tested weekly (the most frequently tested clinical parameter) because it directly controls both image quality and dose.`},{title:"Image Quality Concepts: Resolution, Noise, and Contrast",content:`Image quality is not a single number. It is a balance of several factors, each of which can be measured and optimized. Understanding these concepts lets you troubleshoot image problems and understand equipment specifications.

**Spatial resolution  sharpness:**
How small an object can be distinguished? Measured in line pairs per mm (lp/mm).
Limited by: pixel size (FPD), phosphor structure (II), focal spot size, motion, magnification, and (for II systems) the TV system.

The weakest link determines overall resolution. In an II system, the 525-line TV system is usually the weakest link (~367 effective lines via Kell factor). In an FPD system, it is the pixel pitch.

**Contrast resolution  visibility of subtle differences:**
How different in density must two structures be before you can tell them apart? This is more clinically important than spatial resolution for most fluoroscopy applications.

Limited by: noise (quantum mottle), scatter radiation, veiling glare (II), processing parameters, and display settings.

**Noise (quantum mottle):**
The random graininess in the image caused by the statistical fluctuation of x-ray photons. Fewer photons = more noise = harder to see low-contrast structures.

The fundamental rule: **noise decreases with the square root of dose.** To cut noise in half, you need 4 the dose. To cut it by a factor of 3, you need 9 the dose. This is why dose and image quality are always in tension  better images require more photons.

**MTF (Modulation Transfer Function):**
The comprehensive measure of spatial resolution. Describes how well the system preserves contrast at different spatial frequencies. MTF of 1.0 = perfect. MTF of 0 = invisible. The overall system MTF is the **product** of each component's MTF: MTF_total = MTF_tube  MTF_receptor  MTF_display  ...

This means the system is always worse than its weakest component.

 **Analogy  Noise:** Quantum mottle (noise) is like **static on a radio**. Turn the volume down (fewer photons) and static drowns out the music (anatomy). Turn it up (more photons/dose) and the music gets clearer. The cruel math: to cut the static in half, you need 4 the volume (dose). This is why dose and image quality will always be in tension.

 **Analogy  MTF:** The imaging chain is like a **sound system**  speaker, amplifier, cable, turntable. Each component slightly degrades the sound. The overall quality is the product of all components' quality. Put a $1,000 speaker on a $5 cable and the $5 cable determines what you hear. Same with imaging: the weakest link in the chain (often the display or the TV system) limits overall resolution.

**Detective Quantum Efficiency (DQE):**
How efficiently the system uses the x-ray photons it receives. A DQE of 1.0 (100%) means every photon contributes to the image. Real systems: II ~6070%, FPD ~7080%. Higher DQE = less dose needed for the same image quality.`},{title:"Display Quality and Monitor Calibration",content:`The best image in the world is useless if the display cannot show it properly. Monitor quality is the last link in the imaging chain and is often the most neglected.

**Why display calibration matters:**
A poorly calibrated monitor can hide critical diagnostic information. If blacks are too black, you lose low-density details. If the contrast is too high, you lose subtlety. If brightness varies across the screen, you may see artifacts that are not in the image (or miss pathology that is).

**DICOM GSDF (Grayscale Standard Display Function):**
The standard that ensures a given pixel value looks the same on every monitor everywhere. It defines the relationship between digital pixel values and displayed brightness so that the grayscale looks perceptually uniform across the range. Without this calibration, the same image looks different on different monitors.

**Monitor QA tests:**
- **Luminance:** Maximum brightness, minimum darkness, and the ratio between them (contrast ratio)
- **Uniformity:** Is brightness consistent across the screen?
- **Resolution:** Can the monitor resolve the pixel matrix of the image?
- **SMPTE test pattern:** A standard test image with areas designed to test low-contrast visibility, high-contrast resolution, and geometric accuracy. Check that all elements are visible.

**Viewing conditions:**
- Room lighting affects what you can see on the monitor
- Diagnostic interpretation should be done on calibrated, medical-grade monitors in controlled lighting
- The fluoroscopy monitor in the procedure room may not meet diagnostic display standards  it is for procedural guidance
- Reflections on the monitor surface degrade perceived contrast

**Practical monitor issues:**
- Brightness degrades over time (especially older LCD backlights)
- Dead pixels or stuck pixels create artifacts
- Monitor warm-up time: some monitors need 2030 minutes to reach stable brightness
- Ambient light sensors on some monitors automatically adjust brightness  ensure these are functioning if present

**The takeaway:** Display quality control is inexpensive, takes minutes, and prevents a scenario where excellent imaging equipment produces images that a mediocre monitor renders undiagnostic.

 **Analogy  Monitor calibration:** Your display is like the **windshield of your car**. The road ahead (the image) hasn't changed, but a dirty, scratched, or fogged windshield makes it impossible to see clearly. Monitor calibration is windshield cleaning  the cheapest, easiest part of the imaging chain to maintain, yet often the most neglected. A $50,000 detector feeding a poorly calibrated monitor is like a Ferrari with mud-covered windows.`},{title:"Putting It Together: The Quality Chain",content:`Quality assurance is not a series of isolated tests. It is a system that monitors every link in the imaging chain. If any link fails, the entire system underperforms.

**The chain and what QA catches at each link:**

**X-ray tube  Dose measurement, HVL**
Is the tube producing the right quantity and quality of x-rays? Is the filtration adequate?

**Collimation  Light field/x-ray field alignment**
Is the collimator cutting where it says it is? Light field must match x-ray field to within specified tolerances. If they do not match, the operator thinks they are irradiating one area but are actually exposing more (or different) tissue.

**Image receptor  Resolution, uniformity, DQE**
Is the detector capturing the image accurately? Are dead pixels developing? Is the phosphor degrading?

**ABC  Weekly phantom test**
Is the automatic system maintaining consistent brightness across varying thicknesses? If ABC drifts, patients get silently overdosed or underdosed.

**Processing  Artifact check, noise measurement**
Is digital processing introducing artifacts? Is temporal filtering working correctly? Are images being stored and retrieved without corruption?

**Display  Calibration, GSDF compliance, luminance**
Is the monitor faithfully showing what was captured?

**Protective equipment  Annual fluoroscopic inspection of lead aprons**
Are there cracks in the lead? Aprons with cracked lead can allow radiation through without any visible external damage. Fluoroscoping the apron reveals internal defects.

**When QA fails:**
If a test falls outside tolerance, the corrective action depends on severity:
- Minor drift  adjust and retest
- Significant deviation  restrict use until corrected
- Safety limit exceeded (dose rate too high)  take system out of clinical use immediately

**The most important QA principle for the exam:** Know that QA exists to maintain the balance between image quality and dose, that it happens at specific intervals, and that the physicist is the primary professional responsible for comprehensive testing. The operator's role is daily/weekly checks and awareness of when something looks wrong.

 **Analogy  Quality chain:** QA is like a **preflight checklist for a pilot**. Before every flight (daily checks), the pilot walks around the plane checking obvious things. Periodically (weekly), mechanics run diagnostic tests. Annually, the plane gets a full tear-down inspection. Miss a step and 99 times out of 100 nothing happens. But that one time it matters, it really matters. The QA schedule exists because fluoroscopic equipment can silently drift out of spec  delivering too much dose or too-poor images  and nobody notices until the physicist checks or a patient is harmed.`}]};function Me({children:n,accent:a,onClick:r,padding:o="md",style:u}){const{theme:h}=ve(),f=o==="sm"?12:o==="lg"?28:20;return d.jsx("div",{onClick:r,style:{background:h.surface,borderRadius:12,padding:f,borderLeft:a?`3px solid ${a}`:void 0,boxShadow:h.shadow,cursor:r?"pointer":"default",transition:"background 0.15s",...u},children:n})}function Hb({value:n=0,size:a=120,strokeWidth:r=8,label:o="Readiness"}){const{theme:u}=ve(),h=(a-r)/2,f=2*Math.PI*h,g=f-Math.min(n,100)/100*f,y=p=>p<40?u.error:p<70?u.warning:u.success;return d.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:d.jsxs("div",{style:{position:"relative",width:a,height:a},children:[d.jsxs("svg",{width:a,height:a,style:{transform:"rotate(-90deg)"},children:[d.jsx("circle",{cx:a/2,cy:a/2,r:h,fill:"none",stroke:u.border,strokeWidth:r}),d.jsx("circle",{cx:a/2,cy:a/2,r:h,fill:"none",stroke:y(n),strokeWidth:r,strokeDasharray:f,strokeDashoffset:g,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.8s ease-out, stroke 0.3s"}})]}),d.jsxs("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsxs("div",{style:{fontSize:a>140?32:26,fontWeight:800,color:u.text,lineHeight:1},children:[Math.round(n),"%"]}),d.jsx("div",{style:{fontSize:12,color:u.textMuted,fontWeight:500,marginTop:4},children:o})]})]})})}function Ib({onNavigate:n}){const{theme:a,domainColors:r}=ve(),{state:o,dispatch:u}=bn(),{study:h}=ba(),f=Hm.find(q=>o.currentDay>=q.dayRange[0]&&o.currentDay<=q.dayRange[1]),g=(()=>{for(const q of Hm){const I=q.dailySchedule.find(O=>O.day===o.currentDay);if(I)return{...I,phase:q.name}}return null})(),y=(g?.domains||[]).map(q=>et.find(I=>I.id===q)).filter(Boolean),p=h.totalAnswered>0||Object.keys(h.readSections).length>0,b=(()=>{const q=g?.domains||[];for(const I of q){const O=pn[I];if(!O)continue;if((h.readSections[I]||[]).length<O.length)return I}for(const I of et){const O=pn[I.id];if(!O)continue;const M=h.readSections[I.id]||[];if(M.length>0&&M.length<O.length)return I.id}for(const I of et){const O=pn[I.id];if(!O)continue;if((h.readSections[I.id]||[]).length<O.length)return I.id}return null})(),T=Object.values(o.completedDays).filter(Boolean).length,x=va.length;h.totalAnswered;const k=h.totalAnswered>0?h.totalCorrect/h.totalAnswered*100:0,z=T/30*100,H=Math.round(k*.6+z*.4);return d.jsxs("div",{children:[d.jsx("div",{style:{textAlign:"center",marginBottom:24},children:d.jsxs("div",{style:{fontSize:14,color:a.textMuted,marginBottom:4},children:[f?.name," Phase  Day ",o.currentDay," of 30"]})}),d.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:28},children:d.jsx(Hb,{value:H,size:140,strokeWidth:10,label:"Exam Readiness"})}),g&&d.jsxs(Me,{accent:f?.color,style:{marginBottom:16},children:[d.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:10},children:d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:12,fontWeight:600,color:f?.color,textTransform:"uppercase",letterSpacing:.5,marginBottom:4},children:"Today's Focus"}),d.jsx("div",{style:{fontSize:17,fontWeight:600,color:a.text,lineHeight:1.4},children:g.focus})]})}),d.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:16},children:y.map(q=>d.jsxs("span",{style:{background:(r[q.id]||q.color)+"18",color:r[q.id]||q.color,padding:"4px 12px",borderRadius:20,fontSize:13,fontWeight:500},children:[q.icon," ",q.name]},q.id))}),d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsx("button",{onClick:()=>n("study",b?{domain:b}:void 0),style:{flex:1,padding:"12px 20px",borderRadius:10,border:"none",background:a.primary,color:"#FFF",fontWeight:600,fontSize:15,cursor:"pointer",fontFamily:"inherit",minHeight:48},children:p?"Continue Session":"Start Session"}),d.jsx("button",{onClick:()=>u({type:"TOGGLE_DAY",day:o.currentDay}),style:{padding:"12px 20px",borderRadius:10,border:o.completedDays[o.currentDay]?"none":`2px solid ${a.border}`,background:o.completedDays[o.currentDay]?a.success:"transparent",color:o.completedDays[o.currentDay]?"#FFF":a.textMuted,fontWeight:600,fontSize:15,cursor:"pointer",fontFamily:"inherit",minHeight:48},children:o.completedDays[o.currentDay]?" Done":"Mark Done"})]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:16},children:[{label:"Quiz",sub:`${x} questions`,icon:"",tab:"study",color:a.primary},{label:"Review",sub:`${h.missedQuestions.length} missed`,icon:"",tab:"review",color:a.warning},{label:"Numbers",sub:"Key values",icon:"",tab:"review",color:"#D97706"},{label:"Progress",sub:`${T}/30 days`,icon:"",tab:"progress",color:a.success}].map(q=>d.jsx(Me,{onClick:()=>n(q.tab),padding:"sm",style:{cursor:"pointer"},children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[d.jsx("div",{style:{width:40,height:40,borderRadius:10,background:q.color+"15",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20},children:q.icon}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:15,fontWeight:600,color:a.text},children:q.label}),d.jsx("div",{style:{fontSize:12,color:a.textMuted},children:q.sub})]})]})},q.label))}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,justifyContent:"center",marginBottom:16},children:[d.jsx("button",{onClick:()=>u({type:"SET_DAY",day:o.currentDay-1}),style:{width:40,height:40,borderRadius:10,border:`1px solid ${a.border}`,background:a.surface,color:a.textMuted,fontSize:16,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),d.jsxs("div",{style:{fontSize:14,color:a.textMuted,minWidth:80,textAlign:"center"},children:["Day ",o.currentDay," of 30"]}),d.jsx("button",{onClick:()=>u({type:"SET_DAY",day:o.currentDay+1}),style:{width:40,height:40,borderRadius:10,border:`1px solid ${a.border}`,background:a.surface,color:a.textMuted,fontSize:16,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),f&&d.jsxs(Me,{style:{marginBottom:16},children:[d.jsxs("div",{style:{fontSize:12,fontWeight:600,color:a.textMuted,textTransform:"uppercase",letterSpacing:.5,marginBottom:12},children:["Study Tips  ",f.name]}),f.protocol.map((q,I)=>d.jsxs("div",{style:{display:"flex",gap:10,marginBottom:10,alignItems:"flex-start"},children:[d.jsx("span",{style:{color:f.color,fontWeight:700,fontSize:14,minWidth:22,height:22,borderRadius:11,background:f.color+"15",display:"flex",alignItems:"center",justifyContent:"center"},children:I+1}),d.jsx("span",{style:{color:a.textSecondary,fontSize:14,lineHeight:1.6},children:q})]},I))]})]})}function pi({children:n,variant:a="primary",size:r="md",fullWidth:o,disabled:u,onClick:h,icon:f,style:g}){const{theme:y}=ve(),p={sm:{padding:"8px 16px",fontSize:14},md:{padding:"12px 24px",fontSize:16},lg:{padding:"16px 32px",fontSize:18}},b={primary:{background:y.primary,color:"#FFFFFF",border:"none"},secondary:{background:"transparent",color:y.primary,border:`2px solid ${y.primary}`},ghost:{background:"transparent",color:y.textSecondary,border:"none"},danger:{background:y.error,color:"#FFFFFF",border:"none"},success:{background:y.success,color:"#FFFFFF",border:"none"}},T=b[a]||b.primary,x=p[r]||p.md;return d.jsxs("button",{onClick:h,disabled:u,style:{...T,...x,borderRadius:10,fontWeight:600,fontFamily:"inherit",cursor:u?"not-allowed":"pointer",opacity:u?.5:1,width:o?"100%":void 0,display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,minHeight:48,...g},children:[f&&d.jsx("span",{children:f}),n]})}function Wb({value:n=0,color:a,height:r=8,label:o,showPercent:u}){const{theme:h}=ve(),f=a||(n<40?h.error:n<70?h.warning:h.success);return d.jsxs("div",{children:[(o||u)&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[o&&d.jsx("span",{style:{fontSize:14,color:h.textSecondary},children:o}),u&&d.jsxs("span",{style:{fontSize:14,fontWeight:600,color:f},children:[Math.round(n),"%"]})]}),d.jsx("div",{style:{height:r,borderRadius:r/2,background:h.border,overflow:"hidden"},children:d.jsx("div",{style:{height:"100%",width:`${Math.min(n,100)}%`,borderRadius:r/2,background:f,transition:"width 0.5s ease-out"}})})]})}function Ye({children:n,caption:a}){const{theme:r}=ve();return d.jsxs("div",{style:{margin:"16px 0",padding:16,background:r.primaryLight,borderRadius:12,border:`1px solid ${r.border}`},children:[n,a&&d.jsx("div",{style:{marginTop:10,fontSize:12,color:r.textMuted,textAlign:"center",fontStyle:"italic",lineHeight:1.4},children:a})]})}function Gb(){const{theme:n}=ve(),a=[{label:"X-Ray Tube",icon:"",sub:"Produces x-rays"},{label:"Filters",icon:"",sub:"Clean & aim beam"},{label:"Patient",icon:"",sub:"Creates shadow"},{label:"Receptor",icon:"",sub:"II or flat panel"},{label:"Processing",icon:"",sub:"Signal  image"},{label:"Display",icon:"",sub:"Monitor"},{label:"Your Eyes",icon:"",sub:"Final link"}];return d.jsx(Ye,{caption:"The fluoroscopy imaging chain  every topic maps to one of these links",children:d.jsx("div",{style:{overflowX:"auto",paddingBottom:4},children:d.jsx("div",{style:{display:"flex",alignItems:"center",minWidth:600,gap:0,justifyContent:"center"},children:a.map((r,o)=>d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsxs("div",{style:{background:n.surface,border:`2px solid ${n.primary}`,borderRadius:10,padding:"8px 10px",textAlign:"center",minWidth:70},children:[d.jsx("div",{style:{fontSize:20},children:r.icon}),d.jsx("div",{style:{fontSize:11,fontWeight:700,color:n.text,marginTop:2},children:r.label}),d.jsx("div",{style:{fontSize:9,color:n.textMuted,marginTop:1},children:r.sub})]}),o<a.length-1&&d.jsx("svg",{width:"20",height:"20",style:{flexShrink:0},children:d.jsx("polygon",{points:"4,6 16,10 4,14",fill:n.primary})})]},o))})})})}function Vb(){const{theme:n}=ve(),a=n.primary,r=n.text,o=n.textMuted;return d.jsx(Ye,{caption:"X-ray tube  electrons from heated cathode strike the spinning anode, producing x-rays",children:d.jsxs("svg",{viewBox:"0 0 400 200",width:"100%",style:{maxWidth:440},children:[d.jsx("rect",{x:"30",y:"30",width:"340",height:"140",rx:"20",fill:"none",stroke:o,strokeWidth:"2",strokeDasharray:"6,4"}),d.jsx("text",{x:"200",y:"22",textAnchor:"middle",fontSize:"11",fill:o,fontWeight:"600",children:"Vacuum Tube Housing"}),d.jsx("rect",{x:"60",y:"70",width:"60",height:"60",rx:"6",fill:a+"22",stroke:a,strokeWidth:"2"}),d.jsx("text",{x:"90",y:"95",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"Cathode"}),d.jsx("text",{x:"90",y:"110",textAnchor:"middle",fontSize:"9",fill:o,children:"Filament"}),d.jsx("text",{x:"90",y:"122",textAnchor:"middle",fontSize:"8",fill:o,children:"(tungsten)"}),d.jsx("line",{x1:"120",y1:"100",x2:"250",y2:"100",stroke:n.warning,strokeWidth:"3",strokeDasharray:"8,4"}),d.jsx("polygon",{points:"250,94 264,100 250,106",fill:n.warning}),d.jsx("text",{x:"185",y:"90",textAnchor:"middle",fontSize:"9",fill:n.warning,fontWeight:"600",children:"Electrons "}),d.jsx("circle",{cx:"290",cy:"100",r:"40",fill:a+"15",stroke:a,strokeWidth:"2"}),d.jsx("text",{x:"290",y:"96",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"Anode"}),d.jsx("text",{x:"290",y:"110",textAnchor:"middle",fontSize:"9",fill:o,children:"Spinning disc"}),d.jsx("line",{x1:"310",y1:"68",x2:"340",y2:"40",stroke:n.error,strokeWidth:"2"}),d.jsx("line",{x1:"325",y1:"80",x2:"360",y2:"60",stroke:n.error,strokeWidth:"2"}),d.jsx("line",{x1:"330",y1:"100",x2:"370",y2:"100",stroke:n.error,strokeWidth:"2"}),d.jsx("text",{x:"370",y:"48",fontSize:"10",fill:n.error,fontWeight:"700",children:"X-rays"}),d.jsx("text",{x:"90",y:"155",textAnchor:"middle",fontSize:"9",fill:o,children:" (negative)"}),d.jsx("text",{x:"290",y:"155",textAnchor:"middle",fontSize:"9",fill:o,children:"+ (positive)"}),d.jsx("text",{x:"290",y:"170",textAnchor:"middle",fontSize:"8",fill:n.error,children:"~99% heat, ~1% x-rays"})]})})}function $b(){const{theme:n}=ve(),a=n.primary,r=n.text,o=n.textMuted;return d.jsx(Ye,{caption:"Image intensifier  converts faint x-ray shadow into bright visible image (5,000-20,000 amplification)",children:d.jsxs("svg",{viewBox:"0 0 420 220",width:"100%",style:{maxWidth:460},children:[d.jsx("path",{d:"M 40,20 L 100,10 L 320,10 L 380,60 L 380,160 L 320,210 L 100,210 L 40,200 Z",fill:n.primaryLight,stroke:a,strokeWidth:"2"}),d.jsx("rect",{x:"44",y:"30",width:"20",height:"160",rx:"4",fill:n.success+"33",stroke:n.success,strokeWidth:"1.5"}),d.jsx("text",{x:"54",y:"115",textAnchor:"middle",fontSize:"8",fill:n.success,fontWeight:"700",transform:"rotate(-90 54 115)",children:"Input Phosphor (CsI)"}),d.jsx("rect",{x:"68",y:"35",width:"10",height:"150",rx:"2",fill:n.warning+"44",stroke:n.warning,strokeWidth:"1"}),d.jsx("ellipse",{cx:"185",cy:"110",rx:"20",ry:"55",fill:"none",stroke:o,strokeWidth:"1.5",strokeDasharray:"4,3"}),d.jsx("ellipse",{cx:"230",cy:"110",rx:"16",ry:"45",fill:"none",stroke:o,strokeWidth:"1.5",strokeDasharray:"4,3"}),d.jsx("ellipse",{cx:"270",cy:"110",rx:"12",ry:"35",fill:"none",stroke:o,strokeWidth:"1.5",strokeDasharray:"4,3"}),d.jsx("text",{x:"225",y:"60",textAnchor:"middle",fontSize:"9",fill:o,children:"Electrostatic Lenses"}),d.jsx("text",{x:"225",y:"72",textAnchor:"middle",fontSize:"8",fill:o,children:"(25,000 V)"}),d.jsx("line",{x1:"82",y1:"50",x2:"340",y2:"95",stroke:n.warning,strokeWidth:"1",strokeDasharray:"4,3",opacity:"0.6"}),d.jsx("line",{x1:"82",y1:"110",x2:"340",y2:"110",stroke:n.warning,strokeWidth:"1",strokeDasharray:"4,3",opacity:"0.6"}),d.jsx("line",{x1:"82",y1:"170",x2:"340",y2:"125",stroke:n.warning,strokeWidth:"1",strokeDasharray:"4,3",opacity:"0.6"}),d.jsx("rect",{x:"340",y:"85",width:"20",height:"50",rx:"4",fill:n.success+"44",stroke:n.success,strokeWidth:"1.5"}),d.jsx("text",{x:"350",y:"115",textAnchor:"middle",fontSize:"7",fill:n.success,fontWeight:"600",transform:"rotate(-90 350 115)",children:"Output (P20)"}),d.jsx("text",{x:"54",y:"212",textAnchor:"middle",fontSize:"8",fill:r,fontWeight:"600",children:'9" wide'}),d.jsx("text",{x:"350",y:"145",textAnchor:"middle",fontSize:"8",fill:r,fontWeight:"600",children:'~1" wide'}),d.jsx("line",{x1:"10",y1:"80",x2:"38",y2:"80",stroke:n.error,strokeWidth:"2",markerEnd:"none"}),d.jsx("line",{x1:"10",y1:"110",x2:"38",y2:"110",stroke:n.error,strokeWidth:"2"}),d.jsx("line",{x1:"10",y1:"140",x2:"38",y2:"140",stroke:n.error,strokeWidth:"2"}),d.jsx("polygon",{points:"38,76 44,80 38,84",fill:n.error}),d.jsx("polygon",{points:"38,106 44,110 38,114",fill:n.error}),d.jsx("polygon",{points:"38,136 44,140 38,144",fill:n.error}),d.jsx("text",{x:"10",y:"170",fontSize:"9",fill:n.error,fontWeight:"600",children:"X-rays in"}),d.jsx("line",{x1:"362",y1:"110",x2:"400",y2:"110",stroke:n.success,strokeWidth:"2"}),d.jsx("polygon",{points:"400,106 410,110 400,114",fill:n.success}),d.jsx("text",{x:"380",y:"100",fontSize:"9",fill:n.success,fontWeight:"600",children:"Light out"}),d.jsx("text",{x:"210",y:"195",textAnchor:"middle",fontSize:"10",fill:r,fontWeight:"700",children:"Brightness Gain = Minification  Flux"}),d.jsx("text",{x:"210",y:"208",textAnchor:"middle",fontSize:"9",fill:o,children:"(9/1)  50 = 4,050 typical"})]})})}function Fb(){const{theme:n}=ve(),a=n.primary,r=n.text,o=n.textMuted;return d.jsx(Ye,{caption:"Flat panel detector  fewer conversion steps than II, no geometric distortion",children:d.jsxs("svg",{viewBox:"0 0 380 220",width:"100%",style:{maxWidth:400},children:[d.jsx("line",{x1:"120",y1:"10",x2:"120",y2:"45",stroke:n.error,strokeWidth:"2"}),d.jsx("line",{x1:"190",y1:"10",x2:"190",y2:"45",stroke:n.error,strokeWidth:"2"}),d.jsx("line",{x1:"260",y1:"10",x2:"260",y2:"45",stroke:n.error,strokeWidth:"2"}),d.jsx("polygon",{points:"116,42 120,52 124,42",fill:n.error}),d.jsx("polygon",{points:"186,42 190,52 192,42",fill:n.error}),d.jsx("polygon",{points:"256,42 260,52 264,42",fill:n.error}),d.jsx("text",{x:"190",y:"18",textAnchor:"middle",fontSize:"10",fill:n.error,fontWeight:"600",children:"X-rays "}),d.jsx("rect",{x:"60",y:"52",width:"260",height:"35",rx:"4",fill:n.success+"25",stroke:n.success,strokeWidth:"2"}),d.jsx("text",{x:"190",y:"72",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"Scintillator (CsI)"}),d.jsx("text",{x:"190",y:"84",textAnchor:"middle",fontSize:"8",fill:o,children:"X-ray  Light"}),d.jsx("line",{x1:"190",y1:"87",x2:"190",y2:"100",stroke:n.success,strokeWidth:"2"}),d.jsx("polygon",{points:"186,98 190,106 194,98",fill:n.success}),d.jsx("rect",{x:"60",y:"106",width:"260",height:"35",rx:"4",fill:n.warning+"25",stroke:n.warning,strokeWidth:"2"}),d.jsx("text",{x:"190",y:"126",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"Photodiode Array (a-Si)"}),d.jsx("text",{x:"190",y:"138",textAnchor:"middle",fontSize:"8",fill:o,children:"Light  Electrical charge"}),d.jsx("line",{x1:"190",y1:"141",x2:"190",y2:"154",stroke:n.warning,strokeWidth:"2"}),d.jsx("polygon",{points:"186,152 190,160 194,152",fill:n.warning}),d.jsx("rect",{x:"60",y:"160",width:"260",height:"35",rx:"4",fill:a+"25",stroke:a,strokeWidth:"2"}),d.jsx("text",{x:"190",y:"180",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"TFT Switches (readout)"}),d.jsx("text",{x:"190",y:"192",textAnchor:"middle",fontSize:"8",fill:o,children:"Charge  Digital signal"}),d.jsx("line",{x1:"190",y1:"195",x2:"190",y2:"210",stroke:a,strokeWidth:"2"}),d.jsx("polygon",{points:"186,208 190,216 194,208",fill:a}),d.jsx("text",{x:"190",y:"218",textAnchor:"middle",fontSize:"9",fill:a,fontWeight:"600",dominantBaseline:"hanging",children:" Digital Image"}),d.jsx("text",{x:"345",y:"130",fontSize:"9",fill:o,fontWeight:"500",children:"DEL size:"}),d.jsx("text",{x:"345",y:"143",fontSize:"9",fill:o,children:"2001,400 m"})]})})}function Pb(){const{theme:n}=ve(),a=n.primary,r=n.text,o=n.textMuted;return d.jsx(Ye,{caption:"C-arm configuration  tube below (less operator scatter), receptor above (close to patient)",children:d.jsxs("svg",{viewBox:"0 0 320 260",width:"100%",style:{maxWidth:340},children:[d.jsx("path",{d:"M 90,220 Q 30,120 90,30 L 230,30 Q 290,120 230,220",fill:"none",stroke:o,strokeWidth:"4"}),d.jsx("rect",{x:"110",y:"205",width:"100",height:"35",rx:"6",fill:n.error+"22",stroke:n.error,strokeWidth:"2"}),d.jsx("text",{x:"160",y:"225",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"X-Ray Tube"}),d.jsx("text",{x:"160",y:"250",textAnchor:"middle",fontSize:"9",fill:n.error,children:" Below table"}),d.jsx("rect",{x:"110",y:"20",width:"100",height:"30",rx:"6",fill:n.success+"22",stroke:n.success,strokeWidth:"2"}),d.jsx("text",{x:"160",y:"40",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"Receptor"}),d.jsx("text",{x:"160",y:"14",textAnchor:"middle",fontSize:"9",fill:n.success,children:"II or FPD "}),d.jsx("rect",{x:"80",y:"115",width:"160",height:"12",rx:"2",fill:o+"44",stroke:o,strokeWidth:"1"}),d.jsx("text",{x:"260",y:"125",fontSize:"9",fill:o,children:"Table"}),d.jsx("ellipse",{cx:"160",cy:"100",rx:"40",ry:"20",fill:a+"22",stroke:a,strokeWidth:"1.5"}),d.jsx("text",{x:"160",y:"104",textAnchor:"middle",fontSize:"10",fill:r,fontWeight:"600",children:"Patient"}),d.jsx("line",{x1:"140",y1:"205",x2:"120",y2:"130",stroke:n.error,strokeWidth:"1",strokeDasharray:"4,3",opacity:"0.5"}),d.jsx("line",{x1:"160",y1:"205",x2:"160",y2:"130",stroke:n.error,strokeWidth:"1",strokeDasharray:"4,3",opacity:"0.5"}),d.jsx("line",{x1:"180",y1:"205",x2:"200",y2:"130",stroke:n.error,strokeWidth:"1",strokeDasharray:"4,3",opacity:"0.5"}),d.jsx("line",{x1:"120",y1:"95",x2:"60",y2:"70",stroke:n.warning,strokeWidth:"1.5",strokeDasharray:"3,3"}),d.jsx("line",{x1:"120",y1:"100",x2:"55",y2:"110",stroke:n.warning,strokeWidth:"1.5",strokeDasharray:"3,3"}),d.jsx("line",{x1:"120",y1:"105",x2:"60",y2:"140",stroke:n.warning,strokeWidth:"1.5",strokeDasharray:"3,3"}),d.jsx("text",{x:"30",y:"105",fontSize:"8",fill:n.warning,fontWeight:"600",children:"Scatter"}),d.jsx("text",{x:"280",y:"175",fontSize:"9",fill:o,fontWeight:"500",children:"Min SSD:"}),d.jsx("text",{x:"280",y:"188",fontSize:"9",fill:r,fontWeight:"700",children:'Fixed: 18"'}),d.jsx("text",{x:"280",y:"201",fontSize:"9",fill:r,fontWeight:"700",children:'Mobile: 12"'})]})})}function Qb(){const{theme:n}=ve(),a=n.primary,r=n.text,o=n.textMuted;return d.jsx(Ye,{caption:"The three pillars of radiation protection  ALARA in practice",children:d.jsxs("svg",{viewBox:"0 0 320 220",width:"100%",style:{maxWidth:340},children:[d.jsx("polygon",{points:"160,20 40,190 280,190",fill:a+"10",stroke:a,strokeWidth:"2"}),d.jsx("text",{x:"160",y:"130",textAnchor:"middle",fontSize:"14",fill:a,fontWeight:"800",children:"ALARA"}),d.jsx("text",{x:"160",y:"148",textAnchor:"middle",fontSize:"9",fill:o,children:"As Low As Reasonably"}),d.jsx("text",{x:"160",y:"160",textAnchor:"middle",fontSize:"9",fill:o,children:"Achievable"}),d.jsx("circle",{cx:"160",cy:"20",r:"16",fill:n.error+"22",stroke:n.error,strokeWidth:"2"}),d.jsx("text",{x:"160",y:"25",textAnchor:"middle",fontSize:"10",fill:n.error,fontWeight:"700",children:""}),d.jsx("text",{x:"160",y:"10",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",dominantBaseline:"auto",children:"TIME"}),d.jsx("text",{x:"215",y:"55",fontSize:"8",fill:o,children:"Minimize"}),d.jsx("text",{x:"215",y:"65",fontSize:"8",fill:o,children:"beam-on time"}),d.jsx("circle",{cx:"40",cy:"190",r:"16",fill:n.success+"22",stroke:n.success,strokeWidth:"2"}),d.jsx("text",{x:"40",y:"195",textAnchor:"middle",fontSize:"10",fill:n.success,fontWeight:"700",children:""}),d.jsx("text",{x:"40",y:"215",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"DISTANCE"}),d.jsx("text",{x:"28",y:"170",fontSize:"8",fill:o,textAnchor:"end",children:"Inverse square"}),d.jsx("text",{x:"28",y:"180",fontSize:"8",fill:o,textAnchor:"end",children:"law: 2 dist =  dose"}),d.jsx("circle",{cx:"280",cy:"190",r:"16",fill:n.warning+"22",stroke:n.warning,strokeWidth:"2"}),d.jsx("text",{x:"280",y:"195",textAnchor:"middle",fontSize:"10",fill:n.warning,fontWeight:"700",children:""}),d.jsx("text",{x:"280",y:"215",textAnchor:"middle",fontSize:"11",fill:r,fontWeight:"700",children:"SHIELDING"}),d.jsx("text",{x:"295",y:"170",fontSize:"8",fill:o,children:"Lead aprons,"}),d.jsx("text",{x:"295",y:"180",fontSize:"8",fill:o,children:"thyroid shields"})]})})}function Yb(){const{theme:n}=ve(),a=n.textMuted,r=n.text;return d.jsx(Ye,{caption:"The patient is your primary radiation source  scatter radiates in all directions",children:d.jsxs("svg",{viewBox:"0 0 360 200",width:"100%",style:{maxWidth:380},children:[d.jsx("circle",{cx:"180",cy:"100",r:"30",fill:n.primary+"22",stroke:n.primary,strokeWidth:"2"}),d.jsx("text",{x:"180",y:"98",textAnchor:"middle",fontSize:"10",fill:r,fontWeight:"600",children:"Patient"}),d.jsx("text",{x:"180",y:"110",textAnchor:"middle",fontSize:"8",fill:a,children:"(scatter source)"}),[0,30,60,90,120,150,180,210,240,270,300,330].map(o=>{const u=o*Math.PI/180,h=180+Math.cos(u)*35,f=100+Math.sin(u)*35,g=180+Math.cos(u)*65,y=100+Math.sin(u)*65;return d.jsx("line",{x1:h,y1:f,x2:g,y2:y,stroke:n.warning,strokeWidth:"1.5",strokeDasharray:"3,3",opacity:"0.6"},o)}),d.jsx("circle",{cx:"180",cy:"100",r:"55",fill:"none",stroke:n.error+"44",strokeWidth:"1",strokeDasharray:"4,3"}),d.jsx("text",{x:"244",y:"62",fontSize:"8",fill:n.error,fontWeight:"600",children:"1 ft: 500 mrad/hr"}),d.jsx("circle",{cx:"180",cy:"100",r:"80",fill:"none",stroke:n.warning+"44",strokeWidth:"1",strokeDasharray:"4,3"}),d.jsx("text",{x:"270",y:"42",fontSize:"8",fill:n.warning,fontWeight:"600",children:"3 ft: ~55 mrad/hr"}),d.jsx("circle",{cx:"310",cy:"100",r:"14",fill:n.success+"22",stroke:n.success,strokeWidth:"1.5"}),d.jsx("text",{x:"310",y:"104",textAnchor:"middle",fontSize:"10",children:""}),d.jsx("text",{x:"310",y:"125",textAnchor:"middle",fontSize:"8",fill:n.success,fontWeight:"600",children:"Operator"}),d.jsx("text",{x:"310",y:"136",textAnchor:"middle",fontSize:"8",fill:a,children:"Stand back!"})]})})}function Kb(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{emoji:"",label:"Lead Glasses",detail:"0.25 mm Pb",eff:"8590% reduction",y:0},{emoji:"",label:"Thyroid Shield",detail:"0.5 mm Pb",eff:"Protects thyroid",y:1},{emoji:"",label:"Lead Apron",detail:"0.250.5 mm Pb",eff:"9799.9% reduction",y:2},{emoji:"",label:"Lead Gloves",detail:"0.25 mm Pb",eff:"Hand protection",y:3}];return d.jsx(Ye,{caption:"Personal protective equipment  your radiation armor",children:d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8},children:o.map((u,h)=>d.jsxs("div",{style:{background:n.surface,borderRadius:10,padding:"10px 12px",border:`1px solid ${n.border}`,display:"flex",alignItems:"center",gap:10},children:[d.jsx("span",{style:{fontSize:28,flexShrink:0},children:u.emoji}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:13,fontWeight:700,color:a},children:u.label}),d.jsx("div",{style:{fontSize:11,color:n.primary,fontWeight:600},children:u.detail}),d.jsx("div",{style:{fontSize:10,color:r},children:u.eff})]})]},h))})})}function Xb(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{label:"Whole Body",val:5,unit:"rem/yr",color:n.error,w:10},{label:"Eye Lens",val:15,unit:"rem/yr",color:n.warning,w:30},{label:"Skin/Extremities",val:50,unit:"rem/yr",color:n.success,w:100}];return d.jsx(Ye,{caption:"Annual occupational dose limits  the 5-15-50 pattern",children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12,maxWidth:360},children:[o.map((u,h)=>d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[d.jsx("span",{style:{fontSize:13,fontWeight:600,color:a},children:u.label}),d.jsxs("span",{style:{fontSize:13,fontWeight:800,color:u.color},children:[u.val," ",u.unit]})]}),d.jsx("div",{style:{height:20,background:n.border,borderRadius:6,overflow:"hidden"},children:d.jsx("div",{style:{width:`${u.w}%`,height:"100%",background:u.color,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsxs("span",{style:{fontSize:10,color:"#FFF",fontWeight:700},children:[u.val*10," mSv"]})})})]},h)),d.jsx("div",{style:{marginTop:4,padding:"8px 12px",background:n.surface,borderRadius:8,border:`1px solid ${n.border}`},children:d.jsxs("div",{style:{fontSize:11,color:r,textAlign:"center"},children:[d.jsx("strong",{style:{color:a},children:"Under 18:"})," 10% of all limits |",d.jsx("strong",{style:{color:a},children:"Lifetime:"})," 1 rem  age"]})})]})})}function Jb(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{label:"Standard (no ABC)",max:"5 R/min",color:n.success,pct:25},{label:"With ABC",max:"10 R/min",color:n.warning,pct:50},{label:"High-Level / Boost",max:"20 R/min",color:n.error,pct:100}];return d.jsx(Ye,{caption:"Equipment dose rate limits at the tabletop  the 5-10-20 pattern",children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:o.map((u,h)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 12px",borderRadius:10,background:n.surface,border:`1px solid ${u.color}33`},children:[d.jsx("div",{style:{width:40,height:40,borderRadius:"50%",background:u.color+"22",display:"flex",alignItems:"center",justifyContent:"center",border:`2px solid ${u.color}`,flexShrink:0},children:d.jsx("span",{style:{fontSize:16,fontWeight:800,color:u.color},children:h+1})}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontSize:13,fontWeight:600,color:a},children:u.label}),d.jsxs("div",{style:{fontSize:12,color:r,marginTop:2},children:["Max: ",d.jsx("strong",{style:{color:u.color},children:u.max})]})]})]},h))})})}function Zb(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{icon:"",label:"Radiation Photon",sub:"enters body"},{icon:"",label:"Ionization",sub:"electrons knocked off"},{icon:"",label:"Free Radicals",sub:"from water molecules"},{icon:"",label:"DNA Damage",sub:"strand breaks"},{icon:"",label:"Cell Response",sub:"repair attempted"}];return d.jsx(Ye,{caption:"The chain of radiation damage  from photon to biological effect",children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:4,alignItems:"center"},children:[o.map((u,h)=>d.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,background:n.surface,borderRadius:10,padding:"8px 16px",border:`1px solid ${n.border}`,minWidth:220},children:[d.jsx("span",{style:{fontSize:22},children:u.icon}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:13,fontWeight:700,color:a},children:u.label}),d.jsx("div",{style:{fontSize:11,color:r},children:u.sub})]})]}),h<o.length-1&&d.jsx("svg",{width:"20",height:"16",children:d.jsx("polygon",{points:"6,2 14,2 10,14",fill:n.primary})})]},h)),d.jsxs("div",{style:{display:"flex",gap:16,marginTop:8},children:[d.jsxs("div",{style:{background:n.successBg,borderRadius:10,padding:"8px 14px",textAlign:"center",border:`2px solid ${n.success}`},children:[d.jsx("div",{style:{fontSize:12,fontWeight:700,color:n.success},children:" Repair succeeds"}),d.jsx("div",{style:{fontSize:10,color:r},children:"No harm"})]}),d.jsxs("div",{style:{background:n.errorBg,borderRadius:10,padding:"8px 14px",textAlign:"center",border:`2px solid ${n.error}`},children:[d.jsx("div",{style:{fontSize:12,fontWeight:700,color:n.error},children:" Repair fails"}),d.jsx("div",{style:{fontSize:10,color:r},children:"Cell death or mutation"})]})]})]})})}function ew(){const{theme:n}=ve(),a=n.text,r=n.textMuted;return d.jsx(Ye,{caption:"Two types of radiation effects  threshold vs. no-threshold",children:d.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[d.jsxs("div",{style:{flex:"1 1 140px",background:n.surface,borderRadius:12,padding:14,border:`2px solid ${n.error}`},children:[d.jsx("div",{style:{fontSize:14,fontWeight:800,color:n.error,marginBottom:8},children:"Deterministic"}),d.jsxs("div",{style:{fontSize:12,color:a,lineHeight:1.6},children:[d.jsxs("div",{children:[" Has a ",d.jsx("strong",{children:"threshold"})]}),d.jsxs("div",{children:[" ",d.jsx("strong",{children:"Severity"}),"  with dose"]}),d.jsx("div",{children:" Predictable onset"})]}),d.jsx("div",{style:{marginTop:8,fontSize:11,color:r,background:n.errorBg,borderRadius:6,padding:"6px 8px"},children:"Examples: skin burns, cataracts, hair loss, sterility"})]}),d.jsxs("div",{style:{flex:"1 1 140px",background:n.surface,borderRadius:12,padding:14,border:`2px solid ${n.warning}`},children:[d.jsx("div",{style:{fontSize:14,fontWeight:800,color:n.warning,marginBottom:8},children:"Stochastic"}),d.jsxs("div",{style:{fontSize:12,color:a,lineHeight:1.6},children:[d.jsx("div",{children:" No threshold (LNT)"}),d.jsxs("div",{children:[" ",d.jsx("strong",{children:"Probability"}),"  with dose"]}),d.jsx("div",{children:" Yearsdecades latency"})]}),d.jsx("div",{style:{marginTop:8,fontSize:11,color:r,background:n.warningBg,borderRadius:6,padding:"6px 8px"},children:"Examples: cancer, genetic effects"})]})]})})}function tw(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{dose:"2 Gy",effect:"Early erythema",desc:"Faint redness, fades in days",severity:1},{dose:"3 Gy",effect:"Temporary hair loss",desc:"Regrows in weeks-months",severity:2},{dose:"6 Gy",effect:"Main erythema",desc:"Like a sunburn, edema",severity:3},{dose:"7 Gy",effect:"Permanent hair loss",desc:"Follicles destroyed",severity:4},{dose:"14 Gy",effect:"Dry desquamation",desc:"Skin peels, itchy",severity:5},{dose:"18 Gy",effect:"Moist desquamation",desc:"Blisters, weeps, painful",severity:6},{dose:"24+ Gy",effect:"Ulceration/necrosis",desc:"May need surgery",severity:7}],u=h=>h<=2?n.warning:h<=4?"#E67E22":n.error;return d.jsx(Ye,{caption:"Skin dose thresholds  progressive damage with increasing dose",children:d.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:o.map((h,f)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"6px 10px",borderRadius:8,background:u(h.severity)+"08",borderLeft:`4px solid ${u(h.severity)}`},children:[d.jsx("div",{style:{minWidth:50,fontSize:13,fontWeight:800,color:u(h.severity)},children:h.dose}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontSize:13,fontWeight:600,color:a},children:h.effect}),d.jsx("div",{style:{fontSize:11,color:r},children:h.desc})]}),d.jsx("div",{style:{width:`${h.severity*14}%`,minWidth:20,maxWidth:80,height:6,borderRadius:3,background:u(h.severity)}})]},f))})})}function iw(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{weeks:"02",phase:"Pre-implant",risk:"All or nothing",color:n.warning,desc:"Death or normal"},{weeks:"28",phase:"Organogenesis",risk:"Malformations",color:n.error,desc:"HIGHEST RISK"},{weeks:"815",phase:"Brain dev.",risk:"Intellectual disability",color:n.error,desc:"Critical window"},{weeks:"1525",phase:"Growth",risk:"Reduced risk",color:n.warning,desc:"Declining sensitivity"},{weeks:"25+",phase:"Maturation",risk:"Like newborn",color:n.success,desc:"Stochastic risk only"}];return d.jsx(Ye,{caption:"Fetal radiosensitivity by gestational age  effects depend on timing",children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[o.map((u,h)=>d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 12px",borderRadius:10,background:u.color+"10",border:`1px solid ${u.color}33`},children:[d.jsxs("div",{style:{minWidth:48,padding:"4px 8px",borderRadius:6,background:u.color+"22",textAlign:"center"},children:[d.jsx("div",{style:{fontSize:12,fontWeight:800,color:u.color},children:u.weeks}),d.jsx("div",{style:{fontSize:8,color:r},children:"weeks"})]}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontSize:13,fontWeight:600,color:a},children:u.phase}),d.jsx("div",{style:{fontSize:11,color:u.color,fontWeight:600},children:u.risk})]}),d.jsx("div",{style:{fontSize:9,color:u.desc==="HIGHEST RISK"?"#FFF":r,background:u.desc==="HIGHEST RISK"?n.error:"transparent",padding:u.desc==="HIGHEST RISK"?"3px 8px":0,borderRadius:6,fontWeight:u.desc==="HIGHEST RISK"?700:400},children:u.desc})]},h)),d.jsxs("div",{style:{marginTop:4,fontSize:11,color:r,textAlign:"center",padding:"6px 10px",background:n.surface,borderRadius:8,border:`1px solid ${n.border}`},children:[d.jsx("strong",{style:{color:a},children:"Fetal limit:"})," 0.5 rem total pregnancy | 0.05 rem/month after declaration"]})]})})}function aw(){const{theme:n}=ve(),a=n.text,r=n.textMuted;return d.jsx(Ye,{caption:"Digital Subtraction Angiography  background removal reveals vessels",children:d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"center",flexWrap:"wrap"},children:[d.jsxs("div",{style:{width:90,height:90,borderRadius:10,background:n.surface,border:`2px solid ${n.border}`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[d.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",children:[d.jsx("rect",{x:"10",y:"15",width:"40",height:"30",rx:"4",fill:r+"44"}),d.jsx("circle",{cx:"30",cy:"30",r:"8",fill:r+"22",stroke:r,strokeWidth:"1"})]}),d.jsx("div",{style:{fontSize:10,fontWeight:600,color:a},children:"Mask"}),d.jsx("div",{style:{fontSize:8,color:r},children:"before contrast"})]}),d.jsx("div",{style:{fontSize:24,fontWeight:800,color:n.error},children:""}),d.jsxs("div",{style:{width:90,height:90,borderRadius:10,background:n.surface,border:`2px solid ${n.border}`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",children:[d.jsx("rect",{x:"10",y:"15",width:"40",height:"30",rx:"4",fill:r+"44"}),d.jsx("circle",{cx:"30",cy:"30",r:"8",fill:r+"22",stroke:r,strokeWidth:"1"}),d.jsx("path",{d:"M 15,50 Q 25,20 35,35 Q 45,50 50,15",fill:"none",stroke:n.error,strokeWidth:"2.5"})]}),d.jsx("div",{style:{fontSize:10,fontWeight:600,color:a},children:"Live"}),d.jsx("div",{style:{fontSize:8,color:r},children:"with contrast"})]}),d.jsx("div",{style:{fontSize:24,fontWeight:800,color:n.success},children:"="}),d.jsxs("div",{style:{width:90,height:90,borderRadius:10,background:n.surface,border:`2px solid ${n.success}`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[d.jsx("svg",{width:"60",height:"60",viewBox:"0 0 60 60",children:d.jsx("path",{d:"M 15,50 Q 25,20 35,35 Q 45,50 50,15",fill:"none",stroke:n.error,strokeWidth:"3"})}),d.jsx("div",{style:{fontSize:10,fontWeight:600,color:n.success},children:"Vessels only!"}),d.jsx("div",{style:{fontSize:8,color:r},children:"background gone"})]})]})})}function nw(){const{theme:n}=ve(),a=n.text,r=n.textMuted;return d.jsx(Ye,{caption:"Digital images are grids of numbers  more bits = more gray shades",children:d.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",justifyContent:"center",alignItems:"flex-start"},children:[d.jsx("svg",{viewBox:"0 0 120 120",width:"110",height:"110",children:[0,1,2,3,4,5,6,7].map(o=>[0,1,2,3,4,5,6,7].map(u=>{const h=Math.floor(Math.random()*200+55);return d.jsx("rect",{x:u*15,y:o*15,width:"14",height:"14",rx:"1",fill:`rgb(${h},${h},${h})`},`${o}-${u}`)}))}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:12,fontWeight:700,color:a,marginBottom:6},children:"Bit Depth  Gray Levels"}),[{bits:"8-bit",levels:"256"},{bits:"10-bit",levels:"1,024"},{bits:"12-bit",levels:"4,096"},{bits:"14-bit",levels:"16,384"}].map((o,u)=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20,fontSize:12,color:a,padding:"3px 0",borderBottom:u<3?`1px solid ${n.border}`:"none"},children:[d.jsx("span",{style:{fontWeight:600,color:n.primary},children:o.bits}),d.jsxs("span",{children:[o.levels," shades"]})]},u)),d.jsx("div",{style:{fontSize:10,color:r,marginTop:6},children:"Modern fluoro: 1214 bits"})]})]})})}function sw(){const{theme:n}=ve(),a=n.text,r=n.textMuted,o=[{freq:"Daily",color:n.success,tests:["Visual image check","Monitor brightness","Timer & dead-man switch"]},{freq:"Weekly",color:n.warning,tests:["ABC with phantom","Image quality phantom","Artifact check"]},{freq:"Annually",color:n.error,tests:["Full dose measurements","Resolution, HVL, uniformity","Collimation accuracy","Lead apron inspection"]}];return d.jsx(Ye,{caption:"QA testing schedule  catch problems before they cause harm",children:d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.map((u,h)=>d.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-start",padding:"10px 12px",borderRadius:10,background:u.color+"08",borderLeft:`4px solid ${u.color}`},children:[d.jsx("div",{style:{minWidth:60,padding:"4px 10px",borderRadius:6,background:u.color+"22",textAlign:"center",fontSize:12,fontWeight:800,color:u.color},children:u.freq}),d.jsx("div",{style:{flex:1},children:u.tests.map((f,g)=>d.jsxs("div",{style:{fontSize:12,color:a,lineHeight:1.6},children:[" ",f]},g))})]},h)),d.jsx("div",{style:{fontSize:11,color:r,textAlign:"center",marginTop:4},children:"Records: QA  3 years | Film processor  1 year | Dosimetry: duration of license"})]})})}function rw(){const{theme:n}=ve(),a=n.text,r=n.textMuted;return d.jsx(Ye,{caption:"Magnification mode  better resolution but higher dose",children:d.jsxs("div",{style:{display:"flex",gap:16,justifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:[d.jsxs("div",{style:{textAlign:"center"},children:[d.jsxs("svg",{viewBox:"0 0 100 100",width:"90",height:"90",children:[d.jsx("circle",{cx:"50",cy:"50",r:"45",fill:n.primary+"15",stroke:n.primary,strokeWidth:"2"}),d.jsx("text",{x:"50",y:"45",textAnchor:"middle",fontSize:"10",fill:a,fontWeight:"700",children:'9" mode'}),d.jsx("text",{x:"50",y:"60",textAnchor:"middle",fontSize:"8",fill:r,children:"~4 lp/mm"}),d.jsx("text",{x:"50",y:"72",textAnchor:"middle",fontSize:"8",fill:n.success,children:"1 dose"})]}),d.jsx("div",{style:{fontSize:11,fontWeight:600,color:a},children:"Normal"})]}),d.jsx("div",{style:{fontSize:20,color:n.primary},children:""}),d.jsxs("div",{style:{textAlign:"center"},children:[d.jsxs("svg",{viewBox:"0 0 100 100",width:"90",height:"90",children:[d.jsx("circle",{cx:"50",cy:"50",r:"45",fill:n.border+"55",stroke:n.border,strokeWidth:"1",strokeDasharray:"4,3"}),d.jsx("circle",{cx:"50",cy:"50",r:"30",fill:n.warning+"15",stroke:n.warning,strokeWidth:"2"}),d.jsx("text",{x:"50",y:"45",textAnchor:"middle",fontSize:"10",fill:a,fontWeight:"700",children:'6" mode'}),d.jsx("text",{x:"50",y:"60",textAnchor:"middle",fontSize:"8",fill:r,children:"~6 lp/mm"}),d.jsx("text",{x:"50",y:"72",textAnchor:"middle",fontSize:"8",fill:n.error,children:"2.25 dose"})]}),d.jsx("div",{style:{fontSize:11,fontWeight:600,color:a},children:"Magnified"})]}),d.jsxs("div",{style:{padding:"10px 14px",borderRadius:10,background:n.surface,border:`1px solid ${n.border}`,fontSize:12},children:[d.jsx("div",{style:{color:a,fontWeight:600,marginBottom:4},children:"Dose increase:"}),d.jsx("div",{style:{color:n.primary,fontWeight:700,fontSize:14},children:"(96) = 2.25"}),d.jsx("div",{style:{color:r,fontSize:10,marginTop:4},children:"ABC  mA to compensate"}),d.jsx("div",{style:{color:r,fontSize:10},children:"for dimmer image"})]})]})})}function ow(){const{theme:n}=ve(),a=n.text;return n.textMuted,d.jsx(Ye,{caption:"Inverse square law  doubling distance reduces intensity to 1/4",children:d.jsxs("svg",{viewBox:"0 0 340 140",width:"100%",style:{maxWidth:360},children:[d.jsx("circle",{cx:"30",cy:"70",r:"14",fill:n.error+"33",stroke:n.error,strokeWidth:"2"}),d.jsx("text",{x:"30",y:"74",textAnchor:"middle",fontSize:"8",fill:n.error,fontWeight:"700",children:"Source"}),d.jsx("line",{x1:"44",y1:"60",x2:"320",y2:"20",stroke:n.error,strokeWidth:"1",opacity:"0.3"}),d.jsx("line",{x1:"44",y1:"70",x2:"320",y2:"70",stroke:n.error,strokeWidth:"1",opacity:"0.3"}),d.jsx("line",{x1:"44",y1:"80",x2:"320",y2:"120",stroke:n.error,strokeWidth:"1",opacity:"0.3"}),d.jsx("line",{x1:"110",y1:"48",x2:"110",y2:"92",stroke:n.primary,strokeWidth:"2"}),d.jsx("text",{x:"110",y:"108",textAnchor:"middle",fontSize:"10",fill:a,fontWeight:"700",children:"1 ft"}),d.jsx("text",{x:"110",y:"120",textAnchor:"middle",fontSize:"10",fill:n.error,fontWeight:"700",children:"100%"}),d.jsx("line",{x1:"190",y1:"36",x2:"190",y2:"104",stroke:n.warning,strokeWidth:"2"}),d.jsx("text",{x:"190",y:"108",textAnchor:"middle",fontSize:"10",fill:a,fontWeight:"700",children:"2 ft"}),d.jsx("text",{x:"190",y:"120",textAnchor:"middle",fontSize:"10",fill:n.warning,fontWeight:"700",children:"25%"}),d.jsx("line",{x1:"270",y1:"24",x2:"270",y2:"116",stroke:n.success,strokeWidth:"2"}),d.jsx("text",{x:"270",y:"108",textAnchor:"middle",fontSize:"10",fill:a,fontWeight:"700",children:"3 ft"}),d.jsx("text",{x:"270",y:"120",textAnchor:"middle",fontSize:"10",fill:n.success,fontWeight:"700",children:"11%"}),d.jsx("text",{x:"190",y:"138",textAnchor:"middle",fontSize:"11",fill:n.primary,fontWeight:"700",children:"I = I / d"})]})})}function lw(){const{theme:n}=ve(),a=n.text,r=n.textMuted;return d.jsx(Ye,{caption:"X-ray interactions with tissue  photoelectric creates contrast, Compton creates fog",children:d.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",justifyContent:"center"},children:[d.jsxs("div",{style:{flex:"1 1 140px",background:n.surface,borderRadius:12,padding:14,border:`2px solid ${n.success}`,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,marginBottom:4},children:""}),d.jsx("div",{style:{fontSize:13,fontWeight:800,color:n.success},children:"Photoelectric"}),d.jsxs("div",{style:{fontSize:11,color:a,marginTop:6,lineHeight:1.5},children:["X-ray ",d.jsx("strong",{children:"absorbed"})," completely"]}),d.jsx("div",{style:{fontSize:11,color:r,marginTop:4,lineHeight:1.4},children:"Dominant: low kVp, high-Z tissue (bone)"}),d.jsx("div",{style:{marginTop:8,fontSize:11,color:"#FFF",fontWeight:700,background:n.success,borderRadius:6,padding:"4px 8px"},children:"Creates CONTRAST "})]}),d.jsxs("div",{style:{flex:"1 1 140px",background:n.surface,borderRadius:12,padding:14,border:`2px solid ${n.error}`,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,marginBottom:4},children:""}),d.jsx("div",{style:{fontSize:13,fontWeight:800,color:n.error},children:"Compton Scatter"}),d.jsxs("div",{style:{fontSize:11,color:a,marginTop:6,lineHeight:1.5},children:["X-ray ",d.jsx("strong",{children:"bounces off"})," electron"]}),d.jsx("div",{style:{fontSize:11,color:r,marginTop:4,lineHeight:1.4},children:"Dominant: higher kVp, soft tissue"}),d.jsx("div",{style:{marginTop:8,fontSize:11,color:"#FFF",fontWeight:700,background:n.error,borderRadius:6,padding:"4px 8px"},children:"Creates FOG "})]})]})})}const cw={"The Big Picture: What Fluoroscopy Actually Is":Gb,"Link 1  The X-Ray Tube: Where It All Starts":Vb,"Link 2  The Beam Meets the Patient":lw,"Link 3A  Catching the Image: The Image Intensifier (II)":$b,"Link 3A (continued)  II Modes, Quirks, and Problems":rw,"Link 3B  Catching the Image: Flat Panel Detectors (FPD)":Fb,"The C-Arm: Putting It All Together":Pb,"Beam Control: Collimation, Filtration, and Distance":ow,"The Digital Image: Pixels, Matrices, and Bit Depth":nw,"Digital Subtraction Angiography (DSA)":aw,"The Big Picture: One Rule Governs Everything":Qb,"The Operator's Exposure: Where It Comes From":Yb,"Protective Equipment: Your Radiation Armor":Kb,"Occupational Dose Limits: The Numbers You Must Know":Xb,"Dose Rate Limits for Equipment":Jb,"The Big Picture: What Radiation Actually Does to Your Body":Zb,"How Cells Respond to Radiation Damage":ew,"Skin Dose Thresholds: What Happens at Each Level":tw,"Fetal Dose: Protecting the Most Vulnerable Patient":iw,"Testing Schedule and Record-Keeping":sw};function uw(n){return cw[n]||null}function dw({onLaunchRsvp:n,navContext:a}){const{theme:r,domainColors:o}=ve(),{state:u,dispatch:h}=bn(),{study:f,studyDispatch:g}=ba(),[y,p]=ue.useState("read"),[b,T]=ue.useState(null),[x,k]=ue.useState(null),[z,H]=ue.useState(null),[q,I]=ue.useState(0),[O,M]=ue.useState(!1),[$,Z]=ue.useState(null);ue.useEffect(()=>{if(!a?.domain)return;const Y=setTimeout(()=>{p("read"),T(a.domain);const Ce=pn[a.domain];if(Ce){const be=f.readSections[a.domain]||[],me=Ce.findIndex((D,W)=>!be.includes(W));k(me>=0?me:0)}},50);return()=>clearTimeout(Y)},[a]),ue.useEffect(()=>{x!==null&&b&&setTimeout(()=>{const Y=document.getElementById(`study-section-${x}`);if(Y){const be=Y.getBoundingClientRect().top+window.pageYOffset+-12;window.scrollTo({top:be,behavior:"smooth"})}},50)},[x,b]);const X=z?va.filter(Y=>Y.domain===z):[...va].sort(()=>.5-Math.random()),Q=Y=>{const Ce=X[q];g({type:"RECORD_ANSWER",domain:Ce.domain,correct:Y,questionIndex:q}),h({type:"ADD_XP",amount:Y?10:3}),h({type:"UPDATE_STREAK"}),M(!1),I(be=>Math.min(be+1,X.length-1))},Oe=d.jsx("div",{style:{display:"flex",gap:8,marginBottom:20},children:[{id:"read",label:"Read"},{id:"quiz",label:"Quiz"},{id:"topics",label:"Topics"}].map(Y=>d.jsx("button",{onClick:()=>p(Y.id),style:{flex:1,padding:"10px 16px",borderRadius:10,border:y===Y.id?`2px solid ${r.primary}`:`1px solid ${r.border}`,background:y===Y.id?r.primaryLight:r.surface,color:y===Y.id?r.primary:r.textMuted,fontWeight:y===Y.id?600:400,fontSize:15,cursor:"pointer",fontFamily:"inherit",minHeight:44},children:Y.label},Y.id))}),Ne=()=>{if(!b)return d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:14,color:r.textMuted,marginBottom:16},children:"Select a domain to read study material."}),et.map(G=>{const ee=pn[G.id]||[],se=(f.readSections[G.id]||[]).length,S=ee.length>0?Math.round(se/ee.length*100):0;return d.jsxs(Me,{accent:o[G.id],onClick:()=>{T(G.id);const L=f.readSections[G.id]||[],V=ee.findIndex((P,re)=>!L.includes(re));k(V>=0?V:null)},style:{marginBottom:10,cursor:"pointer"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[d.jsx("span",{style:{fontSize:22},children:G.icon}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:16,fontWeight:600,color:r.text},children:G.name}),d.jsxs("div",{style:{fontSize:13,color:r.textMuted},children:[se,"/",ee.length," sections read"]})]})]}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[se>0&&d.jsx("span",{style:{fontSize:13,fontWeight:600,color:S===100?r.success:o[G.id]},children:S===100?"":`${S}%`}),d.jsx("span",{style:{color:r.textDim,fontSize:18},children:""})]})]}),se>0&&d.jsx("div",{style:{marginTop:8,height:4,borderRadius:2,background:r.border},children:d.jsx("div",{style:{height:"100%",borderRadius:2,background:S===100?r.success:o[G.id],width:`${S}%`,transition:"width 0.3s"}})})]},G.id)})]});const Y=pn[b]||[],Ce=et.find(G=>G.id===b),be=o[b]||Ce?.color,me=f.readSections[b]||[],D=me.length,W=Y.length>0?Math.round(D/Y.length*100):0;return d.jsxs("div",{children:[d.jsx("button",{onClick:()=>{T(null),k(null)},style:{background:"none",border:"none",color:r.primary,fontSize:15,fontWeight:500,cursor:"pointer",padding:"8px 0",marginBottom:12,fontFamily:"inherit"},children:" Back to Domains"}),d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:8},children:[d.jsx("span",{style:{fontSize:28},children:Ce?.icon}),d.jsxs("div",{style:{flex:1},children:[d.jsx("div",{style:{fontSize:20,fontWeight:700,color:r.text},children:Ce?.name}),d.jsxs("div",{style:{fontSize:13,color:r.textMuted},children:[D,"/",Y.length," sections read"]})]}),d.jsxs("span",{style:{fontSize:15,fontWeight:700,color:W===100?r.success:be},children:[W,"%"]})]}),d.jsx("div",{style:{height:6,borderRadius:3,background:r.border,marginBottom:16},children:d.jsx("div",{style:{height:"100%",borderRadius:3,background:W===100?r.success:be,width:`${W}%`,transition:"width 0.3s"}})}),D>0&&D<Y.length&&(()=>{const G=Y.findIndex((ee,se)=>!me.includes(se));return G<0?null:d.jsxs("button",{onClick:()=>k(G),style:{width:"100%",padding:"10px 16px",borderRadius:10,border:`2px solid ${be}`,background:"transparent",color:be,fontWeight:600,fontSize:14,cursor:"pointer",marginBottom:10,fontFamily:"inherit",minHeight:44},children:[" Continue from ",G+1,": ",Y[G]?.title]})})(),d.jsxs("button",{onClick:()=>{const G=Y.map(ee=>ee.title+`.
`+ee.content).join(`

`);n(G,Ce?.name+"  All Sections")},style:{width:"100%",padding:"12px 16px",borderRadius:10,border:"none",background:be,color:"#FFF",fontWeight:600,fontSize:14,cursor:"pointer",marginBottom:16,fontFamily:"inherit",minHeight:48},children:[" Speed Read All (",Math.ceil(Y.reduce((G,ee)=>G+ee.content.split(/\s+/).length,0)/(u.rsvpWpm||300)*60),"s)"]}),Y.map((G,ee)=>d.jsxs("div",{id:`study-section-${ee}`,style:{marginBottom:8},children:[d.jsx(Me,{accent:be,onClick:()=>{const se=x===ee?null:ee;k(se),se!==null&&g({type:"MARK_SECTION_READ",domain:b,sectionIndex:ee})},padding:"sm",style:{cursor:"pointer",borderRadius:x===ee?"12px 12px 0 0":12,background:x===ee?r.surfaceActive:r.surface},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("span",{style:{fontSize:15,fontWeight:600,color:r.text,lineHeight:1.4},children:[ee+1,". ",G.title]}),d.jsx("span",{style:{color:r.textDim,fontSize:16,flexShrink:0,marginLeft:8},children:x===ee?"":""})]})}),x===ee&&d.jsxs("div",{style:{background:r.bg,borderRadius:"0 0 12px 12px",padding:"16px 16px 20px",borderLeft:`3px solid ${be}`,borderBottom:`1px solid ${be}22`},children:[d.jsxs("button",{onClick:()=>n(G.content,G.title),style:{width:"100%",padding:"10px 16px",borderRadius:8,border:"none",background:be,color:"#FFF",fontWeight:600,fontSize:14,cursor:"pointer",marginBottom:14,fontFamily:"inherit",minHeight:44},children:[" Speed Read (",Math.ceil(G.content.split(/\s+/).length/(u.rsvpWpm||300)*60),"s at ",u.rsvpWpm," WPM)"]}),(()=>{const se=uw(G.title);return se?d.jsx(se,{}):null})(),d.jsx("div",{style:{fontSize:15,color:r.textSecondary,lineHeight:1.7,whiteSpace:"pre-wrap"},children:G.content.split(/(\*\*[^*]+\*\*)/).map((se,S)=>se.startsWith("**")&&se.endsWith("**")?d.jsx("strong",{style:{color:r.text,fontWeight:700},children:se.slice(2,-2)},S):d.jsx("span",{children:se},S))})]})]},ee))]})},bi=()=>{if(!X.length)return d.jsx("div",{style:{color:r.textMuted},children:"No questions available."});const Y=X[q],Ce=et.find(me=>me.id===Y.domain),be=o[Y.domain]||Ce?.color;return d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:16},children:[d.jsx("button",{onClick:()=>{H(null),I(0),M(!1)},style:{padding:"8px 14px",borderRadius:8,border:z?`1px solid ${r.border}`:`2px solid ${r.primary}`,background:z?r.surface:r.primaryLight,color:z?r.textMuted:r.primary,fontSize:13,fontWeight:500,cursor:"pointer",fontFamily:"inherit"},children:"All"}),et.map(me=>d.jsx("button",{onClick:()=>{H(me.id),I(0),M(!1)},style:{padding:"8px 12px",borderRadius:8,border:z===me.id?`2px solid ${o[me.id]}`:`1px solid ${r.border}`,background:z===me.id?o[me.id]+"18":r.surface,fontSize:16,cursor:"pointer",fontFamily:"inherit"},children:me.icon},me.id))]}),d.jsxs(Me,{style:{marginBottom:16},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:14},children:[d.jsxs("span",{style:{background:be+"18",color:be,padding:"4px 12px",borderRadius:20,fontSize:13,fontWeight:500},children:[Ce?.icon," ",Ce?.name]}),d.jsxs("span",{style:{color:r.textDim,fontSize:14},children:[q+1," / ",X.length]})]}),d.jsx("div",{style:{fontSize:18,fontWeight:600,color:r.text,lineHeight:1.5,marginBottom:20},children:Y.q}),O?d.jsxs("div",{children:[d.jsx("div",{style:{background:r.answerBg,borderRadius:10,padding:16,marginBottom:16,borderLeft:`3px solid ${r.answerBorder}`},children:d.jsx("div",{style:{color:r.answerText,fontSize:15,lineHeight:1.7},children:Y.a})}),d.jsxs("div",{style:{display:"flex",gap:12},children:[d.jsx(pi,{variant:"danger",onClick:()=>Q(!1),style:{flex:1},children:" Wrong"}),d.jsx(pi,{variant:"success",onClick:()=>Q(!0),style:{flex:1},children:" Right"})]})]}):d.jsxs("div",{style:{textAlign:"center"},children:[d.jsx("div",{style:{color:r.textDim,fontSize:14,marginBottom:12,fontStyle:"italic"},children:"Try to answer from memory before revealing..."}),d.jsx(pi,{onClick:()=>M(!0),fullWidth:!0,children:"Reveal Answer"})]})]}),Object.keys(f.quizResults).length>0&&d.jsxs(Me,{children:[d.jsx("div",{style:{fontSize:12,fontWeight:600,color:r.textMuted,textTransform:"uppercase",letterSpacing:.5,marginBottom:12},children:"Session Results"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:8},children:Object.entries(f.quizResults).map(([me,D])=>{const W=et.find(se=>se.id===me),G=D.correct+D.wrong,ee=G>0?Math.round(D.correct/G*100):0;return d.jsxs("div",{style:{background:r.bg,borderRadius:8,padding:12},children:[d.jsxs("div",{style:{fontSize:13,color:o[me],fontWeight:600},children:[W?.icon," ",W?.name]}),d.jsxs("div",{style:{fontSize:22,fontWeight:700,color:ee>=80?r.success:ee>=60?r.warning:r.error},children:[ee,"%"]}),d.jsxs("div",{style:{fontSize:13,color:r.textDim},children:[D.correct,"/",G]})]},me)})})]})]})},Ct=()=>d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:14,color:r.textMuted,marginBottom:16},children:"Tap a domain to explore subtopics, key numbers, and start practice."}),et.map(Y=>{const Ce=o[Y.id]||Y.color,be=$===Y.id,me=f.quizResults[Y.id],D=me?me.correct+me.wrong:0,W=D>0?Math.round(me.correct/D*100):0;return d.jsxs("div",{style:{marginBottom:10},children:[d.jsx(Me,{accent:Ce,onClick:()=>Z(be?null:Y.id),style:{cursor:"pointer",borderRadius:be?"12px 12px 0 0":12},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[d.jsx("span",{style:{fontSize:22},children:Y.icon}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:16,fontWeight:600,color:r.text},children:Y.name}),d.jsxs("div",{style:{fontSize:12,color:r.textMuted},children:[Y.weight,"% of exam"]})]})]}),d.jsxs("div",{style:{textAlign:"right"},children:[D>0&&d.jsxs("div",{style:{fontSize:16,fontWeight:700,color:W>=70?r.success:r.warning},children:[W,"%"]}),d.jsx("span",{style:{color:r.textDim,fontSize:16},children:be?"":""})]})]})}),be&&d.jsxs("div",{style:{background:r.bg,borderRadius:"0 0 12px 12px",padding:20,borderLeft:`3px solid ${Ce}`},children:[d.jsx("div",{style:{fontSize:12,fontWeight:600,color:Ce,textTransform:"uppercase",letterSpacing:.5,marginBottom:10},children:"Subtopics"}),Y.subtopics.map((G,ee)=>d.jsxs("div",{style:{color:r.textSecondary,fontSize:14,marginBottom:6,paddingLeft:8,lineHeight:1.5},children:[" ",G]},ee)),d.jsx("div",{style:{fontSize:12,fontWeight:600,color:r.warning,textTransform:"uppercase",letterSpacing:.5,marginTop:16,marginBottom:10},children:"Key Numbers"}),Y.keyNumbers.map((G,ee)=>d.jsxs("div",{style:{color:r.warning,fontSize:14,marginBottom:4,paddingLeft:8,lineHeight:1.5},children:[" ",G]},ee)),d.jsxs("div",{style:{display:"flex",gap:8,marginTop:16},children:[d.jsx(pi,{onClick:()=>{p("read"),T(Y.id),k(null)},style:{flex:1},children:" Read"}),d.jsx(pi,{variant:"secondary",onClick:()=>{p("quiz"),H(Y.id),I(0),M(!1)},style:{flex:1},children:" Quiz"})]})]})]},Y.id)})]});return d.jsxs("div",{children:[Oe,y==="read"&&Ne(),y==="quiz"&&bi(),y==="topics"&&Ct()]})}const hw=[{pair:["Minification gain","Flux gain"],why:"Both are components of brightness gain but measure different things. Minification = area ratio. Flux = photon ratio."},{pair:["PKA (Gycm)","Air Kerma (Gy)"],why:"PKA includes field size (stochastic risk). Air kerma alone tells you intensity but not volume irradiated. PKA is constant along beam axis; kerma is not."},{pair:["Deterministic effects","Stochastic effects"],why:"Deterministic: threshold dose, severity increases with dose (skin burns, cataracts). Stochastic: no threshold, probability increases with dose (cancer, genetic)."},{pair:["Direct ionizing radiation","Indirect ionizing radiation"],why:"Direct: primary beam. Indirect: secondary radiation (Compton/photoelectric). But indirect ionizing radiation causes direct DNA damage."},{pair:["5 R/min","10 R/min","20 R/min"],why:"5 R/min: routine without auto. 10 R/min: routine with auto. 20 R/min: high-level/boost mode maximum."},{pair:["Radiation area","High radiation area"],why:"Radiation: 0.05 mSv/hr at 30 cm. High: 1 mSv/hr at 30 cm. Factor of 20 difference."},{pair:["Image intensifier distortions","FPD advantages"],why:"II has pincushion, S distortion, vignetting. FPD has NO spatial distortion but has ghosting, same resolution all FOVs."},{pair:["Fetal monthly limit","Fetal total limit"],why:"Monthly: 0.5 mSv. Total pregnancy: 5 mSv. Factor of 10."},{pair:["Somatic effects","Genetic effects"],why:"Somatic: damage to the individual (skin, cancer, cataracts). Genetic: damage to germ cells passed to offspring."},{pair:["Temporary sterility dose","Fetal damage threshold"],why:"Temp sterility: 30 rads to spermatogonia. Fetal damage threshold: 10 rads (with particular increase 15 rads)."},{pair:["ABC (Automatic Brightness Control)","AGC (Automatic Gain Control)"],why:"ABC adjusts x-ray output (kVp/mA)  controls radiation dose. AGC adjusts video system electronic gain  controls displayed image brightness. Both maintain a 'bright' image but through completely different mechanisms."},{pair:["Direct conversion FPD","Indirect conversion FPD"],why:"Direct: amorphous selenium converts x-rays directly to charge (no light step). Indirect: CsI scintillator  light  amorphous silicon photodiode  charge. Indirect is more common in fluoroscopy."},{pair:["Photoelectric effect","Compton scattering"],why:"Photoelectric: complete absorption of photon, dominates at low energies/high Z. Compton: partial absorption + scattered photon, dominates at diagnostic energies in soft tissue. Photoelectric produces NO scatter; Compton is the main source of scatter."},{pair:["Film badge accuracy (25%)","TLD accuracy (9%)"],why:"TLD is 3 more accurate. Film badge provides a permanent physical record. TLD is reusable. Both measure accumulated dose over time; pocket dosimeter gives immediate readout."},{pair:["Characteristic radiation","Bremsstrahlung radiation"],why:"Characteristic: discrete energies from electron shell transitions. Bremsstrahlung: continuous spectrum from electron deceleration near nuclei. Bremsstrahlung makes up the majority of the diagnostic x-ray beam."},{pair:["High contrast resolution","Low contrast resolution"],why:"High contrast: thin lines/spaces, copper mesh test, measures spatial detail. Low contrast: large objects with slight density differences, aluminum plate test, measures tissue differentiation. Different tests, different clinical meaning."},{pair:["Deep-dose equivalent (1 cm)","Eye dose equivalent (0.3 cm)"],why:"Deep dose measured at 1 cm tissue depth for whole-body. Eye dose at 0.3 cm for lens of eye. Different depths because the lens is more superficial. Limits are different: 50 mSv/yr whole body vs 150 mSv/yr eye."},{pair:["CA gonad shielding (0.5 mm Pb)","Federal gonad shielding (0.25 mm Pb)"],why:"California requires 0.5 mm lead equivalent  double the federal minimum of 0.25 mm. A California-specific regulation that is a common exam question."},{pair:["10-day rule","14-day rule"],why:"Both relate to scheduling x-rays for women of childbearing age. 10-day (ICRP): exam within 10 days of menses onset. 14-day (NCRP): within 14 days. Current practice: properly indicated exams need not be postponed, but always ask about pregnancy."},{pair:["QA records (3 years)","Film processor records (1 year)"],why:"QA equipment records must be kept 3 years minimum. Film processor control charts/logs only 1 year. Different retention periods for different types of quality records."}],fw=["Missed","Confusables","Numbers","Flagged"];function mw(){const{theme:n,domainColors:a}=ve(),{study:r,studyDispatch:o}=ba(),[u,h]=ue.useState("Missed"),[f,g]=ue.useState({}),[y,p]=ue.useState(null),[b,T]=ue.useState({}),[x,k]=ue.useState(0),[z,H]=ue.useState(!1),q=r.missedQuestions.map(O=>{const[M,$]=O.split("-"),Z=va.filter(X=>X.domain===M)[parseInt($)];return Z?{...Z,id:O}:null}).filter(Boolean),I=r.flaggedQuestions.map(O=>{const[M,$]=O.split("-"),Z=va.filter(X=>X.domain===M)[parseInt($)];return Z?{...Z,id:O}:null}).filter(Boolean);return d.jsxs("div",{children:[d.jsx("div",{style:{display:"flex",gap:6,marginBottom:20,overflowX:"auto",paddingBottom:4},children:fw.map(O=>d.jsxs("button",{onClick:()=>h(O),style:{padding:"8px 18px",borderRadius:20,border:u===O?"none":`1px solid ${n.border}`,background:u===O?n.primary:"transparent",color:u===O?"#FFF":n.textSecondary,fontWeight:600,fontSize:14,cursor:"pointer",fontFamily:"inherit",whiteSpace:"nowrap",minHeight:36},children:[O,O==="Missed"&&q.length>0&&d.jsx("span",{style:{marginLeft:6,background:u===O?"rgba(255,255,255,0.25)":n.errorBg,color:u===O?"#FFF":n.error,padding:"2px 7px",borderRadius:10,fontSize:12},children:q.length}),O==="Flagged"&&I.length>0&&d.jsx("span",{style:{marginLeft:6,background:u===O?"rgba(255,255,255,0.25)":n.warningBg,color:u===O?"#FFF":n.warning,padding:"2px 7px",borderRadius:10,fontSize:12},children:I.length})]},O))}),u==="Missed"&&d.jsx("div",{children:q.length===0?d.jsxs(Me,{style:{textAlign:"center",padding:40},children:[d.jsx("div",{style:{fontSize:40,marginBottom:12},children:""}),d.jsx("div",{style:{fontSize:17,fontWeight:600,color:n.text,marginBottom:6},children:"No Missed Questions"}),d.jsx("div",{style:{fontSize:14,color:n.textMuted},children:"Questions you get wrong will appear here for review."})]}):d.jsxs("div",{children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[d.jsxs("div",{style:{fontSize:14,color:n.textMuted},children:[x+1," of ",q.length]}),d.jsx("button",{onClick:()=>{o({type:"CLEAR_MISSED"}),k(0)},style:{padding:"6px 14px",borderRadius:8,border:`1px solid ${n.border}`,background:"transparent",color:n.textMuted,fontSize:13,cursor:"pointer",fontFamily:"inherit"},children:"Clear All"})]}),d.jsxs(Me,{accent:a[q[x].domain],style:{marginBottom:16},children:[d.jsx("div",{style:{fontSize:12,fontWeight:600,color:a[q[x].domain],textTransform:"uppercase",marginBottom:8},children:et.find(O=>O.id===q[x].domain)?.name}),d.jsx("div",{style:{fontSize:16,fontWeight:600,color:n.text,lineHeight:1.5,marginBottom:16},children:q[x].q}),z?d.jsx("div",{style:{background:n.answerBg,border:`1px solid ${n.answerBorder}`,borderRadius:10,padding:16},children:d.jsx("div",{style:{fontSize:14,color:n.answerText,lineHeight:1.7},children:q[x].a})}):d.jsx(pi,{fullWidth:!0,variant:"secondary",onClick:()=>H(!0),children:"Show Answer"})]}),d.jsxs("div",{style:{display:"flex",gap:8},children:[d.jsx(pi,{fullWidth:!0,variant:"ghost",disabled:x===0,onClick:()=>{k(O=>O-1),H(!1)},children:"Previous"}),d.jsx(pi,{fullWidth:!0,variant:"primary",disabled:x>=q.length-1,onClick:()=>{k(O=>O+1),H(!1)},children:"Next"})]})]})}),u==="Confusables"&&d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:14,color:n.textMuted,marginBottom:16},children:"Tap a pair to reveal why they're commonly confused on exams."}),hw.map((O,M)=>d.jsxs(Me,{onClick:()=>g($=>({...$,[M]:!$[M]})),style:{marginBottom:10,cursor:"pointer"},children:[d.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:O.pair.map(($,Z)=>d.jsxs("span",{children:[d.jsx("span",{style:{background:n.primaryLight,color:n.primary,padding:"4px 12px",borderRadius:8,fontSize:14,fontWeight:600},children:$}),Z<O.pair.length-1&&d.jsx("span",{style:{color:n.textMuted,margin:"0 4px",fontSize:14},children:"vs"})]},Z))}),f[M]&&d.jsx("div",{style:{marginTop:12,paddingTop:12,borderTop:`1px solid ${n.border}`,fontSize:14,color:n.textSecondary,lineHeight:1.7},children:O.why})]},M))]}),u==="Numbers"&&d.jsx("div",{children:y?d.jsxs("div",{children:[d.jsx("button",{onClick:()=>p(null),style:{display:"flex",alignItems:"center",gap:6,background:"none",border:"none",color:n.primary,fontSize:14,fontWeight:600,cursor:"pointer",padding:0,marginBottom:16,fontFamily:"inherit"},children:" All Domains"}),d.jsxs("div",{style:{fontSize:17,fontWeight:600,color:n.text,marginBottom:4},children:[et.find(O=>O.id===y)?.icon," ",et.find(O=>O.id===y)?.name]}),d.jsx("div",{style:{fontSize:13,color:n.textMuted,marginBottom:16},children:"Tap each number to reveal / hide it."}),et.find(O=>O.id===y)?.keyNumbers.map((O,M)=>d.jsx(Me,{onClick:()=>T($=>({...$,[M]:!$[M]})),padding:"sm",style:{marginBottom:8,cursor:"pointer",borderLeft:`3px solid ${a[y]}`},children:d.jsx("div",{style:{fontSize:14,color:b[M]?n.text:n.textMuted,lineHeight:1.6,fontWeight:b[M]?500:400,filter:b[M]?"none":"blur(5px)",transition:"filter 0.2s, color 0.2s",userSelect:b[M]?"auto":"none"},children:O})},M)),d.jsx(pi,{fullWidth:!0,variant:"ghost",onClick:()=>T(O=>{const M=et.find(X=>X.id===y)?.keyNumbers.length||0;if(Object.keys(O).length>=M)return{};const Z={};for(let X=0;X<M;X++)Z[X]=!0;return Z}),style:{marginTop:12},children:"Toggle All"})]}):d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:14,color:n.textMuted,marginBottom:16},children:"Select a domain to drill key numbers and values."}),et.map(O=>d.jsx(Me,{onClick:()=>{p(O.id),T({})},accent:a[O.id],style:{marginBottom:10,cursor:"pointer"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[d.jsx("span",{style:{fontSize:20},children:O.icon}),d.jsx("span",{style:{fontSize:15,fontWeight:600,color:n.text},children:O.name})]}),d.jsxs("span",{style:{fontSize:13,color:n.textMuted},children:[O.keyNumbers.length," values"]})]})},O.id))]})}),u==="Flagged"&&d.jsx("div",{children:I.length===0?d.jsxs(Me,{style:{textAlign:"center",padding:40},children:[d.jsx("div",{style:{fontSize:40,marginBottom:12},children:""}),d.jsx("div",{style:{fontSize:17,fontWeight:600,color:n.text,marginBottom:6},children:"No Flagged Questions"}),d.jsx("div",{style:{fontSize:14,color:n.textMuted},children:"Flag questions during quizzes to review them later."})]}):d.jsx("div",{children:I.map((O,M)=>d.jsxs(Me,{accent:a[O.domain],style:{marginBottom:10},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:8},children:[d.jsx("div",{style:{fontSize:12,fontWeight:600,color:a[O.domain],textTransform:"uppercase"},children:et.find($=>$.id===O.domain)?.name}),d.jsx("button",{onClick:()=>o({type:"TOGGLE_FLAG",questionId:O.id}),style:{background:"none",border:"none",cursor:"pointer",fontSize:16,color:n.warning,padding:0},children:""})]}),d.jsx("div",{style:{fontSize:15,fontWeight:600,color:n.text,lineHeight:1.5,marginBottom:10},children:O.q}),d.jsx("div",{style:{background:n.answerBg,border:`1px solid ${n.answerBorder}`,borderRadius:8,padding:12},children:d.jsx("div",{style:{fontSize:13,color:n.answerText,lineHeight:1.6},children:O.a})})]},M))})})]})}function gw(){const{theme:n,domainColors:a}=ve(),{state:r}=bn(),{study:o}=ba(),u=Object.values(r.completedDays).filter(Boolean).length,h=o.totalAnswered>0?Math.round(o.totalCorrect/o.totalAnswered*100):0,f=et.map(y=>{const p=o.quizResults[y.id],b=p?p.correct+p.wrong:0,T=b>0?Math.round(p.correct/b*100):0,x=va.filter(k=>k.domain===y.id).length;return{...y,total:b,accuracy:T,correct:p?.correct||0,wrong:p?.wrong||0,questionCount:x}}),g=[];for(let y=1;y<=30;y++)g.push({day:y,completed:!!r.completedDays[y],isCurrent:y===r.currentDay});return d.jsxs("div",{children:[d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10,marginBottom:20},children:[{label:"Accuracy",value:`${h}%`,color:h>=75?n.success:h>=50?n.warning:n.error},{label:"Answered",value:o.totalAnswered,color:n.primary},{label:"Streak",value:`${r.streak.current}d`,color:n.warning}].map(y=>d.jsxs(Me,{padding:"sm",style:{textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,fontWeight:800,color:y.color},children:y.value}),d.jsx("div",{style:{fontSize:12,color:n.textMuted,marginTop:2},children:y.label})]},y.label))}),d.jsxs(Me,{style:{marginBottom:20},children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.text,marginBottom:14},children:"30-Day Progress"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:6},children:g.map(({day:y,completed:p,isCurrent:b})=>d.jsx("div",{style:{aspectRatio:"1",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:13,fontWeight:b?700:500,background:p?n.success:b?n.primaryLight:n.surfaceHover,color:p?"#FFF":b?n.primary:n.textMuted,border:b&&!p?`2px solid ${n.primary}`:"none"},children:y},y))}),d.jsxs("div",{style:{marginTop:12,fontSize:13,color:n.textMuted,textAlign:"center"},children:[u," of 30 days completed (",Math.round(u/30*100),"%)"]})]}),d.jsxs(Me,{style:{marginBottom:20},children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.text,marginBottom:16},children:"Domain Mastery"}),f.map(y=>d.jsxs("div",{style:{marginBottom:16},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx("span",{style:{fontSize:16},children:y.icon}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.text},children:y.name})]}),d.jsxs("div",{style:{fontSize:13,color:n.textMuted},children:[y.total>0?`${y.accuracy}%`:"","  ",y.correct,"/",y.total]})]}),d.jsx(Wb,{value:y.accuracy,color:a[y.id],height:6})]},y.id))]}),d.jsxs(Me,{style:{marginBottom:20},children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.text,marginBottom:14},children:"Question Coverage"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Total Questions"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.text},children:va.length})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Answered"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.primary},children:o.totalAnswered})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Correct"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.success},children:o.totalCorrect})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Wrong"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.error},children:o.totalAnswered-o.totalCorrect})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Missed Queue"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.warning},children:o.missedQuestions.length})]})]}),d.jsxs(Me,{children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.text,marginBottom:14},children:"Additional Stats"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"XP Earned"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.primary},children:r.xp})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Longest Streak"}),d.jsxs("span",{style:{fontSize:14,fontWeight:600,color:n.warning},children:[r.streak.longest," days"]})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Domains Studied"}),d.jsxs("span",{style:{fontSize:14,fontWeight:600,color:n.text},children:[o.domainsStudied.length," / ",et.length]})]}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[d.jsx("span",{style:{fontSize:14,color:n.textSecondary},children:"Speed Read Max WPM"}),d.jsx("span",{style:{fontSize:14,fontWeight:600,color:n.text},children:o.maxWpm})]})]})]})}function yw(){const{isDark:n,theme:a,toggleTheme:r}=ve(),{state:o,dispatch:u}=bn(),{study:h}=ba(),f=hg(o.xp),g=Qc(f),y=Qc(f+1),p=y>g?(o.xp-g)/(y-g)*100:100;function b(x){switch(x.id){case"first-quiz":return h.totalAnswered>=1;case"ten-correct":return h.totalCorrect>=10;case"hundred-questions":return h.totalAnswered>=100;case"week-streak":return o.streak.longest>=7;case"month-streak":return o.streak.longest>=30;case"domain-master":return Object.entries(h.quizResults).some(([,k])=>{const z=k.correct+k.wrong;return z>=5&&k.correct/z>=.9});case"all-domains":return h.domainsStudied.length>=7;case"speed-reader":return h.maxWpm>=500;case"completionist":return Object.values(o.completedDays).filter(Boolean).length>=30;case"night-owl":return h.lateNightSessions>0;default:return!1}}const T=Nc.filter(x=>b(x)).length;return d.jsxs("div",{children:[d.jsxs(Me,{style:{marginBottom:20,textAlign:"center"},children:[d.jsx("div",{style:{width:72,height:72,borderRadius:36,background:a.primaryLight,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px"},children:d.jsx("span",{style:{fontSize:32},children:""})}),d.jsx("div",{style:{fontSize:20,fontWeight:700,color:a.text,marginBottom:4},children:fg[f]||"Trainee"}),d.jsxs("div",{style:{fontSize:14,color:a.textMuted,marginBottom:16},children:["Level ",f,"  ",o.xp," XP"]}),d.jsx("div",{style:{position:"relative",height:8,background:a.border,borderRadius:4,marginBottom:6},children:d.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${Math.min(p,100)}%`,background:a.primary,borderRadius:4,transition:"width 0.5s ease"}})}),d.jsxs("div",{style:{fontSize:12,color:a.textMuted},children:[y-o.xp," XP to Level ",f+1]})]}),d.jsxs(Me,{style:{marginBottom:20},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:a.text},children:"Badges"}),d.jsxs("div",{style:{fontSize:13,color:a.textMuted},children:[T," / ",Nc.length]})]}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:10},children:Nc.map(x=>{const k=b(x);return d.jsxs("div",{title:`${x.name}: ${x.desc}`,style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[d.jsx("div",{style:{width:48,height:48,borderRadius:24,background:k?a.primaryLight:a.surfaceHover,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,opacity:k?1:.35,filter:k?"none":"grayscale(1)"},children:x.icon}),d.jsx("div",{style:{fontSize:10,fontWeight:500,textAlign:"center",color:k?a.text:a.textDim,lineHeight:1.2},children:x.name})]},x.id)})})]}),d.jsxs(Me,{style:{marginBottom:20},children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:a.text,marginBottom:16},children:"Settings"}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:15,fontWeight:500,color:a.text},children:"Dark Mode"}),d.jsx("div",{style:{fontSize:13,color:a.textMuted},children:"Easier on the eyes at night"})]}),d.jsx("button",{onClick:r,style:{width:52,height:28,borderRadius:14,background:n?a.primary:a.border,border:"none",cursor:"pointer",position:"relative",transition:"background 0.2s"},children:d.jsx("div",{style:{width:22,height:22,borderRadius:11,background:"#FFF",position:"absolute",top:3,left:n?27:3,transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})})]}),d.jsxs("div",{style:{marginBottom:20},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:15,fontWeight:500,color:a.text},children:"Speed Reader WPM"}),d.jsx("div",{style:{fontSize:13,color:a.textMuted},children:"Words per minute for RSVP"})]}),d.jsx("span",{style:{fontSize:15,fontWeight:700,color:a.primary},children:o.rsvpWpm})]}),d.jsx("input",{type:"range",min:100,max:800,step:25,value:o.rsvpWpm,onChange:x=>u({type:"SET_RSVP_WPM",wpm:parseInt(x.target.value)}),style:{width:"100%",accentColor:a.primary}}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:12,color:a.textMuted},children:[d.jsx("span",{children:"100"}),d.jsx("span",{children:"800"})]})]}),d.jsxs("div",{children:[d.jsx("div",{style:{fontSize:15,fontWeight:500,color:a.text,marginBottom:4},children:"Chunk Size"}),d.jsx("div",{style:{fontSize:13,color:a.textMuted,marginBottom:10},children:"Words shown at a time in speed reader"}),d.jsx("div",{style:{display:"flex",gap:8},children:[1,2,3].map(x=>d.jsxs("button",{onClick:()=>u({type:"SET_RSVP_CHUNK",chunk:x}),style:{flex:1,padding:"10px 0",borderRadius:8,border:o.rsvpChunk===x?"none":`1px solid ${a.border}`,background:o.rsvpChunk===x?a.primary:"transparent",color:o.rsvpChunk===x?"#FFF":a.textSecondary,fontWeight:600,fontSize:14,cursor:"pointer",fontFamily:"inherit",minHeight:44},children:[x," word",x>1?"s":""]},x))})]})]}),d.jsxs(Me,{children:[d.jsx("div",{style:{fontSize:14,fontWeight:600,color:a.text,marginBottom:8},children:"About FluoroPath"}),d.jsx("div",{style:{fontSize:13,color:a.textMuted,lineHeight:1.7},children:"FluoroPath helps you prepare for the California fluoroscopy permit exam with structured 30-day study plans, quizzes, speed reading, and spaced review. Built to help you pass with confidence."}),d.jsx("div",{style:{fontSize:12,color:a.textDim,marginTop:12},children:"Version 2.0.0"})]})]})}function pw({words:n,title:a,onClose:r}){const{theme:o}=ve(),{state:u,dispatch:h}=bn(),{studyDispatch:f}=ba(),[g,y]=ue.useState(0),[p,b]=ue.useState(!1),T=ue.useRef(null),x=u.rsvpWpm,k=u.rsvpChunk;ue.useEffect(()=>{if(p&&g<n.length){const Z=6e4/x;T.current=setTimeout(()=>{y(X=>{const Q=X+k;return Q>=n.length?(b(!1),h({type:"ADD_XP",amount:Mb.speedRead}),n.length-1):Q})},Z*k)}return()=>{T.current&&clearTimeout(T.current)}},[p,g,x,k,n.length,h]),ue.useEffect(()=>{p&&f({type:"SET_MAX_WPM",wpm:x})},[p,x,f]);const z=n.slice(g,g+k).join(" "),H=n.length>0?(g+k)/n.length*100:0,q=n.length>0?Math.ceil((n.length-g)/x*60):0,I=Math.floor(q/60),O=q%60;function M(){T.current&&clearTimeout(T.current),b(!1),r()}function $(){g>=n.length-1?(y(0),b(!0)):b(Z=>!Z)}return d.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:o.rsvpBg,zIndex:9999,display:"flex",flexDirection:"column",fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},children:[d.jsxs("div",{style:{padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${o.border}`},children:[d.jsx("button",{onClick:M,style:{background:"none",border:"none",color:o.error,fontSize:16,fontWeight:600,cursor:"pointer",padding:"8px 12px",fontFamily:"inherit"},children:"Close"}),d.jsx("div",{style:{color:o.textMuted,fontSize:13,textAlign:"center",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a}),d.jsxs("div",{style:{color:o.textDim,fontSize:13,minWidth:60,textAlign:"right"},children:[I,":",String(O).padStart(2,"0")," left"]})]}),d.jsx("div",{style:{height:3,background:o.border},children:d.jsx("div",{style:{height:"100%",background:o.primary,width:`${Math.min(H,100)}%`,transition:"width 0.1s"}})}),d.jsxs("div",{onClick:$,style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",cursor:"pointer",userSelect:"none",padding:"0 20px"},children:[d.jsxs("div",{style:{width:"80%",maxWidth:500,position:"relative"},children:[d.jsx("div",{style:{borderBottom:`2px solid ${o.border}`,marginBottom:16}}),d.jsx("div",{style:{fontSize:k===1?44:k===2?36:30,fontWeight:700,color:o.text,textAlign:"center",minHeight:60,display:"flex",alignItems:"center",justifyContent:"center",letterSpacing:k===1?2:1,lineHeight:1.2},children:g>=n.length?"Done":z}),d.jsx("div",{style:{borderTop:`2px solid ${o.border}`,marginTop:16}})]}),d.jsx("div",{style:{marginTop:24,color:o.textDim,fontSize:14},children:g>=n.length-1&&!p?"Tap to restart":p?"Tap to pause":"Tap to play"})]}),d.jsxs("div",{style:{padding:16,borderTop:`1px solid ${o.border}`},children:[d.jsxs("div",{style:{marginBottom:12},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[d.jsx("span",{style:{color:o.textMuted,fontSize:13},children:"Speed"}),d.jsxs("span",{style:{color:o.primary,fontSize:15,fontWeight:700},children:[x," WPM"]})]}),d.jsx("input",{type:"range",min:100,max:800,step:25,value:x,onChange:Z=>h({type:"SET_RSVP_WPM",wpm:parseInt(Z.target.value)}),style:{width:"100%",accentColor:o.primary}}),d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:o.textDim},children:[d.jsx("span",{children:"100"}),d.jsx("span",{children:"300"}),d.jsx("span",{children:"500"}),d.jsx("span",{children:"800"})]})]}),d.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[d.jsx("div",{style:{display:"flex",gap:4},children:[1,2,3].map(Z=>d.jsxs("button",{onClick:()=>h({type:"SET_RSVP_CHUNK",chunk:Z}),style:{padding:"8px 12px",borderRadius:6,border:"none",background:k===Z?o.primary:o.surfaceHover,color:k===Z?"#FFF":o.textMuted,fontSize:13,fontWeight:600,cursor:"pointer",fontFamily:"inherit"},children:[Z,"w"]},Z))}),d.jsx("div",{style:{flex:1}}),d.jsx("button",{onClick:()=>y(Z=>Math.max(0,Z-20)),style:{padding:"8px 14px",borderRadius:6,border:"none",background:o.surfaceHover,color:o.textMuted,fontSize:14,cursor:"pointer"},children:""}),d.jsx("button",{onClick:$,style:{padding:"8px 20px",borderRadius:6,border:"none",background:o.primary,color:"#FFF",fontSize:18,cursor:"pointer",fontWeight:700},children:p?"":""}),d.jsx("button",{onClick:()=>y(Z=>Math.min(n.length-1,Z+20)),style:{padding:"8px 14px",borderRadius:6,border:"none",background:o.surfaceHover,color:o.textMuted,fontSize:14,cursor:"pointer"},children:""})]}),d.jsxs("div",{style:{textAlign:"center",marginTop:10,color:o.textDim,fontSize:12},children:[Math.min(g+k,n.length)," / ",n.length," words"]})]})]})}function vw(){const{theme:n}=ve(),{study:a}=ba(),[r,o]=ue.useState("home"),[u,h]=ue.useState(null),[f,g]=ue.useState(null),y=a.missedQuestions.length+a.flaggedQuestions.length,p=(T,x)=>{h(x?{...x,_ts:Date.now()}:null),o(T)},b=(T,x)=>{const k=T.split(/\s+/).filter(z=>z.length>0);g({words:k,title:x})};return d.jsxs("div",{style:{minHeight:"100vh",background:n.bg,fontFamily:'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',color:n.text},children:[d.jsxs("div",{style:{maxWidth:680,margin:"0 auto",padding:"0 16px",paddingBottom:80},children:[d.jsx(Nb,{onGoHome:()=>p("home")}),r==="home"&&d.jsx(Ib,{onNavigate:p}),r==="study"&&d.jsx(dw,{onLaunchRsvp:b,navContext:u},u?._ts||"default"),r==="review"&&d.jsx(mw,{}),r==="progress"&&d.jsx(gw,{}),r==="profile"&&d.jsx(yw,{})]}),d.jsx(Lb,{activeTab:r,onTabChange:o,reviewCount:y}),f&&d.jsx(pw,{words:f.words,title:f.title,onClose:()=>g(null)})]})}function bw(){return d.jsx(Pp,{children:d.jsx(Db,{children:d.jsx(Bb,{children:d.jsx(vw,{})})})})}"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(n=>{if(n){n.update();let a=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{a||(a=!0,window.location.reload())})}});Fp.createRoot(document.getElementById("root")).render(d.jsx(ue.StrictMode,{children:d.jsx(bw,{})}));
